{"ast":null,"code":"import { useStore } from 'vuex';\nimport { inject } from 'vue';\nimport { computed } from 'vue';\nimport { mapGetters } from 'vuex';\nexport default {\n  inject: ['musicid'],\n\n  async setup() {\n    const store = useStore();\n    await store.dispatch('music/musicinfo', inject('musicid'));\n    const trylist = await store.getters['music/listofmusicinfo'];\n    const audioList = [{\n      name: trylist[0].name,\n      url: 'http://127.0.0.1:1943/enjoymusic/' + trylist[0].id\n    }, {\n      name: 'hello',\n      url: 'http://127.0.0.1:1943/enjoymusic/6'\n    }]; // useStore().dispatch('music/musicinfo', inject('musicid')).then(\n    // useStore().getters['music/listofmusicinfo']\n    // )\n    // useStore().dispatch('music/musicinfo', inject('musicid')).then(\n    //  computed(()=> useStore().getters['music/listofmusicinfo'])\n    // useStore().getters['music/listofmusicinfo']\n    // )\n    // console.log( useStore().getters('music/listofmusicinfo'))\n    // console.log(useStore().getters[music/listofmusicinfo])\n\n    return {\n      trylist,\n      audioList // trylist: useStore().getters['music/listofmusicinfo']\n      // trylist:[inject('musicid')]\n      // return{\n      // trylist: computed(()=>store.getters['music/listofmusicinfo'])\n      // }\n\n    };\n  },\n\n  data() {\n    return {\n      currentAudioName: '',\n      // audioList: [\n      //   {\n      //     name: 'test',\n      //     url: \"test\"\n      //   },\n      // ],\n      // audioList:[],\n      // TryList:null,\n      // audioList: thisisthelist,\n      otherList: [],\n      dataready: false\n    };\n  },\n\n  // beforeRouteEnter(to, from,next){\n  //     next(vm=>vm.setData())\n  // },\n  methods: {\n    handleBeforePlay(next) {\n      //There are a few things you can do here...\n      this.currentAudioName = this.otherList[this.$refs.audioPlayer.currentPlayIndex].name;\n      next();\n    } //   async setData(){\n    //     console.log('callsetdate')\n    //     await  this.$store.dispatch('music/musicinfo',this.musicid);\n    //     this.TryList = await this.$store.getters['music/listofmusicinfo'];\n    //   }\n\n\n  },\n\n  async beforeUpdate() {\n    this.otherList = audioList; // console.log('injected data '+this.trylist);\n    // await  this.$store.dispatch('music/musicinfo',this.musicid);\n    // console.log(this.$store.getters['music/listofmusicinfo']);\n    // this.TryList = await this.$store.getters['music/listofmusicinfo'];\n    // this.audioList[0] =  {\n    //     name:this.TryList[0].name,\n    //     url:'http://127.0.0.1:1943/enjoymusic/'+this.TryList[0].id ,\n    // };\n    // console.log(this.musicid)\n    // console.log(...mapGetters(['MusicUserid',]))\n  }\n\n};","map":{"version":3,"mappings":"AAaE,SAAQA,QAAR,QAAuB,MAAvB;AACA,SAAQC,MAAR,QAAqB,KAArB;AACA,SAAQC,QAAR,QAAuB,KAAvB;AACA,SAAQC,UAAR,QAAyB,MAAzB;AACA,eAAe;EACbF,MAAM,EAAC,CAAC,SAAD,CADM;;EAEb,MAAMG,KAAN,GAAc;IACV,MAAMC,KAAI,GAAIL,QAAQ,EAAtB;IACA,MAAMK,KAAK,CAACC,QAAN,CAAe,iBAAf,EAAkCL,MAAM,CAAC,SAAD,CAAxC,CAAN;IACA,MAAMM,OAAM,GAAI,MAAMF,KAAK,CAACG,OAAN,CAAc,uBAAd,CAAtB;IACA,MAAMC,SAAQ,GAAI,CAAC;MACfC,IAAI,EAACH,OAAO,CAAC,CAAD,CAAP,CAAWG,IADD;MAEfC,GAAG,EAAC,sCAAoCJ,OAAO,CAAC,CAAD,CAAP,CAAWK;IAFpC,CAAD,EAIlB;MACIF,IAAI,EAAC,OADT;MAEIC,GAAG,EAAC;IAFR,CAJkB,CAAlB,CAJU,CAaV;IACA;IACA;IAEA;IACA;IACI;IACJ;IAEA;IACA;;IACA,OAAM;MACFJ,OADE;MAEFE,SAFE,CAGF;MACA;MACA;MACA;MACJ;;IAPM,CAAN;EASH,CAnCY;;EAoCbI,IAAI,GAAG;IACL,OAAO;MACLC,gBAAgB,EAAE,EADb;MAEL;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MAEAC,SAAS,EAAC,EAZL;MAaLC,SAAS,EAAC;IAbL,CAAP;EAeD,CApDY;;EAqDb;EACA;EACA;EACAC,OAAO,EAAE;IACPC,gBAAgB,CAACC,IAAD,EAAO;MACrB;MACA,KAAKL,gBAAL,GAAwB,KAAKC,SAAL,CAAe,KAAKK,KAAL,CAAWC,WAAX,CAAuBC,gBAAtC,EAAwDZ,IAAhF;MACAS,IAAI;IACL,CALM,CAMT;IACA;IACA;IACA;IACA;;;EAVS,CAxDI;;EAqEb,MAAMI,YAAN,GAAoB;IAChB,KAAKR,SAAL,GAAiBN,SAAjB,CADgB,CAEhB;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;EACD;;AAjFU,CAAf","names":["useStore","inject","computed","mapGetters","setup","store","dispatch","trylist","getters","audioList","name","url","id","data","currentAudioName","otherList","dataready","methods","handleBeforePlay","next","$refs","audioPlayer","currentPlayIndex","beforeUpdate"],"sourceRoot":"","sources":["/home/little/Documents/music_web/startproj/zhengdao-ui/src/components/function/musicaudio.vue"],"sourcesContent":["<template>\n        <div>\n          <p style = \"color:beige\">Music Name:</p>\n          <p style = \"color:beige; padding-bottom:3px;\">{{ currentAudioName || audioList[0].name }}</p>\n          <audio-player\n              ref=\"audioPlayer\"\n              :audio-list=\"this.audioList.map(elm => elm.url)\"\n              theme-color=\"#ffff\"\n          />\n        </div>\n    <!-- {{audioList[0].url}} -->\n</template>\n <script> \n  import {useStore} from 'vuex'\n  import {inject} from 'vue'\n  import {computed} from 'vue'\n  import {mapGetters} from 'vuex'\n  export default {\n    inject:['musicid'],\n    async setup (){\n        const store = useStore()\n        await store.dispatch('music/musicinfo', inject('musicid'))\n        const trylist = await store.getters['music/listofmusicinfo']\n        const audioList = [{\n            name:trylist[0].name,\n            url:'http://127.0.0.1:1943/enjoymusic/'+trylist[0].id\n        },\n        {\n            name:'hello',\n            url:'http://127.0.0.1:1943/enjoymusic/6'\n        }\n    ]\n        // useStore().dispatch('music/musicinfo', inject('musicid')).then(\n        // useStore().getters['music/listofmusicinfo']\n        // )\n\n        // useStore().dispatch('music/musicinfo', inject('musicid')).then(\n        //  computed(()=> useStore().getters['music/listofmusicinfo'])\n            // useStore().getters['music/listofmusicinfo']\n        // )\n        \n        // console.log( useStore().getters('music/listofmusicinfo'))\n        // console.log(useStore().getters[music/listofmusicinfo])\n        return{\n            trylist,\n            audioList,\n            // trylist: useStore().getters['music/listofmusicinfo']\n            // trylist:[inject('musicid')]\n            // return{\n            // trylist: computed(()=>store.getters['music/listofmusicinfo'])\n        // }\n        }\n    },\n    data() {\n      return {\n        currentAudioName: '',\n        // audioList: [\n        //   {\n        //     name: 'test',\n        //     url: \"test\"\n        //   },\n        // ],\n        // audioList:[],\n        // TryList:null,\n        // audioList: thisisthelist,\n        \n        otherList:[],\n        dataready:false,\n      }\n    },\n    // beforeRouteEnter(to, from,next){\n    //     next(vm=>vm.setData())\n    // },\n    methods: {\n      handleBeforePlay(next) {\n        //There are a few things you can do here...\n        this.currentAudioName = this.otherList[this.$refs.audioPlayer.currentPlayIndex].name\n        next() \n      },\n    //   async setData(){\n    //     console.log('callsetdate')\n    //     await  this.$store.dispatch('music/musicinfo',this.musicid);\n    //     this.TryList = await this.$store.getters['music/listofmusicinfo'];\n    //   }\n    },\n    \n    async beforeUpdate(){\n        this.otherList = audioList;\n        // console.log('injected data '+this.trylist);\n        // await  this.$store.dispatch('music/musicinfo',this.musicid);\n        // console.log(this.$store.getters['music/listofmusicinfo']);\n        // this.TryList = await this.$store.getters['music/listofmusicinfo'];\n        // this.audioList[0] =  {\n        //     name:this.TryList[0].name,\n        //     url:'http://127.0.0.1:1943/enjoymusic/'+this.TryList[0].id ,\n        // };\n        // console.log(this.musicid)\n        // console.log(...mapGetters(['MusicUserid',]))\n      },\n    \n  }\n  </script>\n\n  <style scoped>\n \n  </style>"]},"metadata":{},"sourceType":"module"}