{"ast":null,"code":"import axios from 'axios'; // import createUploader from '../../../compositions/file-uploader';\n\nconst backapi = process.env.VUE_APP_APIURL;\nexport default {\n  // async musicinfo(context, payload){\n  // const backapi = 'http://127.0.0.1:1943';\n  // const musicnumber = payload;\n  // try{\n  //     const errmes =await axios({\n  //         method: 'get',\n  //         url: backapi+'/music/'+musicnumber\n  //     }\n  //     ).then(function(response){\n  //         context.commit('setMusic',{\n  //             musicid : response.data[0].id,\n  //             cover_address : response.data[0].cover_address,\n  //             music_address : response.data[0].music_address,\n  //             musicname : response.data[0].name,\n  //             post_date : response.data[0].post_date,\n  //             user_id : response.data[0].user_id,\n  //         });\n  //     });\n  // }catch(err){\n  //     if (err.message == 'Request failed with status code 401'){\n  //         console.log('called if');\n  //         throw { message : \"Wrong password or username\" , number: 1000};\n  //     }\n  //     else {\n  //         throw err;\n  //     }\n  // }\n  // },\n  //feb 1\n  // async musicinfo(context, payload){\n  //     const backapi = 'http://127.0.0.1:1943';\n  //     const musicnumber = payload;\n  //     try{\n  //         const errmes =await axios({\n  //             method: 'get',\n  //             url: backapi+'/music/'+musicnumber\n  //         }\n  //         ).then(function(response){\n  //             context.commit('setlistofmusicinfo',{\n  //                 listofmusicinfo : response.data,\n  //             });\n  //         });\n  //     }catch(err){\n  //         if (err.message == 'Request failed with status code 401'){\n  //             console.log('called if');\n  //             throw { message : \"No music info display\" , number: 308};\n  //         }\n  //         else {\n  //             throw err;\n  //         }\n  //     }\n  // },\n  async musicinfo(context, payload) {\n    const musicnumber = payload;\n\n    try {\n      const errmes = await axios({\n        method: 'get',\n        url: backapi + '/music/' + musicnumber\n      }).then(function (response) {\n        context.commit('setlistofmusicinfo', {\n          listofmusicinfo: response.data\n        });\n      });\n    } catch (err) {\n      if (err.message == 'Request failed with status code 401') {\n        console.log('called if');\n        throw {\n          message: \"No music info display\",\n          number: 308\n        };\n      } else {\n        throw err;\n      }\n    }\n  },\n\n  async uploadmusic(context, payload) {\n    //    console.log('commit action'+ typeof payload.musicinfo,typeof payload.upfiles.value[0])\n    const fd = new FormData();\n    fd.append('musicinfo', JSON.stringify(payload.musicinfo));\n    fd.append('createdate', payload.createdate.value);\n    console.log(payload.upfiles.value[0].file);\n    fd.append('imagefile', payload.upfiles.value[0].file, payload.upfiles.value[0].file.name);\n    axios({\n      method: 'post',\n      url: backapi + '/uploadmusicinfo',\n      data: fd,\n      headers: {\n        Accept: \"application/json\",\n        \"Content-Type\": \"application/json;charset=UTF-8\"\n      }\n    }).then(response => {\n      console.log(response);\n    }, error => {\n      console.log(error);\n    }); //    // const data ={\n    //     username: payload.username,\n    //     password: payload.password,\n    // }\n    // axios({\n    //     method: 'post',\n    //     url: backapi+'/uploadmusicinfo/',\n    //     data:data,\n    //     headers: {\n    //         Accept: \"application/json\",\n    //         \"Content-Type\": \"application/json;charset=UTF-8\",\n    //       },\n    // }).then((response) => {\n    //     console.log(response);\n    // }, (error) => {\n    //     console.log(error);\n    // });\n  },\n\n  async musiclyrics(context, payload) {\n    const backapi = 'http://127.0.0.1:1943';\n    const musicnumber = payload;\n\n    try {\n      const errmes = await axios({\n        method: 'get',\n        url: backapi + '/showlyrics/' + musicnumber\n      }).then(function (response) {\n        context.commit('setmusiclyrics', {\n          musiclyrics: response.data\n        });\n      });\n    } catch (err) {\n      if (err.message == 'Request failed with status code 401') {\n        console.log('called if');\n        throw {\n          message: \"No music lyrics display\",\n          number: 308\n        };\n      } else {\n        throw err;\n      }\n    }\n  },\n\n  async musiclistinfo(context, payload) {\n    const backapi = 'http://127.0.0.1:1943';\n    const searchtype = 4;\n\n    try {\n      const errmes = await axios({\n        method: 'get',\n        url: backapi + '/listmusics/' + searchtype\n      }).then(function (response) {\n        context.commit('setlistofMusic', {\n          listofMusic: response.data\n        });\n      });\n    } catch (err) {\n      if (err.message == 'Request failed with status code 401') {\n        console.log('called if');\n        throw {\n          message: \"No List Display\",\n          number: 308\n        };\n      } else {\n        throw err;\n      }\n    }\n  },\n\n  async setmusicscore(context, payload) {\n    const url = 'http://127.0.0.1:1943/ratemusic';\n    const data = {\n      musicid: payload.musicid,\n      musicscore: payload.musicscore\n    };\n    axios({\n      method: 'post',\n      url: url,\n      data: data,\n      headers: {\n        Accept: \"application/json\",\n        \"Content-Type\": \"application/json;charset=UTF-8\"\n      }\n    }).then(response => {\n      console.log(response);\n    }, error => {\n      console.log(error);\n    });\n  }\n\n};","map":{"version":3,"names":["axios","backapi","process","env","VUE_APP_APIURL","musicinfo","context","payload","musicnumber","errmes","method","url","then","response","commit","listofmusicinfo","data","err","message","console","log","number","uploadmusic","fd","FormData","append","JSON","stringify","createdate","value","upfiles","file","name","headers","Accept","error","musiclyrics","musiclistinfo","searchtype","listofMusic","setmusicscore","musicid","musicscore"],"sources":["/home/little/Documents/music_web/startproj/zhengdao-ui/src/store/modules/music/actions.js"],"sourcesContent":["import axios from 'axios';\n// import createUploader from '../../../compositions/file-uploader';\nconst backapi = process.env.VUE_APP_APIURL;\nexport default{\n    // async musicinfo(context, payload){\n    // const backapi = 'http://127.0.0.1:1943';\n    // const musicnumber = payload;\n    // try{\n    //     const errmes =await axios({\n    //         method: 'get',\n    //         url: backapi+'/music/'+musicnumber\n    //     }\n    //     ).then(function(response){\n    //         context.commit('setMusic',{\n    //             musicid : response.data[0].id,\n    //             cover_address : response.data[0].cover_address,\n    //             music_address : response.data[0].music_address,\n    //             musicname : response.data[0].name,\n    //             post_date : response.data[0].post_date,\n    //             user_id : response.data[0].user_id,\n    //         });\n    //     });\n    // }catch(err){\n    //     if (err.message == 'Request failed with status code 401'){\n    //         console.log('called if');\n    //         throw { message : \"Wrong password or username\" , number: 1000};\n    //     }\n    //     else {\n    //         throw err;\n    //     }\n    // }\n    // },\n    //feb 1\n    // async musicinfo(context, payload){\n    //     const backapi = 'http://127.0.0.1:1943';\n    //     const musicnumber = payload;\n    //     try{\n    //         const errmes =await axios({\n    //             method: 'get',\n    //             url: backapi+'/music/'+musicnumber\n    //         }\n    //         ).then(function(response){\n    //             context.commit('setlistofmusicinfo',{\n    //                 listofmusicinfo : response.data,\n                    \n    //             });\n    //         });\n    //     }catch(err){\n    //         if (err.message == 'Request failed with status code 401'){\n    //             console.log('called if');\n    //             throw { message : \"No music info display\" , number: 308};\n    //         }\n    //         else {\n    //             throw err;\n    //         }\n    //     }\n    // },\n    async musicinfo(context, payload){\n        \n        const musicnumber = payload;\n        try{\n            const errmes =await axios({\n                method: 'get',\n                url: backapi+'/music/'+musicnumber\n            }\n            ).then(function(response){\n                context.commit('setlistofmusicinfo',{\n                    listofmusicinfo : response.data,\n                    \n                });\n            });\n        }catch(err){\n            if (err.message == 'Request failed with status code 401'){\n                console.log('called if');\n                throw { message : \"No music info display\" , number: 308};\n            }\n            else {\n                throw err;\n            }\n        }\n    },\n    async uploadmusic(context, payload){\n    //    console.log('commit action'+ typeof payload.musicinfo,typeof payload.upfiles.value[0])\n       const fd = new FormData()\n       fd.append('musicinfo',JSON.stringify(payload.musicinfo))\n       fd.append('createdate', payload.createdate.value)\n       console.log(payload.upfiles.value[0].file)\n       fd.append('imagefile',payload.upfiles.value[0].file,payload.upfiles.value[0].file.name)\n       axios({\n        method: 'post',\n        url: backapi+'/uploadmusicinfo',\n        data: fd,\n        headers: {\n                    Accept: \"application/json\",\n                    \"Content-Type\": \"application/json;charset=UTF-8\",\n                  },\n       }).then((response)=>{\n        console.log(response)\n       },(error)=>{\n        console.log(error)\n       })\n    //    // const data ={\n        //     username: payload.username,\n        //     password: payload.password,\n        // }\n        // axios({\n        //     method: 'post',\n        //     url: backapi+'/uploadmusicinfo/',\n        //     data:data,\n        //     headers: {\n        //         Accept: \"application/json\",\n        //         \"Content-Type\": \"application/json;charset=UTF-8\",\n        //       },\n         \n        // }).then((response) => {\n        //     console.log(response);\n        // }, (error) => {\n        //     console.log(error);\n        // });\n   \n    },\n    async musiclyrics(context, payload){\n        const backapi = 'http://127.0.0.1:1943';\n        const musicnumber = payload;\n        try{\n            const errmes =await axios({\n                method: 'get',\n                url: backapi+'/showlyrics/'+musicnumber\n            }\n            ).then(function(response){\n                context.commit('setmusiclyrics',{\n                    musiclyrics : response.data,\n                    \n                });\n            });\n        }catch(err){\n            if (err.message == 'Request failed with status code 401'){\n                console.log('called if');\n                throw { message : \"No music lyrics display\" , number: 308};\n            }\n            else {\n                throw err;\n            }\n        }\n    \n    },\n    async musiclistinfo(context, payload){\n        const backapi = 'http://127.0.0.1:1943';\n        const searchtype = 4;\n        try{\n            const errmes =await axios({\n                method: 'get',\n                url: backapi+'/listmusics/'+searchtype\n            }\n            ).then(function(response){\n\n                context.commit('setlistofMusic',{\n                    listofMusic : response.data,\n                });\n\n            });\n        }catch(err){\n            if (err.message == 'Request failed with status code 401'){\n                console.log('called if');\n                throw { message : \"No List Display\" , number: 308};\n            }\n            else {\n                throw err;\n            }\n        }\n    },\n    async setmusicscore(context, payload){\n        const url = 'http://127.0.0.1:1943/ratemusic'\n        const data ={\n            musicid: payload.musicid,\n            musicscore: payload.musicscore,\n        }\n        axios({\n            method: 'post',\n            url: url,\n            data:data,\n            headers: {\n                Accept: \"application/json\",\n                \"Content-Type\": \"application/json;charset=UTF-8\",\n              },\n         \n        }).then((response) => {\n            console.log(response);\n        }, (error) => {\n            console.log(error);\n        });\n   \n    },\n}\n         "],"mappings":"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"},"metadata":{},"sourceType":"module"}