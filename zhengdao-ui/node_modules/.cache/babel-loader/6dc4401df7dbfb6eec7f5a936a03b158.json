{"ast":null,"code":"export async function uploadFile(file, url) {\n  // set up the request data\n  let formData = new FormData();\n  formData.append('file', file.file); // track status and upload file\n\n  file.status = 'loading';\n  let response = await fetch(url, {\n    method: 'POST',\n    body: formData\n  }); // change status to indicate the success of the upload request\n\n  file.status = response.ok;\n  return response;\n}\nexport function uploadFiles(files, url) {\n  return Promise.all(files.map(file => uploadFile(file, url)));\n}\nexport default function createUploader(url) {\n  return {\n    uploadFile: function (file) {\n      return uploadFile(file, url);\n    },\n    uploadFiles: function (files) {\n      return uploadFiles(files, url);\n    }\n  };\n}","map":{"version":3,"names":["uploadFile","file","url","formData","FormData","append","status","response","fetch","method","body","ok","uploadFiles","files","Promise","all","map","createUploader"],"sources":["/home/little/Documents/music_web/startproj/zhengdao-ui/src/compositions/file-uploader.js"],"sourcesContent":["export async function uploadFile(file, url) {\n\t// set up the request data\n\tlet formData = new FormData()\n\tformData.append('file', file.file)\n\n\t// track status and upload file\n\tfile.status = 'loading'\n\tlet response = await fetch(url, { method: 'POST', body: formData })\n\n\t// change status to indicate the success of the upload request\n\tfile.status = response.ok\n\n\treturn response\n}\n\nexport function uploadFiles(files, url) {\n\treturn Promise.all(files.map((file) => uploadFile(file, url)))\n}\n\nexport default function createUploader(url) {\n\treturn {\n\t\tuploadFile: function (file) {\n\t\t\treturn uploadFile(file, url)\n\t\t},\n\t\tuploadFiles: function (files) {\n\t\t\treturn uploadFiles(files, url)\n\t\t},\n\t}\n}"],"mappings":"AAAA,OAAO,eAAeA,UAAf,CAA0BC,IAA1B,EAAgCC,GAAhC,EAAqC;EAC3C;EACA,IAAIC,QAAQ,GAAG,IAAIC,QAAJ,EAAf;EACAD,QAAQ,CAACE,MAAT,CAAgB,MAAhB,EAAwBJ,IAAI,CAACA,IAA7B,EAH2C,CAK3C;;EACAA,IAAI,CAACK,MAAL,GAAc,SAAd;EACA,IAAIC,QAAQ,GAAG,MAAMC,KAAK,CAACN,GAAD,EAAM;IAAEO,MAAM,EAAE,MAAV;IAAkBC,IAAI,EAAEP;EAAxB,CAAN,CAA1B,CAP2C,CAS3C;;EACAF,IAAI,CAACK,MAAL,GAAcC,QAAQ,CAACI,EAAvB;EAEA,OAAOJ,QAAP;AACA;AAED,OAAO,SAASK,WAAT,CAAqBC,KAArB,EAA4BX,GAA5B,EAAiC;EACvC,OAAOY,OAAO,CAACC,GAAR,CAAYF,KAAK,CAACG,GAAN,CAAWf,IAAD,IAAUD,UAAU,CAACC,IAAD,EAAOC,GAAP,CAA9B,CAAZ,CAAP;AACA;AAED,eAAe,SAASe,cAAT,CAAwBf,GAAxB,EAA6B;EAC3C,OAAO;IACNF,UAAU,EAAE,UAAUC,IAAV,EAAgB;MAC3B,OAAOD,UAAU,CAACC,IAAD,EAAOC,GAAP,CAAjB;IACA,CAHK;IAINU,WAAW,EAAE,UAAUC,KAAV,EAAiB;MAC7B,OAAOD,WAAW,CAACC,KAAD,EAAQX,GAAR,CAAlB;IACA;EANK,CAAP;AAQA"},"metadata":{},"sourceType":"module"}