{"ast":null,"code":"import _regeneratorRuntime from \"/home/little/Documents/music_web/startproj/zhengdao-ui/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"/home/little/Documents/music_web/startproj/zhengdao-ui/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport axios from 'axios';\nexport default {\n  // async musicinfo(context, payload){\n  // const backapi = 'http://127.0.0.1:1943';\n  // const musicnumber = payload;\n  // try{\n  //     const errmes =await axios({\n  //         method: 'get',\n  //         url: backapi+'/music/'+musicnumber\n  //     }\n  //     ).then(function(response){\n  //         context.commit('setMusic',{\n  //             musicid : response.data[0].id,\n  //             cover_address : response.data[0].cover_address,\n  //             music_address : response.data[0].music_address,\n  //             musicname : response.data[0].name,\n  //             post_date : response.data[0].post_date,\n  //             user_id : response.data[0].user_id,\n  //         });\n  //     });\n  // }catch(err){\n  //     if (err.message == 'Request failed with status code 401'){\n  //         console.log('called if');\n  //         throw { message : \"Wrong password or username\" , number: 1000};\n  //     }\n  //     else {\n  //         throw err;\n  //     }\n  // }\n  // },\n  musicinfo: function musicinfo(context, payload) {\n    return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n      var backapi, musicnumber, errmes;\n      return _regeneratorRuntime().wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              console.log('commit');\n              backapi = 'http://127.0.0.1:1943';\n              musicnumber = payload;\n              _context.prev = 3;\n              _context.next = 6;\n              return axios({\n                method: 'get',\n                url: backapi + '/music/' + musicnumber\n              }).then(function (response) {\n                context.commit('setlistofmusicinfo', {\n                  listofmusicinfo: response.data\n                });\n              });\n\n            case 6:\n              errmes = _context.sent;\n              _context.next = 17;\n              break;\n\n            case 9:\n              _context.prev = 9;\n              _context.t0 = _context[\"catch\"](3);\n\n              if (!(_context.t0.message == 'Request failed with status code 401')) {\n                _context.next = 16;\n                break;\n              }\n\n              console.log('called if');\n              throw {\n                message: \"Wrong password or username\",\n                number: 1000\n              };\n\n            case 16:\n              throw _context.t0;\n\n            case 17:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[3, 9]]);\n    }))();\n  },\n  musiclistinfo: function musiclistinfo(context, payload) {\n    return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {\n      var backapi, searchtype, errmes;\n      return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              backapi = 'http://127.0.0.1:1943';\n              searchtype = 4;\n              _context2.prev = 2;\n              _context2.next = 5;\n              return axios({\n                method: 'get',\n                url: backapi + '/listmusics/' + searchtype\n              }).then(function (response) {\n                context.commit('setlistofMusic', {\n                  listofMusic: response.data\n                });\n              });\n\n            case 5:\n              errmes = _context2.sent;\n              _context2.next = 16;\n              break;\n\n            case 8:\n              _context2.prev = 8;\n              _context2.t0 = _context2[\"catch\"](2);\n\n              if (!(_context2.t0.message == 'Request failed with status code 401')) {\n                _context2.next = 15;\n                break;\n              }\n\n              console.log('called if');\n              throw {\n                message: \"Wrong password or username\",\n                number: 1000\n              };\n\n            case 15:\n              throw _context2.t0;\n\n            case 16:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2, null, [[2, 8]]);\n    }))();\n  }\n}; // }).then((response) => {\n//     context.commit('setUser',{\n//         token: response.data.access_token,\n//         userId: payload.username,\n//     });\n// 0\n// : \n// cover_address\n// : \n// \"/demopicture/example.png\"\n// id\n// : \n// 1\n// music_address\n// : \n// \"/DEMOMUSIC/crimanal.mp3\"\n// name\n// : \n// \"crimanal\"\n// post_date\n// : \n// \"2022-08-17T20:13:19\"\n// user_id\n// : \n// 1\n// [[Prototype]]\n// : \n// Object\n// length\n// : \n// 1\n// [[Prototype]]\n// : \n// Array(0)","map":{"version":3,"names":["axios","musicinfo","context","payload","console","log","backapi","musicnumber","method","url","then","response","commit","listofmusicinfo","data","errmes","message","number","musiclistinfo","searchtype","listofMusic"],"sources":["/home/little/Documents/music_web/startproj/zhengdao-ui/src/store/modules/music/actions.js"],"sourcesContent":["import axios from 'axios';\n\nexport default{\n    // async musicinfo(context, payload){\n    // const backapi = 'http://127.0.0.1:1943';\n    // const musicnumber = payload;\n    // try{\n    //     const errmes =await axios({\n    //         method: 'get',\n    //         url: backapi+'/music/'+musicnumber\n    //     }\n    //     ).then(function(response){\n    //         context.commit('setMusic',{\n    //             musicid : response.data[0].id,\n    //             cover_address : response.data[0].cover_address,\n    //             music_address : response.data[0].music_address,\n    //             musicname : response.data[0].name,\n    //             post_date : response.data[0].post_date,\n    //             user_id : response.data[0].user_id,\n    //         });\n    //     });\n    // }catch(err){\n    //     if (err.message == 'Request failed with status code 401'){\n    //         console.log('called if');\n    //         throw { message : \"Wrong password or username\" , number: 1000};\n    //     }\n    //     else {\n    //         throw err;\n    //     }\n    // }\n    // },\n    async musicinfo(context, payload){\n        console.log('commit');\n        const backapi = 'http://127.0.0.1:1943';\n        const musicnumber = payload;\n        try{\n            const errmes =await axios({\n                method: 'get',\n                url: backapi+'/music/'+musicnumber\n            }\n            ).then(function(response){\n                context.commit('setlistofmusicinfo',{\n                    listofmusicinfo : response.data,\n                    \n                });\n            });\n        }catch(err){\n            if (err.message == 'Request failed with status code 401'){\n                console.log('called if');\n                throw { message : \"Wrong password or username\" , number: 1000};\n            }\n            else {\n                throw err;\n            }\n        }\n    },\n    async musiclistinfo(context, payload){\n        const backapi = 'http://127.0.0.1:1943';\n        const searchtype = 4;\n        try{\n            const errmes =await axios({\n                method: 'get',\n                url: backapi+'/listmusics/'+searchtype\n            }\n            ).then(function(response){\n\n                context.commit('setlistofMusic',{\n                    listofMusic : response.data,\n                });\n\n            });\n        }catch(err){\n            if (err.message == 'Request failed with status code 401'){\n                console.log('called if');\n                throw { message : \"Wrong password or username\" , number: 1000};\n            }\n            else {\n                throw err;\n            }\n        }\n    },\n}\n         \n        // }).then((response) => {\n        //     context.commit('setUser',{\n        //         token: response.data.access_token,\n        //         userId: payload.username,\n        //     });\n        // 0\n        // : \n        // cover_address\n        // : \n        // \"/demopicture/example.png\"\n        // id\n        // : \n        // 1\n        // music_address\n        // : \n        // \"/DEMOMUSIC/crimanal.mp3\"\n        // name\n        // : \n        // \"crimanal\"\n        // post_date\n        // : \n        // \"2022-08-17T20:13:19\"\n        // user_id\n        // : \n        // 1\n        // [[Prototype]]\n        // : \n        // Object\n        // length\n        // : \n        // 1\n        // [[Prototype]]\n        // : \n        // Array(0)"],"mappings":";;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AAEA,eAAc;EACV;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACMC,SA7BI,qBA6BMC,OA7BN,EA6BeC,OA7Bf,EA6BuB;IAAA;MAAA;MAAA;QAAA;UAAA;YAAA;cAC7BC,OAAO,CAACC,GAAR,CAAY,QAAZ;cACMC,OAFuB,GAEb,uBAFa;cAGvBC,WAHuB,GAGTJ,OAHS;cAAA;cAAA;cAAA,OAKLH,KAAK,CAAC;gBACtBQ,MAAM,EAAE,KADc;gBAEtBC,GAAG,EAAEH,OAAO,GAAC,SAAR,GAAkBC;cAFD,CAAD,CAAL,CAIlBG,IAJkB,CAIb,UAASC,QAAT,EAAkB;gBACrBT,OAAO,CAACU,MAAR,CAAe,oBAAf,EAAoC;kBAChCC,eAAe,EAAGF,QAAQ,CAACG;gBADK,CAApC;cAIH,CATmB,CALK;;YAAA;cAKnBC,MALmB;cAAA;cAAA;;YAAA;cAAA;cAAA;;cAAA,MAgBrB,YAAIC,OAAJ,IAAe,qCAhBM;gBAAA;gBAAA;cAAA;;cAiBrBZ,OAAO,CAACC,GAAR,CAAY,WAAZ;cAjBqB,MAkBf;gBAAEW,OAAO,EAAG,4BAAZ;gBAA2CC,MAAM,EAAE;cAAnD,CAlBe;;YAAA;cAAA;;YAAA;YAAA;cAAA;UAAA;QAAA;MAAA;IAAA;EAwBhC,CArDS;EAsDJC,aAtDI,yBAsDUhB,OAtDV,EAsDmBC,OAtDnB,EAsD2B;IAAA;MAAA;MAAA;QAAA;UAAA;YAAA;cAC3BG,OAD2B,GACjB,uBADiB;cAE3Ba,UAF2B,GAEd,CAFc;cAAA;cAAA;cAAA,OAITnB,KAAK,CAAC;gBACtBQ,MAAM,EAAE,KADc;gBAEtBC,GAAG,EAAEH,OAAO,GAAC,cAAR,GAAuBa;cAFN,CAAD,CAAL,CAIlBT,IAJkB,CAIb,UAASC,QAAT,EAAkB;gBAErBT,OAAO,CAACU,MAAR,CAAe,gBAAf,EAAgC;kBAC5BQ,WAAW,EAAGT,QAAQ,CAACG;gBADK,CAAhC;cAIH,CAVmB,CAJS;;YAAA;cAIvBC,MAJuB;cAAA;cAAA;;YAAA;cAAA;cAAA;;cAAA,MAgBzB,aAAIC,OAAJ,IAAe,qCAhBU;gBAAA;gBAAA;cAAA;;cAiBzBZ,OAAO,CAACC,GAAR,CAAY,WAAZ;cAjByB,MAkBnB;gBAAEW,OAAO,EAAG,4BAAZ;gBAA2CC,MAAM,EAAE;cAAnD,CAlBmB;;YAAA;cAAA;;YAAA;YAAA;cAAA;UAAA;QAAA;MAAA;IAAA;EAwBpC;AA9ES,CAAd,C,CAiFQ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA"},"metadata":{},"sourceType":"module"}