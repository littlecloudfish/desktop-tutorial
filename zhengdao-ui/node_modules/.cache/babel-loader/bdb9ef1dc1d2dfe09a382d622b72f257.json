{"ast":null,"code":"import _regeneratorRuntime from \"/home/little/Documents/music_web/startproj/zhengdao-ui/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"/home/little/Documents/music_web/startproj/zhengdao-ui/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport axios from 'axios';\nexport default {\n  // async contactCoach(context, payload) {\n  //   const newRequest = {\n  //     userEmail: payload.email,\n  //     message: payload.message\n  //   };\n  //   const response = await fetch(\n  //     `https://vue-http-demo-85e9e.firebaseio.com/requests/${payload.coachId}.json`,\n  //     {\n  //       method: 'POST',\n  //       body: JSON.stringify(newRequest)\n  //     }\n  //   );\n  //   const responseData = await response.json();\n  //   if (!response.ok) {\n  //     const error = new Error(\n  //       responseData.message || 'Failed to send request.'\n  //     );\n  //     throw error;\n  //   }\n  //   newRequest.id = responseData.name;\n  //   newRequest.coachId = payload.coachId;\n  //   context.commit('addRequest', newRequest);\n  // },\n  fetchRequests: function fetchRequests(context) {\n    return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n      var accesstoken, apiUrl;\n      return _regeneratorRuntime().wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              accesstoken = context.rootGetters.token;\n              console.log(accesstoken);\n              apiUrl = 'http://127.0.0.1:1943';\n              axios.get(apiUrl + '/who_am_i', {\n                headers: {\n                  Accept: 'application/json',\n                  Authorization: \"Bearer \".concat(accesstoken)\n                }\n              }).then(function (res) {\n                console.log(res.data);\n              })[\"catch\"](function (error) {\n                console.error(error);\n              });\n\n            case 4:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }))();\n  } // async fetchRequests(context) {\n  //   const coachId = context.rootGetters.userId;\n  //   const token = context.rootGetters.token;\n  //   const response = await fetch(\n  //     `https://vue-http-demo-85e9e.firebaseio.com/requests/${coachId}.json?auth=` +\n  //       token\n  //   );\n  //   const responseData = await response.json();\n  //   if (!response.ok) {\n  //     const error = new Error(\n  //       responseData.message || 'Failed to fetch requests.'\n  //     );\n  //     throw error;\n  //   }\n  //   const requests = [];\n  //   for (const key in responseData) {\n  //     const request = {\n  //       id: key,\n  //       coachId: coachId,\n  //       userEmail: responseData[key].userEmail,\n  //       message: responseData[key].message\n  //     };\n  //     requests.push(request);\n  //   }\n  //   context.commit('setRequests', requests);\n  // }\n\n};","map":{"version":3,"names":["axios","fetchRequests","context","accesstoken","rootGetters","token","console","log","apiUrl","get","headers","Accept","Authorization","then","res","data","error"],"sources":["/home/little/Documents/music_web/startproj/zhengdao-ui/src/store/modules/request/actions.js"],"sourcesContent":["import axios from 'axios'\n\nexport default {\n    // async contactCoach(context, payload) {\n    //   const newRequest = {\n    //     userEmail: payload.email,\n    //     message: payload.message\n    //   };\n    //   const response = await fetch(\n    //     `https://vue-http-demo-85e9e.firebaseio.com/requests/${payload.coachId}.json`,\n    //     {\n    //       method: 'POST',\n    //       body: JSON.stringify(newRequest)\n    //     }\n    //   );\n  \n    //   const responseData = await response.json();\n  \n    //   if (!response.ok) {\n    //     const error = new Error(\n    //       responseData.message || 'Failed to send request.'\n    //     );\n    //     throw error;\n    //   }\n  \n    //   newRequest.id = responseData.name;\n    //   newRequest.coachId = payload.coachId;\n  \n    //   context.commit('addRequest', newRequest);\n    // },\n    async fetchRequests(context) {\n        const accesstoken = context.rootGetters.token;\n        console.log(accesstoken);\n        const apiUrl = 'http://127.0.0.1:1943';\n        axios.get(apiUrl+'/who_am_i', {\n          headers: {\n              Accept: 'application/json',\n              Authorization: `Bearer ${accesstoken}`\n              }\n        })\n        .then((res) => {\n          console.log(res.data)\n        })\n        .catch((error) => {\n          console.error(error)\n        })\n        ;\n\n    },\n\n    // async fetchRequests(context) {\n    //   const coachId = context.rootGetters.userId;\n    //   const token = context.rootGetters.token;\n    //   const response = await fetch(\n    //     `https://vue-http-demo-85e9e.firebaseio.com/requests/${coachId}.json?auth=` +\n    //       token\n    //   );\n    //   const responseData = await response.json();\n  \n    //   if (!response.ok) {\n    //     const error = new Error(\n    //       responseData.message || 'Failed to fetch requests.'\n    //     );\n    //     throw error;\n    //   }\n  \n    //   const requests = [];\n  \n    //   for (const key in responseData) {\n    //     const request = {\n    //       id: key,\n    //       coachId: coachId,\n    //       userEmail: responseData[key].userEmail,\n    //       message: responseData[key].message\n    //     };\n    //     requests.push(request);\n    //   }\n      \n    //   context.commit('setRequests', requests);\n    // }\n  };"],"mappings":";;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AAEA,eAAe;EACX;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EAEA;EAEA;EACA;EACA;EACA;EACA;EACA;EAEA;EACA;EAEA;EACA;EACMC,aA5BK,yBA4BSC,OA5BT,EA4BkB;IAAA;MAAA;MAAA;QAAA;UAAA;YAAA;cACnBC,WADmB,GACLD,OAAO,CAACE,WAAR,CAAoBC,KADf;cAEzBC,OAAO,CAACC,GAAR,CAAYJ,WAAZ;cACMK,MAHmB,GAGV,uBAHU;cAIzBR,KAAK,CAACS,GAAN,CAAUD,MAAM,GAAC,WAAjB,EAA8B;gBAC5BE,OAAO,EAAE;kBACLC,MAAM,EAAE,kBADH;kBAELC,aAAa,mBAAYT,WAAZ;gBAFR;cADmB,CAA9B,EAMCU,IAND,CAMM,UAACC,GAAD,EAAS;gBACbR,OAAO,CAACC,GAAR,CAAYO,GAAG,CAACC,IAAhB;cACD,CARD,WASO,UAACC,KAAD,EAAW;gBAChBV,OAAO,CAACU,KAAR,CAAcA,KAAd;cACD,CAXD;;YAJyB;YAAA;cAAA;UAAA;QAAA;MAAA;IAAA;EAkB5B,CA9CU,CAgDX;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EAEA;EACA;EACA;EACA;EACA;EACA;EAEA;EAEA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EAEA;EACA;;AA7EW,CAAf"},"metadata":{},"sourceType":"module"}