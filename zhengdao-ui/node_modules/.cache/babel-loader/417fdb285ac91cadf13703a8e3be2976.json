{"ast":null,"code":"import _objectSpread from \"/home/little/Documents/music_web/backandfrontsep/zhengdao-ui/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport \"core-js/modules/es.string.fixed.js\";\nimport \"core-js/modules/es.array.map.js\";\nimport { computed, unref } from 'vue';\nimport '../../../../utils/index.mjs';\nimport { sum, enforceUnit } from '../utils.mjs';\nimport { isNumber } from '@vueuse/core';\nimport { addUnit } from '../../../../utils/dom/style.mjs';\n\nvar useStyles = function useStyles(props, _ref) {\n  var columnsTotalWidth = _ref.columnsTotalWidth,\n      data = _ref.data,\n      fixedColumnsOnLeft = _ref.fixedColumnsOnLeft,\n      fixedColumnsOnRight = _ref.fixedColumnsOnRight;\n  var bodyWidth = computed(function () {\n    var fixed = props.fixed,\n        width = props.width,\n        vScrollbarSize = props.vScrollbarSize;\n    var ret = width - vScrollbarSize;\n    return fixed ? Math.max(Math.round(unref(columnsTotalWidth)), ret) : ret;\n  });\n  var headerWidth = computed(function () {\n    return unref(bodyWidth) + (props.fixed ? props.vScrollbarSize : 0);\n  });\n  var mainTableHeight = computed(function () {\n    var _props$height = props.height,\n        height = _props$height === void 0 ? 0 : _props$height,\n        _props$maxHeight = props.maxHeight,\n        maxHeight = _props$maxHeight === void 0 ? 0 : _props$maxHeight,\n        footerHeight2 = props.footerHeight,\n        hScrollbarSize = props.hScrollbarSize;\n\n    if (maxHeight > 0) {\n      var _fixedRowsHeight = unref(fixedRowsHeight);\n\n      var _rowsHeight = unref(rowsHeight);\n\n      var _headerHeight = unref(headerHeight);\n\n      var total = _headerHeight + _fixedRowsHeight + _rowsHeight + hScrollbarSize;\n      return Math.min(total, maxHeight - footerHeight2);\n    }\n\n    return height - footerHeight2;\n  });\n  var rowsHeight = computed(function () {\n    var rowHeight = props.rowHeight,\n        estimatedRowHeight = props.estimatedRowHeight;\n\n    var _data = unref(data);\n\n    if (isNumber(estimatedRowHeight)) {\n      return _data.length * estimatedRowHeight;\n    }\n\n    return _data.length * rowHeight;\n  });\n  var fixedTableHeight = computed(function () {\n    var maxHeight = props.maxHeight;\n    var tableHeight = unref(mainTableHeight);\n    if (isNumber(maxHeight) && maxHeight > 0) return tableHeight;\n    var totalHeight = unref(rowsHeight) + unref(headerHeight) + unref(fixedRowsHeight);\n    return Math.min(tableHeight, totalHeight);\n  });\n\n  var mapColumn = function mapColumn(column) {\n    return column.width;\n  };\n\n  var leftTableWidth = computed(function () {\n    return sum(unref(fixedColumnsOnLeft).map(mapColumn));\n  });\n  var rightTableWidth = computed(function () {\n    return sum(unref(fixedColumnsOnRight).map(mapColumn));\n  });\n  var headerHeight = computed(function () {\n    return sum(props.headerHeight);\n  });\n  var fixedRowsHeight = computed(function () {\n    var _a;\n\n    return (((_a = props.fixedData) == null ? void 0 : _a.length) || 0) * props.rowHeight;\n  });\n  var windowHeight = computed(function () {\n    return unref(mainTableHeight) - unref(headerHeight) - unref(fixedRowsHeight);\n  });\n  var rootStyle = computed(function () {\n    var _props$style = props.style,\n        style = _props$style === void 0 ? {} : _props$style,\n        height = props.height,\n        width = props.width;\n    return enforceUnit(_objectSpread(_objectSpread({}, style), {}, {\n      height: height,\n      width: width\n    }));\n  });\n  var footerHeight = computed(function () {\n    return enforceUnit({\n      height: props.footerHeight\n    });\n  });\n  var emptyStyle = computed(function () {\n    return {\n      top: addUnit(unref(headerHeight)),\n      bottom: addUnit(props.footerHeight),\n      width: addUnit(props.width)\n    };\n  });\n  return {\n    bodyWidth: bodyWidth,\n    fixedTableHeight: fixedTableHeight,\n    mainTableHeight: mainTableHeight,\n    leftTableWidth: leftTableWidth,\n    rightTableWidth: rightTableWidth,\n    headerWidth: headerWidth,\n    rowsHeight: rowsHeight,\n    windowHeight: windowHeight,\n    footerHeight: footerHeight,\n    emptyStyle: emptyStyle,\n    rootStyle: rootStyle\n  };\n};\n\nexport { useStyles };","map":{"version":3,"mappings":"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","names":["useStyles","props","columnsTotalWidth","data","fixedColumnsOnLeft","fixedColumnsOnRight","bodyWidth","computed","fixed","width","vScrollbarSize","ret","Math","max","round","unref","headerWidth","mainTableHeight","height","maxHeight","footerHeight2","footerHeight","hScrollbarSize","_fixedRowsHeight","fixedRowsHeight","_rowsHeight","rowsHeight","_headerHeight","headerHeight","total","min","rowHeight","estimatedRowHeight","_data","isNumber","length","fixedTableHeight","tableHeight","totalHeight","mapColumn","column","leftTableWidth","sum","map","rightTableWidth","_a","fixedData","windowHeight","rootStyle","style","enforceUnit","emptyStyle","top","addUnit","bottom"],"sources":["../../../../../../../packages/components/table-v2/src/composables/use-styles.ts"],"sourcesContent":["import { computed, unref } from 'vue'\nimport { addUnit, isNumber } from '@element-plus/utils'\nimport { enforceUnit, sum } from '../utils'\n\nimport type { CSSProperties } from 'vue'\nimport type { TableV2Props } from '../table'\nimport type { UseColumnsReturn } from './use-columns'\nimport type { UseDataReturn } from './use-data'\n\ntype UseStyleProps = {\n  columnsTotalWidth: UseColumnsReturn['columnsTotalWidth']\n  data: UseDataReturn['data']\n  fixedColumnsOnLeft: UseColumnsReturn['fixedColumnsOnLeft']\n  fixedColumnsOnRight: UseColumnsReturn['fixedColumnsOnRight']\n}\n\nexport const useStyles = (\n  props: TableV2Props,\n  {\n    columnsTotalWidth,\n    data,\n    fixedColumnsOnLeft,\n    fixedColumnsOnRight,\n  }: UseStyleProps\n) => {\n  const bodyWidth = computed(() => {\n    const { fixed, width, vScrollbarSize } = props\n    const ret = width - vScrollbarSize\n    return fixed ? Math.max(Math.round(unref(columnsTotalWidth)), ret) : ret\n  })\n\n  const headerWidth = computed(\n    () => unref(bodyWidth) + (props.fixed ? props.vScrollbarSize : 0)\n  )\n\n  const mainTableHeight = computed(() => {\n    const { height = 0, maxHeight = 0, footerHeight, hScrollbarSize } = props\n\n    if (maxHeight > 0) {\n      const _fixedRowsHeight = unref(fixedRowsHeight)\n      const _rowsHeight = unref(rowsHeight)\n      const _headerHeight = unref(headerHeight)\n      const total =\n        _headerHeight + _fixedRowsHeight + _rowsHeight + hScrollbarSize\n\n      return Math.min(total, maxHeight - footerHeight)\n    }\n\n    return height - footerHeight\n  })\n\n  const rowsHeight = computed(() => {\n    const { rowHeight, estimatedRowHeight } = props\n    const _data = unref(data)\n    if (isNumber(estimatedRowHeight)) {\n      return _data.length * estimatedRowHeight\n    }\n\n    return _data.length * rowHeight\n  })\n\n  const fixedTableHeight = computed(() => {\n    const { maxHeight } = props\n    const tableHeight = unref(mainTableHeight)\n    if (isNumber(maxHeight) && maxHeight > 0) return tableHeight\n\n    const totalHeight =\n      unref(rowsHeight) + unref(headerHeight) + unref(fixedRowsHeight)\n\n    return Math.min(tableHeight, totalHeight)\n  })\n\n  const mapColumn = (column: TableV2Props['columns'][number]) => column.width\n\n  const leftTableWidth = computed(() =>\n    sum(unref(fixedColumnsOnLeft).map(mapColumn))\n  )\n\n  const rightTableWidth = computed(() =>\n    sum(unref(fixedColumnsOnRight).map(mapColumn))\n  )\n\n  const headerHeight = computed(() => sum(props.headerHeight))\n\n  const fixedRowsHeight = computed(() => {\n    return (props.fixedData?.length || 0) * props.rowHeight\n  })\n\n  const windowHeight = computed(() => {\n    return unref(mainTableHeight) - unref(headerHeight) - unref(fixedRowsHeight)\n  })\n\n  const rootStyle = computed<CSSProperties>(() => {\n    const { style = {}, height, width } = props\n    return enforceUnit({\n      ...style,\n      height,\n      width,\n    })\n  })\n\n  const footerHeight = computed(() =>\n    enforceUnit({ height: props.footerHeight })\n  )\n\n  const emptyStyle = computed<CSSProperties>(() => ({\n    top: addUnit(unref(headerHeight)),\n    bottom: addUnit(props.footerHeight),\n    width: addUnit(props.width),\n  }))\n\n  return {\n    bodyWidth,\n    fixedTableHeight,\n    mainTableHeight,\n    leftTableWidth,\n    rightTableWidth,\n    headerWidth,\n    rowsHeight,\n    windowHeight,\n    footerHeight,\n    emptyStyle,\n    rootStyle,\n  }\n}\n\nexport type UseStyleReturn = ReturnType<typeof useStyles>\n"]},"metadata":{},"sourceType":"module"}