{"ast":null,"code":"import axios from 'axios';\nexport default {\n  async login(context, payload) {\n    const url = 'http://127.0.0.1:1943/login';\n    const data = {\n      username: payload.username,\n      password: payload.password\n    };\n\n    try {\n      const errmes = await axios({\n        method: 'post',\n        url: url,\n        data: data,\n        headers: {\n          Accept: \"application/json\",\n          \"Content-Type\": \"application/json;charset=UTF-8\"\n        }\n      }).then(response => {\n        context.commit('setUser', {\n          token: response.data.access_token,\n          userId: payload.username\n        });\n      });\n    } catch (err) {\n      if (err.message == 'Request failed with status code 401') {\n        throw {\n          message: \"Wrong password or username\",\n          number: 1000\n        };\n      } else {\n        throw err;\n      }\n    }\n  },\n\n  async signup(context, payload) {\n    const url = 'http://127.0.0.1:1943/register';\n    const data = {\n      username: payload.username,\n      password: payload.password\n    };\n    axios({\n      method: 'post',\n      url: url,\n      data: data,\n      headers: {\n        Accept: \"application/json\",\n        \"Content-Type\": \"application/json;charset=UTF-8\"\n      }\n    }).then(response => {\n      console.log(response);\n    }, error => {\n      console.log(error);\n    });\n  }\n\n};","map":{"version":3,"names":["axios","login","context","payload","url","data","username","password","errmes","method","headers","Accept","then","response","commit","token","access_token","userId","err","message","number","signup","console","log","error"],"sources":["/home/little/Documents/music_web/startproj/zhengdao-ui/src/store/modules/auth/actions.js"],"sourcesContent":["import axios from 'axios'\nexport default {\n    async login(context, payload){\n        \n        const url = 'http://127.0.0.1:1943/login'\n        const data ={\n            username: payload.username,\n            password: payload.password,\n        }\n\n\n        try{\n            const errmes = await axios({\n                method: 'post',\n                url: url,\n                data:data,\n                headers: {\n                    Accept: \"application/json\",\n                    \"Content-Type\": \"application/json;charset=UTF-8\",\n                  },\n             \n            }).then((response) => {\n                context.commit('setUser',{\n                    token: response.data.access_token,\n                    userId: payload.username,\n                });\n            })\n        }catch(err){\n            if (err.message == 'Request failed with status code 401'){\n                throw { message : \"Wrong password or username\" , number: 1000};\n            }\n            else {\n                throw err;\n            }\n        }\n\n       \n\n    },\n\n    async signup(context, payload){\n        const url = 'http://127.0.0.1:1943/register'\n        const data ={\n            username: payload.username,\n            password: payload.password,\n        }\n        axios({\n            method: 'post',\n            url: url,\n            data:data,\n            headers: {\n                Accept: \"application/json\",\n                \"Content-Type\": \"application/json;charset=UTF-8\",\n              },\n         \n        }).then((response) => {\n            console.log(response);\n        }, (error) => {\n            console.log(error);\n        });\n   \n    },\n\n};\n"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,eAAe;EACX,MAAMC,KAAN,CAAYC,OAAZ,EAAqBC,OAArB,EAA6B;IAEzB,MAAMC,GAAG,GAAG,6BAAZ;IACA,MAAMC,IAAI,GAAE;MACRC,QAAQ,EAAEH,OAAO,CAACG,QADV;MAERC,QAAQ,EAAEJ,OAAO,CAACI;IAFV,CAAZ;;IAMA,IAAG;MACC,MAAMC,MAAM,GAAG,MAAMR,KAAK,CAAC;QACvBS,MAAM,EAAE,MADe;QAEvBL,GAAG,EAAEA,GAFkB;QAGvBC,IAAI,EAACA,IAHkB;QAIvBK,OAAO,EAAE;UACLC,MAAM,EAAE,kBADH;UAEL,gBAAgB;QAFX;MAJc,CAAD,CAAL,CASlBC,IATkB,CASZC,QAAD,IAAc;QAClBX,OAAO,CAACY,MAAR,CAAe,SAAf,EAAyB;UACrBC,KAAK,EAAEF,QAAQ,CAACR,IAAT,CAAcW,YADA;UAErBC,MAAM,EAAEd,OAAO,CAACG;QAFK,CAAzB;MAIH,CAdoB,CAArB;IAeH,CAhBD,CAgBC,OAAMY,GAAN,EAAU;MACP,IAAIA,GAAG,CAACC,OAAJ,IAAe,qCAAnB,EAAyD;QACrD,MAAM;UAAEA,OAAO,EAAG,4BAAZ;UAA2CC,MAAM,EAAE;QAAnD,CAAN;MACH,CAFD,MAGK;QACD,MAAMF,GAAN;MACH;IACJ;EAIJ,CArCU;;EAuCX,MAAMG,MAAN,CAAanB,OAAb,EAAsBC,OAAtB,EAA8B;IAC1B,MAAMC,GAAG,GAAG,gCAAZ;IACA,MAAMC,IAAI,GAAE;MACRC,QAAQ,EAAEH,OAAO,CAACG,QADV;MAERC,QAAQ,EAAEJ,OAAO,CAACI;IAFV,CAAZ;IAIAP,KAAK,CAAC;MACFS,MAAM,EAAE,MADN;MAEFL,GAAG,EAAEA,GAFH;MAGFC,IAAI,EAACA,IAHH;MAIFK,OAAO,EAAE;QACLC,MAAM,EAAE,kBADH;QAEL,gBAAgB;MAFX;IAJP,CAAD,CAAL,CASGC,IATH,CASSC,QAAD,IAAc;MAClBS,OAAO,CAACC,GAAR,CAAYV,QAAZ;IACH,CAXD,EAWIW,KAAD,IAAW;MACVF,OAAO,CAACC,GAAR,CAAYC,KAAZ;IACH,CAbD;EAeH;;AA5DU,CAAf"},"metadata":{},"sourceType":"module"}