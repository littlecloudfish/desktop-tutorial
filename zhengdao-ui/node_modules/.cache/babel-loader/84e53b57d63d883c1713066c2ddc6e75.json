{"ast":null,"code":"import \"core-js/modules/es.number.constructor.js\";\nimport \"core-js/modules/es.array-buffer.slice.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.typed-array.uint8-array.js\";\nimport \"core-js/modules/es.typed-array.at.js\";\nimport \"core-js/modules/es.typed-array.copy-within.js\";\nimport \"core-js/modules/es.typed-array.every.js\";\nimport \"core-js/modules/es.typed-array.fill.js\";\nimport \"core-js/modules/es.typed-array.filter.js\";\nimport \"core-js/modules/es.typed-array.find.js\";\nimport \"core-js/modules/es.typed-array.find-index.js\";\nimport \"core-js/modules/es.typed-array.for-each.js\";\nimport \"core-js/modules/es.typed-array.includes.js\";\nimport \"core-js/modules/es.typed-array.index-of.js\";\nimport \"core-js/modules/es.typed-array.iterator.js\";\nimport \"core-js/modules/es.typed-array.join.js\";\nimport \"core-js/modules/es.typed-array.last-index-of.js\";\nimport \"core-js/modules/es.typed-array.map.js\";\nimport \"core-js/modules/es.typed-array.reduce.js\";\nimport \"core-js/modules/es.typed-array.reduce-right.js\";\nimport \"core-js/modules/es.typed-array.reverse.js\";\nimport \"core-js/modules/es.typed-array.set.js\";\nimport \"core-js/modules/es.typed-array.slice.js\";\nimport \"core-js/modules/es.typed-array.some.js\";\nimport \"core-js/modules/es.typed-array.sort.js\";\nimport \"core-js/modules/es.typed-array.subarray.js\";\nimport \"core-js/modules/es.typed-array.to-locale-string.js\";\nimport \"core-js/modules/es.typed-array.to-string.js\";\nimport \"core-js/modules/esnext.typed-array.find-last.js\";\nimport \"core-js/modules/esnext.typed-array.find-last-index.js\";\nimport \"core-js/modules/es.array.for-each.js\";\nimport \"core-js/modules/web.dom-collections.for-each.js\";\nimport \"core-js/modules/es.array.reduce.js\";\nimport \"core-js/modules/es.array.slice.js\";\nimport * as vue from 'vue';\n/**\n * Component props\n */\n\nvar props = {\n  /**\n   * prop: 'media'\n   * MediaStream object for visualisation. Can be delivered by\n   * Web Audio API functions like getUserMedia or RTCPeerConnection\n   */\n  media: {\n    type: MediaStream,\n    required: false,\n    \"default\": null\n  },\n\n  /**\n   * prop: 'canv-width'\n   * Canvas element width. Default 300\n   */\n  canvWidth: {\n    type: Number,\n    \"default\": 300\n  },\n\n  /**\n   * prop: 'canv-class'\n   * Canvas element css class name.\n   */\n  canvClass: {\n    type: String,\n    \"default\": null\n  },\n\n  /**\n   * prop: 'canv-height'\n   * Canvas element height. Default 80\n   */\n  canvHeight: {\n    type: Number,\n    \"default\": 80\n  },\n\n  /**\n   * prop: 'canv-fill-color'\n   * Canvas fill background RGB color.\n   * Default is transperent.\n   */\n  canvFillColor: {\n    type: String,\n    \"default\": null\n  },\n\n  /**\n   * prop: 'fft-size'\n   * Represents the window size in samples that is used when performing\n   * a Fast Fourier Transform (FFT) to get frequency domain data.\n   * Must be power of 2 between 2^5 and 2^15\n   * Default: 8192 for 'wform' 1024 for 'freq'\n   */\n  fftSize: {\n    type: Number,\n    \"default\": null // 1024 // 8192\n\n  },\n\n  /**\n   * prop: 'type'\n   * Type of visualisation.\n   * wform - using byte time domaine data\n   * frequ - using byte frequency data\n   * wform when not recognized.\n   * Default: wform\n   */\n  type: {\n    type: String,\n    \"default\": 'wform'\n  },\n\n  /**\n   * prop: 'frequ-lnum'\n   * Vertical lines number for frequ type.\n   * Default: 60\n   */\n  frequLnum: {\n    type: Number,\n    \"default\": 60\n  },\n\n  /**\n   * prop: 'frequ-line-cap'\n   * Draw line with rounded end caps.\n   * Default: false\n   */\n  frequLineCap: {\n    type: Boolean,\n    \"default\": false\n  },\n\n  /**\n   * prop: 'frequ-direction'\n   * Direction for frequency visualization.\n   * lr - from left to right\n   * mo - from middle out\n   * lr when not recognized.\n   * Default: wform\n   */\n  frequDirection: {\n    type: String,\n    \"default\": 'lr'\n  },\n\n  /**\n   * prop: 'line-color'\n   * Line color.\n   * Default: lime\n   */\n  lineColor: {\n    type: String,\n    \"default\": 'lime'\n  },\n\n  /**\n   * prop: 'line-width'\n   * Line width.\n   * Default: 0.5 for wform and 3 for frequ\n   */\n  lineWidth: {\n    type: Number,\n    \"default\": null\n  },\n\n  /**\n   * prop: 'radius'\n   * Circle radius.\n   * Default: 4 for circle\n   */\n  radius: {\n    type: Number,\n    \"default\": 4\n  },\n\n  /**\n   * prop: 'connect-destination'\n   * Analyser to connect to audio context's destination\n   * Default: false\n   */\n  connectDestination: {\n    type: Boolean,\n    \"default\": false\n  }\n}; // A fix for webpack warnings across vue2 & vue3\n\nvar h = vue['h'[0]];\n/**\n * Component AvMedia\n */\n\nvar AvMedia = {\n  name: 'av-media',\n  data: function data() {\n    return {\n      ctx: null,\n      audioCtx: null,\n      analyser: null\n    };\n  },\n  props: props,\n  render: function render(hv2) {\n    if (h) {\n      // Vue3 render\n      return h('div');\n    } // Vue2 render\n\n\n    return hv2('div');\n  },\n  mounted: function mounted() {\n    this.createCanvas();\n  },\n  watch: {\n    media: function media(newVal, oldVal) {\n      try {\n        if (newVal) this.setAnalyser();\n        this.draw();\n      } catch (err) {\n        console.log('Failed create analyser', err);\n      }\n    }\n  },\n  methods: {\n    /**\n     * Create Canvas inside div\n     */\n    createCanvas: function createCanvas() {\n      var canv = document.createElement('canvas');\n      canv.width = this.canvWidth;\n      canv.height = this.canvHeight;\n      if (this.canvClass) canv.setAttribute('class', this.canvClass);\n      this.ctx = canv.getContext('2d');\n      this.$el.appendChild(canv);\n    },\n\n    /**\n     * Set analyser\n     */\n    setAnalyser: function setAnalyser() {\n      this.audioCtx = this.audioCtx || new AudioContext();\n      this.analyser = this.analyser || this.audioCtx.createAnalyser();\n      var src = this.audioCtx.createMediaStreamSource(this.media);\n      src.connect(this.analyser);\n\n      if (this.fftSize) {\n        this.analyser.fftSize = this.fftSize;\n      } else {\n        this.analyser.fftSize = this.type === 'frequ' ? 1024 : 8192;\n      }\n\n      if (this.connectDestination) {\n        this.analyser.connect(this.audioCtx.destination);\n      }\n    },\n    draw: function draw() {\n      var data = new Uint8Array(this.analyser.fftSize);\n      if (this.canvFillColor) this.ctx.fillStyle = this.canvFillColor;\n      this.ctx.clearRect(0, 0, this.canvWidth, this.canvHeight);\n      this.ctx.beginPath();\n      this.ctx.strokeStyle = this.lineColor;\n\n      if (this.type === 'frequ') {\n        this.analyser.getByteFrequencyData(data);\n        this.frequ(data);\n      } else if (this.type === 'circle') {\n        this.analyser.getByteFrequencyData(data);\n        this.circle(data);\n      } else {\n        this.analyser.getByteTimeDomainData(data);\n        this.wform(data);\n      }\n\n      requestAnimationFrame(this.draw);\n    },\n    wform: function wform(data) {\n      var _this = this;\n\n      var h = this.canvHeight;\n      var step = this.canvWidth / this.analyser.fftSize;\n      var x = 0;\n      this.ctx.lineWidth = this.lineWidth || 0.5;\n      data.forEach(function (v) {\n        var y = v / 255.0 * h;\n\n        _this.ctx.lineTo(x, y);\n\n        x += step;\n      });\n      this.ctx.stroke();\n    },\n    frequ: function frequ(data) {\n      var middleOut = this.frequDirection === 'mo';\n      var start = middleOut ? this.canvWidth / 2 : 0;\n      var c = middleOut ? this.frequLnum / 2 : this.frequLnum;\n      var step = middleOut ? this.canvWidth / c / 2 : this.canvWidth / c;\n      var h = this.canvHeight;\n      var lw = this.lineWidth || 2;\n\n      for (var i = 0; i < c; i++) {\n        var x = middleOut ? i * step : i * step + lw;\n        var v = data.slice(x, x + step).reduce(function (sum, v) {\n          return sum + v / 255.0 * h;\n        }, 0) / step;\n        var space = (h - v) / 2 + 2; // + 2 is space for caps\n\n        this.ctx.lineWidth = lw;\n        this.ctx.lineCap = this.frequLineCap ? 'round' : 'butt';\n        this.ctx.moveTo(start + x, space);\n        this.ctx.lineTo(start + x, h - space);\n        this.ctx.stroke();\n\n        if (middleOut && i > 0) {\n          this.ctx.moveTo(start - x, space);\n          this.ctx.lineTo(start - x, h - space);\n          this.ctx.stroke();\n        }\n      }\n    },\n    circle: function circle(data) {\n      var _this2 = this;\n\n      var cx = this.canvWidth / 2; // center X\n\n      var cy = this.canvHeight / 2; // center Y\n\n      var r = this.radius || 4;\n      var lineWidth = this.lineWidth;\n      var lineSpace = 10;\n      var arcStep = Math.ceil(lineWidth + lineSpace);\n      var step = (lineWidth + lineSpace) / data.length * (2 * Math.PI);\n      var barLen = this.canvWidth / 1.2 - r;\n      var angle = Math.PI;\n      this.ctx.lineWidth = this.lineWidth || 0.5;\n      data.forEach(function (_, index) {\n        angle += step;\n\n        if (index % arcStep) {\n          return;\n        }\n\n        var bits = Math.round(data.slice(index, index + arcStep).reduce(function (v, t) {\n          return t + v;\n        }, 0) / arcStep);\n        var blen = r + bits / 255.0 * barLen;\n\n        _this2.ctx.beginPath();\n\n        _this2.ctx.lineCap = 'round';\n\n        _this2.ctx.moveTo(r * Math.cos(angle) + cx, r * Math.sin(angle) + cy);\n\n        _this2.ctx.lineTo(blen * Math.cos(angle) + cx, blen * Math.sin(angle) + cy);\n\n        _this2.ctx.stroke();\n      });\n    }\n  }\n};\nexport default AvMedia;","map":{"version":3,"names":["vue","props","media","type","MediaStream","required","canvWidth","Number","canvClass","String","canvHeight","canvFillColor","fftSize","frequLnum","frequLineCap","Boolean","frequDirection","lineColor","lineWidth","radius","connectDestination","h","AvMedia","name","data","ctx","audioCtx","analyser","render","hv2","mounted","createCanvas","watch","newVal","oldVal","setAnalyser","draw","err","console","log","methods","canv","document","createElement","width","height","setAttribute","getContext","$el","appendChild","AudioContext","createAnalyser","src","createMediaStreamSource","connect","destination","Uint8Array","fillStyle","clearRect","beginPath","strokeStyle","getByteFrequencyData","frequ","circle","getByteTimeDomainData","wform","requestAnimationFrame","step","x","forEach","v","y","lineTo","stroke","middleOut","start","c","lw","i","slice","reduce","sum","space","lineCap","moveTo","cx","cy","r","lineSpace","arcStep","Math","ceil","length","PI","barLen","angle","_","index","bits","round","t","blen","cos","sin"],"sources":["/home/little/Documents/music_web/backandfrontsep/zhengdao-ui/node_modules/vue-audio-visual/src/components/AvMedia.js"],"sourcesContent":["import * as vue from 'vue'\n/**\n * Component props\n */\nconst props = {\n  /**\n   * prop: 'media'\n   * MediaStream object for visualisation. Can be delivered by\n   * Web Audio API functions like getUserMedia or RTCPeerConnection\n   */\n  media: {\n    type: MediaStream,\n    required: false,\n    default: null\n  },\n\n  /**\n   * prop: 'canv-width'\n   * Canvas element width. Default 300\n   */\n  canvWidth: {\n    type: Number,\n    default: 300\n  },\n\n  /**\n   * prop: 'canv-class'\n   * Canvas element css class name.\n   */\n  canvClass: {\n    type: String,\n    default: null\n  },\n\n  /**\n   * prop: 'canv-height'\n   * Canvas element height. Default 80\n   */\n  canvHeight: {\n    type: Number,\n    default: 80\n  },\n\n  /**\n   * prop: 'canv-fill-color'\n   * Canvas fill background RGB color.\n   * Default is transperent.\n   */\n  canvFillColor: {\n    type: String,\n    default: null\n  },\n\n  /**\n   * prop: 'fft-size'\n   * Represents the window size in samples that is used when performing\n   * a Fast Fourier Transform (FFT) to get frequency domain data.\n   * Must be power of 2 between 2^5 and 2^15\n   * Default: 8192 for 'wform' 1024 for 'freq'\n   */\n  fftSize: {\n    type: Number,\n    default: null // 1024 // 8192\n  },\n\n  /**\n   * prop: 'type'\n   * Type of visualisation.\n   * wform - using byte time domaine data\n   * frequ - using byte frequency data\n   * wform when not recognized.\n   * Default: wform\n   */\n  type: {\n    type: String,\n    default: 'wform'\n  },\n\n  /**\n   * prop: 'frequ-lnum'\n   * Vertical lines number for frequ type.\n   * Default: 60\n   */\n  frequLnum: {\n    type: Number,\n    default: 60\n  },\n\n  /**\n   * prop: 'frequ-line-cap'\n   * Draw line with rounded end caps.\n   * Default: false\n   */\n  frequLineCap: {\n    type: Boolean,\n    default: false\n  },\n\n  /**\n   * prop: 'frequ-direction'\n   * Direction for frequency visualization.\n   * lr - from left to right\n   * mo - from middle out\n   * lr when not recognized.\n   * Default: wform\n   */\n  frequDirection: {\n    type: String,\n    default: 'lr'\n  },\n\n  /**\n   * prop: 'line-color'\n   * Line color.\n   * Default: lime\n   */\n  lineColor: {\n    type: String,\n    default: 'lime'\n  },\n\n  /**\n   * prop: 'line-width'\n   * Line width.\n   * Default: 0.5 for wform and 3 for frequ\n   */\n  lineWidth: {\n    type: Number,\n    default: null\n  },\n\n  /**\n   * prop: 'radius'\n   * Circle radius.\n   * Default: 4 for circle\n   */\n  radius: {\n    type: Number,\n    default: 4\n  },\n\n  /**\n   * prop: 'connect-destination'\n   * Analyser to connect to audio context's destination\n   * Default: false\n   */\n  connectDestination: {\n    type: Boolean,\n    default: false\n  }\n}\n\n// A fix for webpack warnings across vue2 & vue3\nconst h = vue['h'[0]]\n\n/**\n * Component AvMedia\n */\nconst AvMedia = {\n  name: 'av-media',\n  data () {\n    return {\n      ctx: null,\n      audioCtx: null,\n      analyser: null\n    }\n  },\n  props,\n  render (hv2) {\n    if (h) {\n      // Vue3 render\n      return h('div')\n    }\n    // Vue2 render\n    return hv2('div')\n  },\n  mounted () {\n    this.createCanvas()\n  },\n  watch: {\n    media: function (newVal, oldVal) {\n      try {\n        if (newVal) this.setAnalyser()\n        this.draw()\n      } catch (err) {\n        console.log('Failed create analyser', err)\n      }\n    }\n  },\n  methods: {\n    /**\n     * Create Canvas inside div\n     */\n    createCanvas: function () {\n      const canv = document.createElement('canvas')\n      canv.width = this.canvWidth\n      canv.height = this.canvHeight\n      if (this.canvClass) canv.setAttribute('class', this.canvClass)\n      this.ctx = canv.getContext('2d')\n      this.$el.appendChild(canv)\n    },\n\n    /**\n     * Set analyser\n     */\n    setAnalyser: function () {\n      this.audioCtx = this.audioCtx || new AudioContext()\n      this.analyser = this.analyser || this.audioCtx.createAnalyser()\n      const src = this.audioCtx.createMediaStreamSource(this.media)\n\n      src.connect(this.analyser)\n      if (this.fftSize) {\n        this.analyser.fftSize = this.fftSize\n      } else {\n        this.analyser.fftSize = this.type === 'frequ' ? 1024 : 8192\n      }\n      if (this.connectDestination) {\n        this.analyser.connect(this.audioCtx.destination)\n      }\n    },\n\n    draw: function () {\n      const data = new Uint8Array(this.analyser.fftSize)\n\n      if (this.canvFillColor) this.ctx.fillStyle = this.canvFillColor\n      this.ctx.clearRect(0, 0, this.canvWidth, this.canvHeight)\n      this.ctx.beginPath()\n      this.ctx.strokeStyle = this.lineColor\n\n      if (this.type === 'frequ') {\n        this.analyser.getByteFrequencyData(data)\n        this.frequ(data)\n      } else if (this.type === 'circle') {\n        this.analyser.getByteFrequencyData(data)\n        this.circle(data)\n      } else {\n        this.analyser.getByteTimeDomainData(data)\n        this.wform(data)\n      }\n\n      requestAnimationFrame(this.draw)\n    },\n\n    wform: function (data) {\n      const h = this.canvHeight\n      const step = this.canvWidth / this.analyser.fftSize\n      let x = 0\n      this.ctx.lineWidth = this.lineWidth || 0.5\n      data.forEach(v => {\n        const y = (v / 255.0) * h\n        this.ctx.lineTo(x, y)\n        x += step\n      })\n      this.ctx.stroke()\n    },\n\n    frequ: function (data) {\n      const middleOut = this.frequDirection === 'mo'\n      const start = middleOut ? this.canvWidth / 2 : 0\n      const c = middleOut ? this.frequLnum / 2 : this.frequLnum\n      const step = middleOut ? this.canvWidth / c / 2 : this.canvWidth / c\n      const h = this.canvHeight\n      const lw = this.lineWidth || 2\n      for (let i = 0; i < c; i++) {\n        const x = middleOut ? i * step : i * step + lw\n        const v = data.slice(x, x + step).reduce((sum, v) => sum + (v / 255.0 * h), 0) / step\n        const space = (h - v) / 2 + 2 // + 2 is space for caps\n        this.ctx.lineWidth = lw\n        this.ctx.lineCap = this.frequLineCap ? 'round' : 'butt'\n        this.ctx.moveTo(start + x, space)\n        this.ctx.lineTo(start + x, h - space)\n        this.ctx.stroke()\n\n        if (middleOut && i > 0) {\n          this.ctx.moveTo(start - x, space)\n          this.ctx.lineTo(start - x, h - space)\n          this.ctx.stroke()\n        }\n      }\n    },\n\n    circle: function (data) {\n      const cx = this.canvWidth / 2 // center X\n      const cy = this.canvHeight / 2 // center Y\n      const r = this.radius || 4\n      const lineWidth = this.lineWidth\n      const lineSpace = 10\n      const arcStep = Math.ceil(lineWidth + lineSpace)\n      const step = ((lineWidth + lineSpace) / data.length) * (2 * Math.PI)\n      const barLen = this.canvWidth / 1.2 - r\n      let angle = Math.PI\n\n      this.ctx.lineWidth = this.lineWidth || 0.5\n\n      data.forEach((_, index) => {\n        angle += step\n        if (index % arcStep) {\n          return\n        }\n\n        const bits = Math.round(\n          data.slice(index, index + arcStep).reduce((v, t) => t + v, 0) /\n            arcStep\n        )\n\n        const blen = r + (bits / 255.0) * barLen\n        this.ctx.beginPath()\n        this.ctx.lineCap = 'round'\n        this.ctx.moveTo(r * Math.cos(angle) + cx, r * Math.sin(angle) + cy)\n        this.ctx.lineTo(\n          blen * Math.cos(angle) + cx,\n          blen * Math.sin(angle) + cy\n        )\n        this.ctx.stroke()\n      })\n    }\n  }\n}\n\nexport default AvMedia\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}