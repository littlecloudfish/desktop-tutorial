{"ast":null,"code":"import _regeneratorRuntime from \"/home/little/Documents/music_web/startproj/zhengdao-ui/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"/home/little/Documents/music_web/startproj/zhengdao-ui/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport _slicedToArray from \"/home/little/Documents/music_web/startproj/zhengdao-ui/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport \"core-js/modules/es.array.for-each.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/web.dom-collections.for-each.js\";\nimport \"core-js/modules/es.array.filter.js\";\nimport \"core-js/modules/es.array.from.js\";\nimport \"core-js/modules/es.string.iterator.js\";\nimport \"core-js/modules/es.string.starts-with.js\";\nimport \"core-js/modules/es.array.join.js\";\nimport \"core-js/modules/es.number.is-nan.js\";\nimport \"core-js/modules/es.number.constructor.js\";\nimport \"core-js/modules/es.array.concat.js\";\nimport { ref, watchEffect, watch, unref, computed, onMounted, nextTick } from 'vue';\nimport { useEventListener, useResizeObserver } from '@vueuse/core';\nimport '../../../../hooks/index.mjs';\nimport { useSize } from '../../../../hooks/use-common-props/index.mjs';\n\nfunction useStyle(props, layout, store, table) {\n  var isHidden = ref(false);\n  var renderExpanded = ref(null);\n  var resizeProxyVisible = ref(false);\n\n  var setDragVisible = function setDragVisible(visible) {\n    resizeProxyVisible.value = visible;\n  };\n\n  var resizeState = ref({\n    width: null,\n    height: null,\n    headerHeight: null\n  });\n  var isGroup = ref(false);\n  var scrollbarViewStyle = {\n    display: \"inline-block\",\n    verticalAlign: \"middle\"\n  };\n  var tableWidth = ref();\n  var tableScrollHeight = ref(0);\n  var bodyScrollHeight = ref(0);\n  var headerScrollHeight = ref(0);\n  var footerScrollHeight = ref(0);\n  watchEffect(function () {\n    layout.setHeight(props.height);\n  });\n  watchEffect(function () {\n    layout.setMaxHeight(props.maxHeight);\n  });\n  watch(function () {\n    return [props.currentRowKey, store.states.rowKey];\n  }, function (_ref) {\n    var _ref2 = _slicedToArray(_ref, 2),\n        currentRowKey = _ref2[0],\n        rowKey = _ref2[1];\n\n    if (!unref(rowKey)) return;\n    store.setCurrentRowKey(\"\".concat(currentRowKey));\n  }, {\n    immediate: true\n  });\n  watch(function () {\n    return props.data;\n  }, function (data) {\n    table.store.commit(\"setData\", data);\n  }, {\n    immediate: true,\n    deep: true\n  });\n  watchEffect(function () {\n    if (props.expandRowKeys) {\n      store.setExpandRowKeysAdapter(props.expandRowKeys);\n    }\n  });\n\n  var handleMouseLeave = function handleMouseLeave() {\n    table.store.commit(\"setHoverRow\", null);\n    if (table.hoverState) table.hoverState = null;\n  };\n\n  var handleHeaderFooterMousewheel = function handleHeaderFooterMousewheel(event, data) {\n    var pixelX = data.pixelX,\n        pixelY = data.pixelY;\n\n    if (Math.abs(pixelX) >= Math.abs(pixelY)) {\n      table.refs.bodyWrapper.scrollLeft += data.pixelX / 5;\n    }\n  };\n\n  var shouldUpdateHeight = computed(function () {\n    return props.height || props.maxHeight || store.states.fixedColumns.value.length > 0 || store.states.rightFixedColumns.value.length > 0;\n  });\n  var tableBodyStyles = computed(function () {\n    return {\n      width: layout.bodyWidth.value ? \"\".concat(layout.bodyWidth.value, \"px\") : \"\"\n    };\n  });\n\n  var doLayout = function doLayout() {\n    if (shouldUpdateHeight.value) {\n      layout.updateElsHeight();\n    }\n\n    layout.updateColumnsWidth();\n    requestAnimationFrame(syncPostion);\n  };\n\n  onMounted( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n    var el, tableHeader;\n    return _regeneratorRuntime().wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.next = 2;\n            return nextTick();\n\n          case 2:\n            store.updateColumns();\n            bindEvents();\n            requestAnimationFrame(doLayout);\n            el = table.vnode.el;\n            tableHeader = table.refs.headerWrapper;\n\n            if (props.flexible && el && el.parentElement) {\n              el.parentElement.style.minWidth = \"0\";\n            }\n\n            resizeState.value = {\n              width: tableWidth.value = el.offsetWidth,\n              height: el.offsetHeight,\n              headerHeight: props.showHeader && tableHeader ? tableHeader.offsetHeight : null\n            };\n            store.states.columns.value.forEach(function (column) {\n              if (column.filteredValue && column.filteredValue.length) {\n                table.store.commit(\"filterChange\", {\n                  column: column,\n                  values: column.filteredValue,\n                  silent: true\n                });\n              }\n            });\n            table.$ready = true;\n\n          case 11:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  })));\n\n  var setScrollClassByEl = function setScrollClassByEl(el, className) {\n    if (!el) return;\n    var classList = Array.from(el.classList).filter(function (item) {\n      return !item.startsWith(\"is-scrolling-\");\n    });\n    classList.push(layout.scrollX.value ? className : \"is-scrolling-none\");\n    el.className = classList.join(\" \");\n  };\n\n  var setScrollClass = function setScrollClass(className) {\n    var tableWrapper = table.refs.tableWrapper;\n    setScrollClassByEl(tableWrapper, className);\n  };\n\n  var hasScrollClass = function hasScrollClass(className) {\n    var tableWrapper = table.refs.tableWrapper;\n    return !!(tableWrapper && tableWrapper.classList.contains(className));\n  };\n\n  var syncPostion = function syncPostion() {\n    if (!table.refs.scrollBarRef) return;\n\n    if (!layout.scrollX.value) {\n      var scrollingNoneClass = \"is-scrolling-none\";\n\n      if (!hasScrollClass(scrollingNoneClass)) {\n        setScrollClass(scrollingNoneClass);\n      }\n\n      return;\n    }\n\n    var scrollContainer = table.refs.scrollBarRef.wrap$;\n    if (!scrollContainer) return;\n    var scrollLeft = scrollContainer.scrollLeft,\n        offsetWidth = scrollContainer.offsetWidth,\n        scrollWidth = scrollContainer.scrollWidth;\n    var _table$refs = table.refs,\n        headerWrapper = _table$refs.headerWrapper,\n        footerWrapper = _table$refs.footerWrapper;\n    if (headerWrapper) headerWrapper.scrollLeft = scrollLeft;\n    if (footerWrapper) footerWrapper.scrollLeft = scrollLeft;\n    var maxScrollLeftPosition = scrollWidth - offsetWidth - 1;\n\n    if (scrollLeft >= maxScrollLeftPosition) {\n      setScrollClass(\"is-scrolling-right\");\n    } else if (scrollLeft === 0) {\n      setScrollClass(\"is-scrolling-left\");\n    } else {\n      setScrollClass(\"is-scrolling-middle\");\n    }\n  };\n\n  var bindEvents = function bindEvents() {\n    if (!table.refs.scrollBarRef) return;\n\n    if (table.refs.scrollBarRef.wrap$) {\n      useEventListener(table.refs.scrollBarRef.wrap$, \"scroll\", syncPostion, {\n        passive: true\n      });\n    }\n\n    if (props.fit) {\n      useResizeObserver(table.vnode.el, resizeListener);\n    } else {\n      useEventListener(window, \"resize\", resizeListener);\n    }\n  };\n\n  var resizeListener = function resizeListener() {\n    var _a, _b, _c;\n\n    var el = table.vnode.el;\n    if (!table.$ready || !el) return;\n    var shouldUpdateLayout = false;\n    var _resizeState$value = resizeState.value,\n        oldWidth = _resizeState$value.width,\n        oldHeight = _resizeState$value.height,\n        oldHeaderHeight = _resizeState$value.headerHeight;\n    var width = tableWidth.value = el.offsetWidth;\n\n    if (oldWidth !== width) {\n      shouldUpdateLayout = true;\n    }\n\n    var height = el.offsetHeight;\n\n    if ((props.height || shouldUpdateHeight.value) && oldHeight !== height) {\n      shouldUpdateLayout = true;\n    }\n\n    var tableHeader = props.tableLayout === \"fixed\" ? table.refs.headerWrapper : (_a = table.refs.tableHeaderRef) == null ? void 0 : _a.$el;\n\n    if (props.showHeader && (tableHeader == null ? void 0 : tableHeader.offsetHeight) !== oldHeaderHeight) {\n      shouldUpdateLayout = true;\n    }\n\n    tableScrollHeight.value = ((_b = table.refs.tableWrapper) == null ? void 0 : _b.scrollHeight) || 0;\n    headerScrollHeight.value = (tableHeader == null ? void 0 : tableHeader.scrollHeight) || 0;\n    footerScrollHeight.value = ((_c = table.refs.footerWrapper) == null ? void 0 : _c.scrollHeight) || 0;\n    bodyScrollHeight.value = tableScrollHeight.value - headerScrollHeight.value - footerScrollHeight.value;\n\n    if (shouldUpdateLayout) {\n      resizeState.value = {\n        width: width,\n        height: height,\n        headerHeight: props.showHeader && (tableHeader == null ? void 0 : tableHeader.offsetHeight) || 0\n      };\n      doLayout();\n    }\n  };\n\n  var tableSize = useSize();\n  var bodyWidth = computed(function () {\n    var bodyWidth_ = layout.bodyWidth,\n        scrollY = layout.scrollY,\n        gutterWidth = layout.gutterWidth;\n    return bodyWidth_.value ? \"\".concat(bodyWidth_.value - (scrollY.value ? gutterWidth : 0), \"px\") : \"\";\n  });\n  var tableLayout = computed(function () {\n    if (props.maxHeight) return \"fixed\";\n    return props.tableLayout;\n  });\n  var emptyBlockStyle = computed(function () {\n    if (props.data && props.data.length) return null;\n    var height = \"100%\";\n\n    if (bodyScrollHeight.value) {\n      height = \"\".concat(bodyScrollHeight.value, \"px\");\n    }\n\n    var width = tableWidth.value;\n    return {\n      width: width ? \"\".concat(width, \"px\") : \"\",\n      height: height\n    };\n  });\n  var tableInnerStyle = computed(function () {\n    if (props.height) {\n      return {\n        height: !Number.isNaN(Number(props.height)) ? \"\".concat(props.height, \"px\") : props.height\n      };\n    }\n\n    if (props.maxHeight) {\n      return {\n        maxHeight: !Number.isNaN(Number(props.maxHeight)) ? \"\".concat(props.maxHeight, \"px\") : props.maxHeight\n      };\n    }\n\n    return {};\n  });\n  var scrollbarStyle = computed(function () {\n    var _a, _b;\n\n    if (props.height) {\n      return {\n        height: \"100%\"\n      };\n    }\n\n    if (props.maxHeight) {\n      if (!Number.isNaN(Number(props.maxHeight))) {\n        var headerHeight = ((_a = table.refs.headerWrapper) == null ? void 0 : _a.scrollHeight) || 0;\n        var footerHeight = ((_b = table.refs.footerWrapper) == null ? void 0 : _b.scrollHeight) || 0;\n        var maxHeight = props.maxHeight;\n        var reachMaxHeight = tableScrollHeight.value >= Number(maxHeight);\n\n        if (reachMaxHeight) {\n          return {\n            maxHeight: \"\".concat(tableScrollHeight.value - headerHeight - footerHeight, \"px\")\n          };\n        }\n      } else {\n        return {\n          maxHeight: \"calc(\".concat(props.maxHeight, \" - \").concat(headerScrollHeight.value + footerScrollHeight.value, \"px)\")\n        };\n      }\n    }\n\n    return {};\n  });\n\n  var handleFixedMousewheel = function handleFixedMousewheel(event, data) {\n    var bodyWrapper = table.refs.bodyWrapper;\n\n    if (Math.abs(data.spinY) > 0) {\n      var currentScrollTop = bodyWrapper.scrollTop;\n\n      if (data.pixelY < 0 && currentScrollTop !== 0) {\n        event.preventDefault();\n      }\n\n      if (data.pixelY > 0 && bodyWrapper.scrollHeight - bodyWrapper.clientHeight > currentScrollTop) {\n        event.preventDefault();\n      }\n\n      bodyWrapper.scrollTop += Math.ceil(data.pixelY / 5);\n    } else {\n      bodyWrapper.scrollLeft += Math.ceil(data.pixelX / 5);\n    }\n  };\n\n  return {\n    isHidden: isHidden,\n    renderExpanded: renderExpanded,\n    setDragVisible: setDragVisible,\n    isGroup: isGroup,\n    handleMouseLeave: handleMouseLeave,\n    handleHeaderFooterMousewheel: handleHeaderFooterMousewheel,\n    tableSize: tableSize,\n    emptyBlockStyle: emptyBlockStyle,\n    handleFixedMousewheel: handleFixedMousewheel,\n    resizeProxyVisible: resizeProxyVisible,\n    bodyWidth: bodyWidth,\n    resizeState: resizeState,\n    doLayout: doLayout,\n    tableBodyStyles: tableBodyStyles,\n    tableLayout: tableLayout,\n    scrollbarViewStyle: scrollbarViewStyle,\n    tableInnerStyle: tableInnerStyle,\n    scrollbarStyle: scrollbarStyle\n  };\n}\n\nexport { useStyle as default };","map":{"version":3,"mappings":"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","names":["useStyle","props","layout","store","table","isHidden","ref","renderExpanded","resizeProxyVisible","setDragVisible","visible","value","resizeState","width","height","headerHeight","isGroup","scrollbarViewStyle","display","verticalAlign","tableWidth","tableScrollHeight","bodyScrollHeight","headerScrollHeight","footerScrollHeight","watchEffect","setHeight","setMaxHeight","maxHeight","watch","currentRowKey","states","rowKey","unref","setCurrentRowKey","immediate","data","commit","deep","expandRowKeys","setExpandRowKeysAdapter","handleMouseLeave","hoverState","handleHeaderFooterMousewheel","event","pixelX","pixelY","Math","abs","refs","bodyWrapper","scrollLeft","shouldUpdateHeight","computed","fixedColumns","length","rightFixedColumns","tableBodyStyles","bodyWidth","doLayout","updateElsHeight","updateColumnsWidth","requestAnimationFrame","syncPostion","onMounted","nextTick","updateColumns","bindEvents","el","vnode","tableHeader","headerWrapper","flexible","parentElement","style","minWidth","offsetWidth","offsetHeight","showHeader","columns","forEach","column","filteredValue","values","silent","$ready","setScrollClassByEl","className","classList","Array","from","filter","item","startsWith","push","scrollX","join","setScrollClass","tableWrapper","hasScrollClass","contains","scrollBarRef","scrollingNoneClass","scrollContainer","wrap$","scrollWidth","footerWrapper","maxScrollLeftPosition","useEventListener","passive","fit","useResizeObserver","resizeListener","window","_a","_b","_c","shouldUpdateLayout","oldWidth","oldHeight","oldHeaderHeight","tableLayout","tableHeaderRef","$el","scrollHeight","tableSize","useSize","bodyWidth_","scrollY","gutterWidth","emptyBlockStyle","tableInnerStyle","Number","isNaN","scrollbarStyle","footerHeight","reachMaxHeight","handleFixedMousewheel","spinY","currentScrollTop","scrollTop","preventDefault","clientHeight","ceil"],"sources":["../../../../../../../packages/components/table/src/table/style-helper.ts"],"sourcesContent":["// @ts-nocheck\nimport {\n  computed,\n  nextTick,\n  onMounted,\n  ref,\n  unref,\n  watch,\n  watchEffect,\n} from 'vue'\nimport { useEventListener, useResizeObserver } from '@vueuse/core'\nimport { useSize } from '@element-plus/hooks'\n\nimport type { Table, TableProps } from './defaults'\nimport type { Store } from '../store'\nimport type TableLayout from '../table-layout'\nimport type { TableColumnCtx } from '../table-column/defaults'\n\nfunction useStyle<T>(\n  props: TableProps<T>,\n  layout: TableLayout<T>,\n  store: Store<T>,\n  table: Table<T>\n) {\n  const isHidden = ref(false)\n  const renderExpanded = ref(null)\n  const resizeProxyVisible = ref(false)\n  const setDragVisible = (visible: boolean) => {\n    resizeProxyVisible.value = visible\n  }\n  const resizeState = ref<{\n    width: null | number\n    height: null | number\n    headerHeight: null | number\n  }>({\n    width: null,\n    height: null,\n    headerHeight: null,\n  })\n  const isGroup = ref(false)\n  const scrollbarViewStyle = {\n    display: 'inline-block',\n    verticalAlign: 'middle',\n  }\n  const tableWidth = ref()\n  const tableScrollHeight = ref(0)\n  const bodyScrollHeight = ref(0)\n  const headerScrollHeight = ref(0)\n  const footerScrollHeight = ref(0)\n\n  watchEffect(() => {\n    layout.setHeight(props.height)\n  })\n  watchEffect(() => {\n    layout.setMaxHeight(props.maxHeight)\n  })\n  watch(\n    () => [props.currentRowKey, store.states.rowKey],\n    ([currentRowKey, rowKey]) => {\n      if (!unref(rowKey)) return\n      store.setCurrentRowKey(`${currentRowKey}`)\n    },\n    {\n      immediate: true,\n    }\n  )\n  watch(\n    () => props.data,\n    (data) => {\n      table.store.commit('setData', data)\n    },\n    {\n      immediate: true,\n      deep: true,\n    }\n  )\n  watchEffect(() => {\n    if (props.expandRowKeys) {\n      store.setExpandRowKeysAdapter(props.expandRowKeys)\n    }\n  })\n\n  const handleMouseLeave = () => {\n    table.store.commit('setHoverRow', null)\n    if (table.hoverState) table.hoverState = null\n  }\n\n  const handleHeaderFooterMousewheel = (event, data) => {\n    const { pixelX, pixelY } = data\n    if (Math.abs(pixelX) >= Math.abs(pixelY)) {\n      table.refs.bodyWrapper.scrollLeft += data.pixelX / 5\n    }\n  }\n\n  const shouldUpdateHeight = computed(() => {\n    return (\n      props.height ||\n      props.maxHeight ||\n      store.states.fixedColumns.value.length > 0 ||\n      store.states.rightFixedColumns.value.length > 0\n    )\n  })\n\n  const tableBodyStyles = computed(() => {\n    return {\n      width: layout.bodyWidth.value ? `${layout.bodyWidth.value}px` : '',\n    }\n  })\n\n  const doLayout = () => {\n    if (shouldUpdateHeight.value) {\n      layout.updateElsHeight()\n    }\n    layout.updateColumnsWidth()\n    requestAnimationFrame(syncPostion)\n  }\n  onMounted(async () => {\n    await nextTick()\n    store.updateColumns()\n    bindEvents()\n    requestAnimationFrame(doLayout)\n\n    const el: HTMLElement = table.vnode.el as HTMLElement\n    const tableHeader: HTMLElement = table.refs.headerWrapper\n    if (props.flexible && el && el.parentElement) {\n      // Automatic minimum size of flex-items\n      // Ensure that the main axis does not follow the width of the items\n      el.parentElement.style.minWidth = '0'\n    }\n\n    resizeState.value = {\n      width: (tableWidth.value = el.offsetWidth),\n      height: el.offsetHeight,\n      headerHeight:\n        props.showHeader && tableHeader ? tableHeader.offsetHeight : null,\n    }\n\n    // init filters\n    store.states.columns.value.forEach((column: TableColumnCtx<T>) => {\n      if (column.filteredValue && column.filteredValue.length) {\n        table.store.commit('filterChange', {\n          column,\n          values: column.filteredValue,\n          silent: true,\n        })\n      }\n    })\n    table.$ready = true\n  })\n  const setScrollClassByEl = (el: HTMLElement, className: string) => {\n    if (!el) return\n    const classList = Array.from(el.classList).filter(\n      (item) => !item.startsWith('is-scrolling-')\n    )\n    classList.push(layout.scrollX.value ? className : 'is-scrolling-none')\n    el.className = classList.join(' ')\n  }\n  const setScrollClass = (className: string) => {\n    const { tableWrapper } = table.refs\n    setScrollClassByEl(tableWrapper, className)\n  }\n  const hasScrollClass = (className: string) => {\n    const { tableWrapper } = table.refs\n    return !!(tableWrapper && tableWrapper.classList.contains(className))\n  }\n  const syncPostion = function () {\n    if (!table.refs.scrollBarRef) return\n    if (!layout.scrollX.value) {\n      const scrollingNoneClass = 'is-scrolling-none'\n      if (!hasScrollClass(scrollingNoneClass)) {\n        setScrollClass(scrollingNoneClass)\n      }\n      return\n    }\n    const scrollContainer = table.refs.scrollBarRef.wrap$\n    if (!scrollContainer) return\n    const { scrollLeft, offsetWidth, scrollWidth } = scrollContainer\n    const { headerWrapper, footerWrapper } = table.refs\n    if (headerWrapper) headerWrapper.scrollLeft = scrollLeft\n    if (footerWrapper) footerWrapper.scrollLeft = scrollLeft\n    const maxScrollLeftPosition = scrollWidth - offsetWidth - 1\n    if (scrollLeft >= maxScrollLeftPosition) {\n      setScrollClass('is-scrolling-right')\n    } else if (scrollLeft === 0) {\n      setScrollClass('is-scrolling-left')\n    } else {\n      setScrollClass('is-scrolling-middle')\n    }\n  }\n\n  const bindEvents = () => {\n    if (!table.refs.scrollBarRef) return\n    if (table.refs.scrollBarRef.wrap$) {\n      useEventListener(table.refs.scrollBarRef.wrap$, 'scroll', syncPostion, {\n        passive: true,\n      })\n    }\n    if (props.fit) {\n      useResizeObserver(table.vnode.el as HTMLElement, resizeListener)\n    } else {\n      useEventListener(window, 'resize', resizeListener)\n    }\n  }\n  const resizeListener = () => {\n    const el = table.vnode.el\n    if (!table.$ready || !el) return\n\n    let shouldUpdateLayout = false\n    const {\n      width: oldWidth,\n      height: oldHeight,\n      headerHeight: oldHeaderHeight,\n    } = resizeState.value\n\n    const width = (tableWidth.value = el.offsetWidth)\n    if (oldWidth !== width) {\n      shouldUpdateLayout = true\n    }\n\n    const height = el.offsetHeight\n    if ((props.height || shouldUpdateHeight.value) && oldHeight !== height) {\n      shouldUpdateLayout = true\n    }\n\n    const tableHeader: HTMLElement =\n      props.tableLayout === 'fixed'\n        ? table.refs.headerWrapper\n        : table.refs.tableHeaderRef?.$el\n    if (props.showHeader && tableHeader?.offsetHeight !== oldHeaderHeight) {\n      shouldUpdateLayout = true\n    }\n\n    tableScrollHeight.value = table.refs.tableWrapper?.scrollHeight || 0\n    headerScrollHeight.value = tableHeader?.scrollHeight || 0\n    footerScrollHeight.value = table.refs.footerWrapper?.scrollHeight || 0\n    bodyScrollHeight.value =\n      tableScrollHeight.value -\n      headerScrollHeight.value -\n      footerScrollHeight.value\n\n    if (shouldUpdateLayout) {\n      resizeState.value = {\n        width,\n        height,\n        headerHeight: (props.showHeader && tableHeader?.offsetHeight) || 0,\n      }\n      doLayout()\n    }\n  }\n  const tableSize = useSize()\n  const bodyWidth = computed(() => {\n    const { bodyWidth: bodyWidth_, scrollY, gutterWidth } = layout\n    return bodyWidth_.value\n      ? `${(bodyWidth_.value as number) - (scrollY.value ? gutterWidth : 0)}px`\n      : ''\n  })\n\n  const tableLayout = computed(() => {\n    if (props.maxHeight) return 'fixed'\n    return props.tableLayout\n  })\n\n  const emptyBlockStyle = computed(() => {\n    if (props.data && props.data.length) return null\n    let height = '100%'\n    if (bodyScrollHeight.value) {\n      height = `${bodyScrollHeight.value}px`\n    }\n    const width = tableWidth.value\n    return {\n      width: width ? `${width}px` : '',\n      height,\n    }\n  })\n\n  const tableInnerStyle = computed(() => {\n    if (props.height) {\n      return {\n        height: !Number.isNaN(Number(props.height))\n          ? `${props.height}px`\n          : props.height,\n      }\n    }\n    if (props.maxHeight) {\n      return {\n        maxHeight: !Number.isNaN(Number(props.maxHeight))\n          ? `${props.maxHeight}px`\n          : props.maxHeight,\n      }\n    }\n    return {}\n  })\n\n  const scrollbarStyle = computed(() => {\n    if (props.height) {\n      return {\n        height: '100%',\n      }\n    }\n    if (props.maxHeight) {\n      if (!Number.isNaN(Number(props.maxHeight))) {\n        const headerHeight = table.refs.headerWrapper?.scrollHeight || 0\n        const footerHeight = table.refs.footerWrapper?.scrollHeight || 0\n        const maxHeight = props.maxHeight\n        const reachMaxHeight = tableScrollHeight.value >= Number(maxHeight)\n        if (reachMaxHeight) {\n          return {\n            maxHeight: `${\n              tableScrollHeight.value - headerHeight - footerHeight\n            }px`,\n          }\n        }\n      } else {\n        return {\n          maxHeight: `calc(${props.maxHeight} - ${\n            headerScrollHeight.value + footerScrollHeight.value\n          }px)`,\n        }\n      }\n    }\n\n    return {}\n  })\n\n  /**\n   * fix layout\n   */\n  const handleFixedMousewheel = (event, data) => {\n    const bodyWrapper = table.refs.bodyWrapper\n    if (Math.abs(data.spinY) > 0) {\n      const currentScrollTop = bodyWrapper.scrollTop\n      if (data.pixelY < 0 && currentScrollTop !== 0) {\n        event.preventDefault()\n      }\n      if (\n        data.pixelY > 0 &&\n        bodyWrapper.scrollHeight - bodyWrapper.clientHeight > currentScrollTop\n      ) {\n        event.preventDefault()\n      }\n      bodyWrapper.scrollTop += Math.ceil(data.pixelY / 5)\n    } else {\n      bodyWrapper.scrollLeft += Math.ceil(data.pixelX / 5)\n    }\n  }\n\n  return {\n    isHidden,\n    renderExpanded,\n    setDragVisible,\n    isGroup,\n    handleMouseLeave,\n    handleHeaderFooterMousewheel,\n    tableSize,\n    emptyBlockStyle,\n    handleFixedMousewheel,\n    resizeProxyVisible,\n    bodyWidth,\n    resizeState,\n    doLayout,\n    tableBodyStyles,\n    tableLayout,\n    scrollbarViewStyle,\n    tableInnerStyle,\n    scrollbarStyle,\n  }\n}\n\nexport default useStyle\n"]},"metadata":{},"sourceType":"module"}