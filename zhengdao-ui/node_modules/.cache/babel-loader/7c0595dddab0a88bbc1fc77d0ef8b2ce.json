{"ast":null,"code":"import _regeneratorRuntime from \"/home/little/Documents/music_web/startproj/zhengdao-ui/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"/home/little/Documents/music_web/startproj/zhengdao-ui/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport axios from 'axios';\nexport default {\n  login: function login(context, payload) {\n    return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n      var url, data, res, _data;\n\n      return _regeneratorRuntime().wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              url = 'http://127.0.0.1:1943/login';\n              data = {\n                username: payload.username,\n                password: payload.password\n              };\n              _context.prev = 2;\n              _context.next = 5;\n              return axios({\n                method: 'post',\n                url: url,\n                data: _data,\n                headers: {\n                  Accept: \"application/json\",\n                  \"Content-Type\": \"application/json;charset=UTF-8\"\n                }\n              }).then(function (response) {\n                // console.log(response);\n                context.commit('setUser', {\n                  token: response.data.access_token,\n                  userId: payload.username\n                });\n              });\n\n            case 5:\n              res = _context.sent;\n              _data = res.data;\n              return _context.abrupt(\"return\", _data);\n\n            case 10:\n              _context.prev = 10;\n              _context.t0 = _context[\"catch\"](2);\n              console.log(_context.t0.response); // this is the main part. Use the response property from the error object\n\n              return _context.abrupt(\"return\", _context.t0.response);\n\n            case 14:\n              axios({\n                method: 'post',\n                url: url,\n                data: data,\n                headers: {\n                  Accept: \"application/json\",\n                  \"Content-Type\": \"application/json;charset=UTF-8\"\n                }\n              }).then(function (response) {\n                // console.log(response);\n                context.commit('setUser', {\n                  token: response.data.access_token,\n                  userId: payload.username\n                });\n              }, function (error) {\n                errmes = error.message;\n                console.log(error); // const err = error;\n              });\n\n            case 15:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[2, 10]]);\n    }))();\n  },\n  signup: function signup(context, payload) {\n    return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {\n      var url, data;\n      return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              console.log(payload.password);\n              url = 'http://127.0.0.1:1943/register';\n              data = {\n                username: payload.username,\n                password: payload.password\n              };\n              axios({\n                method: 'post',\n                url: url,\n                data: data,\n                headers: {\n                  Accept: \"application/json\",\n                  \"Content-Type\": \"application/json;charset=UTF-8\"\n                }\n              }).then(function (response) {\n                console.log(response);\n              }, function (error) {\n                console.log(error);\n              });\n\n            case 4:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }))();\n  }\n};","map":{"version":3,"names":["axios","login","context","payload","url","data","username","password","method","headers","Accept","then","response","commit","token","access_token","userId","res","console","log","error","errmes","message","signup"],"sources":["/home/little/Documents/music_web/startproj/zhengdao-ui/src/store/modules/auth/actions.js"],"sourcesContent":["import axios from 'axios'\nexport default {\n    async login(context, payload){\n        \n        const url = 'http://127.0.0.1:1943/login'\n        const data ={\n            username: payload.username,\n            password: payload.password,\n        }\n        try {\n            let res = await axios({\n                method: 'post',\n                url: url,\n                data:data,\n                headers: {\n                    Accept: \"application/json\",\n                    \"Content-Type\": \"application/json;charset=UTF-8\",\n                  },\n             \n            }).then((response) => {\n                // console.log(response);\n                context.commit('setUser',{\n                    token: response.data.access_token,\n                    userId: payload.username,\n                });\n            });\n        \n            let data = res.data;\n            return data;\n          } catch (error) {\n            console.log(error.response); // this is the main part. Use the response property from the error object\n        \n            return error.response;\n          }\n\n\n        axios({\n            method: 'post',\n            url: url,\n            data:data,\n            headers: {\n                Accept: \"application/json\",\n                \"Content-Type\": \"application/json;charset=UTF-8\",\n              },\n         \n        }).then((response) => {\n            // console.log(response);\n            context.commit('setUser',{\n                token: response.data.access_token,\n                userId: payload.username,\n            });\n        }, (error) => {\n            errmes = error.message;\n            console.log(error);\n            // const err = error;\n        });\n       \n\n    },\n\n    async signup(context, payload){\n        console.log(payload.password);\n        const url = 'http://127.0.0.1:1943/register'\n        const data ={\n            username: payload.username,\n            password: payload.password,\n        }\n        axios({\n            method: 'post',\n            url: url,\n            data:data,\n            headers: {\n                Accept: \"application/json\",\n                \"Content-Type\": \"application/json;charset=UTF-8\",\n              },\n         \n        }).then((response) => {\n            console.log(response);\n        }, (error) => {\n            console.log(error);\n        });\n   \n    },\n\n};\n"],"mappings":";;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,eAAe;EACLC,KADK,iBACCC,OADD,EACUC,OADV,EACkB;IAAA;MAAA;;MAAA;QAAA;UAAA;YAAA;cAEnBC,GAFmB,GAEb,6BAFa;cAGnBC,IAHmB,GAGb;gBACRC,QAAQ,EAAEH,OAAO,CAACG,QADV;gBAERC,QAAQ,EAAEJ,OAAO,CAACI;cAFV,CAHa;cAAA;cAAA;cAAA,OAQLP,KAAK,CAAC;gBAClBQ,MAAM,EAAE,MADU;gBAElBJ,GAAG,EAAEA,GAFa;gBAGlBC,IAAI,EAACA,KAHa;gBAIlBI,OAAO,EAAE;kBACLC,MAAM,EAAE,kBADH;kBAEL,gBAAgB;gBAFX;cAJS,CAAD,CAAL,CASbC,IATa,CASR,UAACC,QAAD,EAAc;gBAClB;gBACAV,OAAO,CAACW,MAAR,CAAe,SAAf,EAAyB;kBACrBC,KAAK,EAAEF,QAAQ,CAACP,IAAT,CAAcU,YADA;kBAErBC,MAAM,EAAEb,OAAO,CAACG;gBAFK,CAAzB;cAIH,CAfe,CARK;;YAAA;cAQjBW,GARiB;cAyBjBZ,KAzBiB,GAyBVY,GAAG,CAACZ,IAzBM;cAAA,iCA0BdA,KA1Bc;;YAAA;cAAA;cAAA;cA4BrBa,OAAO,CAACC,GAAR,CAAY,YAAMP,QAAlB,EA5BqB,CA4BQ;;cA5BR,iCA8Bd,YAAMA,QA9BQ;;YAAA;cAkCzBZ,KAAK,CAAC;gBACFQ,MAAM,EAAE,MADN;gBAEFJ,GAAG,EAAEA,GAFH;gBAGFC,IAAI,EAACA,IAHH;gBAIFI,OAAO,EAAE;kBACLC,MAAM,EAAE,kBADH;kBAEL,gBAAgB;gBAFX;cAJP,CAAD,CAAL,CASGC,IATH,CASQ,UAACC,QAAD,EAAc;gBAClB;gBACAV,OAAO,CAACW,MAAR,CAAe,SAAf,EAAyB;kBACrBC,KAAK,EAAEF,QAAQ,CAACP,IAAT,CAAcU,YADA;kBAErBC,MAAM,EAAEb,OAAO,CAACG;gBAFK,CAAzB;cAIH,CAfD,EAeG,UAACc,KAAD,EAAW;gBACVC,MAAM,GAAGD,KAAK,CAACE,OAAf;gBACAJ,OAAO,CAACC,GAAR,CAAYC,KAAZ,EAFU,CAGV;cACH,CAnBD;;YAlCyB;YAAA;cAAA;UAAA;QAAA;MAAA;IAAA;EAwD5B,CAzDU;EA2DLG,MA3DK,kBA2DErB,OA3DF,EA2DWC,OA3DX,EA2DmB;IAAA;MAAA;MAAA;QAAA;UAAA;YAAA;cAC1Be,OAAO,CAACC,GAAR,CAAYhB,OAAO,CAACI,QAApB;cACMH,GAFoB,GAEd,gCAFc;cAGpBC,IAHoB,GAGd;gBACRC,QAAQ,EAAEH,OAAO,CAACG,QADV;gBAERC,QAAQ,EAAEJ,OAAO,CAACI;cAFV,CAHc;cAO1BP,KAAK,CAAC;gBACFQ,MAAM,EAAE,MADN;gBAEFJ,GAAG,EAAEA,GAFH;gBAGFC,IAAI,EAACA,IAHH;gBAIFI,OAAO,EAAE;kBACLC,MAAM,EAAE,kBADH;kBAEL,gBAAgB;gBAFX;cAJP,CAAD,CAAL,CASGC,IATH,CASQ,UAACC,QAAD,EAAc;gBAClBM,OAAO,CAACC,GAAR,CAAYP,QAAZ;cACH,CAXD,EAWG,UAACQ,KAAD,EAAW;gBACVF,OAAO,CAACC,GAAR,CAAYC,KAAZ;cACH,CAbD;;YAP0B;YAAA;cAAA;UAAA;QAAA;MAAA;IAAA;EAsB7B;AAjFU,CAAf"},"metadata":{},"sourceType":"module"}