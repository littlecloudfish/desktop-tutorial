{"ast":null,"code":"import { ref } from 'vue';\nexport default function () {\n  const files = ref([]);\n\n  function addFiles(newFiles) {\n    let newUploadableFiles = [...newFiles].map(file => new UploadableFile(file)).filter(file => !fileExists(file.id));\n    files.value = files.value.concat(newUploadableFiles);\n  }\n\n  function fileExists(otherId) {\n    return files.value.some(({\n      id\n    }) => id === otherId);\n  }\n\n  function removeFile(file) {\n    const index = files.value.indexOf(file);\n    if (index > -1) files.value.splice(index, 1);\n  }\n\n  return {\n    files,\n    addFiles,\n    removeFile\n  };\n}\n\nclass UploadableFile {\n  constructor(file) {\n    this.file = file;\n    this.id = `${file.name}-${file.size}-${file.lastModified}-${file.type}`;\n    this.url = URL.createObjectURL(file);\n    this.status = null;\n  }\n\n}","map":{"version":3,"names":["ref","files","addFiles","newFiles","newUploadableFiles","map","file","UploadableFile","filter","fileExists","id","value","concat","otherId","some","removeFile","index","indexOf","splice","constructor","name","size","lastModified","type","url","URL","createObjectURL","status"],"sources":["/home/little/Documents/music_web/startproj/zhengdao-ui/src/compositions/file-list.js"],"sourcesContent":["import { ref } from 'vue'\n\nexport default function () {\n\tconst files = ref([])\n\n\tfunction addFiles(newFiles) {\n\t\tlet newUploadableFiles = [...newFiles].map((file) => new UploadableFile(file)).filter((file) => !fileExists(file.id))\n\t\tfiles.value = files.value.concat(newUploadableFiles)\n\t}\n\n\tfunction fileExists(otherId) {\n\t\treturn files.value.some(({ id }) => id === otherId)\n\t}\n\n\tfunction removeFile(file) {\n\t\tconst index = files.value.indexOf(file)\n\n\t\tif (index > -1) files.value.splice(index, 1)\n\t}\n\n\treturn { files, addFiles, removeFile }\n}\n\nclass UploadableFile {\n\tconstructor(file) {\n\t\tthis.file = file\n\t\tthis.id = `${file.name}-${file.size}-${file.lastModified}-${file.type}`\n\t\tthis.url = URL.createObjectURL(file)\n\t\tthis.status = null\n\t}\n}"],"mappings":"AAAA,SAASA,GAAT,QAAoB,KAApB;AAEA,eAAe,YAAY;EAC1B,MAAMC,KAAK,GAAGD,GAAG,CAAC,EAAD,CAAjB;;EAEA,SAASE,QAAT,CAAkBC,QAAlB,EAA4B;IAC3B,IAAIC,kBAAkB,GAAG,CAAC,GAAGD,QAAJ,EAAcE,GAAd,CAAmBC,IAAD,IAAU,IAAIC,cAAJ,CAAmBD,IAAnB,CAA5B,EAAsDE,MAAtD,CAA8DF,IAAD,IAAU,CAACG,UAAU,CAACH,IAAI,CAACI,EAAN,CAAlF,CAAzB;IACAT,KAAK,CAACU,KAAN,GAAcV,KAAK,CAACU,KAAN,CAAYC,MAAZ,CAAmBR,kBAAnB,CAAd;EACA;;EAED,SAASK,UAAT,CAAoBI,OAApB,EAA6B;IAC5B,OAAOZ,KAAK,CAACU,KAAN,CAAYG,IAAZ,CAAiB,CAAC;MAAEJ;IAAF,CAAD,KAAYA,EAAE,KAAKG,OAApC,CAAP;EACA;;EAED,SAASE,UAAT,CAAoBT,IAApB,EAA0B;IACzB,MAAMU,KAAK,GAAGf,KAAK,CAACU,KAAN,CAAYM,OAAZ,CAAoBX,IAApB,CAAd;IAEA,IAAIU,KAAK,GAAG,CAAC,CAAb,EAAgBf,KAAK,CAACU,KAAN,CAAYO,MAAZ,CAAmBF,KAAnB,EAA0B,CAA1B;EAChB;;EAED,OAAO;IAAEf,KAAF;IAASC,QAAT;IAAmBa;EAAnB,CAAP;AACA;;AAED,MAAMR,cAAN,CAAqB;EACpBY,WAAW,CAACb,IAAD,EAAO;IACjB,KAAKA,IAAL,GAAYA,IAAZ;IACA,KAAKI,EAAL,GAAW,GAAEJ,IAAI,CAACc,IAAK,IAAGd,IAAI,CAACe,IAAK,IAAGf,IAAI,CAACgB,YAAa,IAAGhB,IAAI,CAACiB,IAAK,EAAtE;IACA,KAAKC,GAAL,GAAWC,GAAG,CAACC,eAAJ,CAAoBpB,IAApB,CAAX;IACA,KAAKqB,MAAL,GAAc,IAAd;EACA;;AANmB"},"metadata":{},"sourceType":"module"}