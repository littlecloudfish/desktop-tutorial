{"ast":null,"code":"import { createCommentVNode as _createCommentVNode, renderSlot as _renderSlot, withModifiers as _withModifiers, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = [\"data-active\", \"onDragenter\", \"onDragover\", \"onDragleave\", \"onDrop\"];\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", {\n    \"data-active\": $setup.active,\n    onDragenter: _withModifiers($setup.setActive, [\"prevent\"]),\n    onDragover: _withModifiers($setup.setActive, [\"prevent\"]),\n    onDragleave: _withModifiers($setup.setInactive, [\"prevent\"]),\n    onDrop: _withModifiers($setup.onDrop, [\"prevent\"])\n  }, [_createCommentVNode(\" share state with the scoped slot \"), _renderSlot(_ctx.$slots, \"default\", {\n    dropZoneActive: $setup.active\n  })], 40\n  /* PROPS, HYDRATE_EVENTS */\n  , _hoisted_1);\n}","map":{"version":3,"mappings":";;;uBACIA,oBAGM,KAHN,EAGM;IAHA,eAAaC,aAGb;IAHsBC,WAAS,iBAAUD,gBAAV,EAAmB,WAAnB,CAG/B;IAHqDE,UAAQ,iBAAUF,gBAAV,EAAmB,WAAnB,CAG7D;IAHmFG,WAAS,iBAAUH,kBAAV,EAAqB,WAArB,CAG5F;IAHoHI,MAAI,iBAAUJ,aAAV,EAAgB,WAAhB;EAGxH,CAHN,GACIK,2DACJC,YAAsCC,WAAtC,EAAsC,SAAtC,EAAsC;IAA/BC,cAAc,EAAER;EAAe,CAAtC,EAFA;;EAAA","names":["_createElementBlock","$setup","onDragenter","onDragover","onDragleave","onDrop","_createCommentVNode","_renderSlot","_ctx","dropZoneActive"],"sourceRoot":"","sources":["/home/little/Documents/music_web/startproj/zhengdao-ui/src/components/function/DropZone.vue"],"sourcesContent":["<template>\n    <div :data-active=\"active\" @dragenter.prevent=\"setActive\" @dragover.prevent=\"setActive\" @dragleave.prevent=\"setInactive\" @drop.prevent=\"onDrop\">\n        <!-- share state with the scoped slot -->\n    <slot :dropZoneActive=\"active\"></slot>\n    </div>\n</template>\n\n<script setup>\nimport { ref, onMounted, onUnmounted } from 'vue'\nconst emit = defineEmits(['files-dropped'])\n\nlet active = ref(true)\nlet inActiveTimeout = null // add a variable to hold the timeout key\n\nfunction setActive() {\n    active.value = true\n    clearTimeout(inActiveTimeout)\n}\nfunction setInactive() {\n    inActiveTimeout = setTimeout(() => {\n        active.value = false\n    }, 50)\n}\nfunction onDrop(e) {\n    setInactive()\n    emit('files-dropped', [...e.dataTransfer.files])\n}\n\nfunction preventDefaults(e) {\n    e.preventDefault()\n}\n\nconst events = ['dragenter', 'dragover', 'dragleave', 'drop']\n\nonMounted(() => {\n    events.forEach((eventName) => {\n        document.body.addEventListener(eventName, preventDefaults)\n    })\n})\n\nonUnmounted(() => {\n    events.forEach((eventName) => {\n        document.body.removeEventListener(eventName, preventDefaults)\n    })\n})\n</script>"]},"metadata":{},"sourceType":"module"}