{"ast":null,"code":"import { ref, onMounted, onUnmounted } from 'vue';\nexport default {\n  __name: 'DropZone',\n  emits: ['files-dropped'],\n\n  setup(__props, {\n    expose,\n    emit\n  }) {\n    expose();\n    let active = ref(true);\n    let inActiveTimeout = null; // add a variable to hold the timeout key\n\n    function setActive() {\n      active.value = true;\n      clearTimeout(inActiveTimeout);\n    }\n\n    function setInactive() {\n      inActiveTimeout = setTimeout(() => {\n        active.value = false;\n      }, 50);\n    }\n\n    function onDrop(e) {\n      setInactive();\n      emit('files-dropped', [...e.dataTransfer.files]);\n    }\n\n    function preventDefaults(e) {\n      e.preventDefault();\n    }\n\n    const events = ['dragenter', 'dragover', 'dragleave', 'drop'];\n    onMounted(() => {\n      events.forEach(eventName => {\n        document.body.addEventListener(eventName, preventDefaults);\n      });\n    });\n    onUnmounted(() => {\n      events.forEach(eventName => {\n        document.body.removeEventListener(eventName, preventDefaults);\n      });\n    });\n    const __returned__ = {\n      emit,\n      active,\n      inActiveTimeout,\n      setActive,\n      setInactive,\n      onDrop,\n      preventDefaults,\n      events,\n      ref,\n      onMounted,\n      onUnmounted\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n\n};","map":{"version":3,"mappings":"AAQA,SAASA,GAAT,EAAcC,SAAd,EAAyBC,WAAzB,QAA4C,KAA5C;;;;;;;;;;IAGA,IAAIC,MAAM,GAAGH,GAAG,CAAC,IAAD,CAAhB;IACA,IAAII,eAAe,GAAG,IAAtB,EAA2B;;IAE3B,SAASC,SAAT,GAAqB;MACjBF,MAAM,CAACG,KAAP,GAAe,IAAf;MACAC,YAAY,CAACH,eAAD,CAAZ;IACH;;IACD,SAASI,WAAT,GAAuB;MACnBJ,eAAe,GAAGK,UAAU,CAAC,MAAM;QAC/BN,MAAM,CAACG,KAAP,GAAe,KAAf;MACH,CAF2B,EAEzB,EAFyB,CAA5B;IAGH;;IACD,SAASI,MAAT,CAAgBC,CAAhB,EAAmB;MACfH,WAAW;MACXI,IAAI,CAAC,eAAD,EAAkB,CAAC,GAAGD,CAAC,CAACE,YAAF,CAAeC,KAAnB,CAAlB,CAAJ;IACH;;IAED,SAASC,eAAT,CAAyBJ,CAAzB,EAA4B;MACxBA,CAAC,CAACK,cAAF;IACH;;IAED,MAAMC,MAAM,GAAG,CAAC,WAAD,EAAc,UAAd,EAA0B,WAA1B,EAAuC,MAAvC,CAAf;IAEAhB,SAAS,CAAC,MAAM;MACZgB,MAAM,CAACC,OAAP,CAAgBC,SAAD,IAAe;QAC1BC,QAAQ,CAACC,IAAT,CAAcC,gBAAd,CAA+BH,SAA/B,EAA0CJ,eAA1C;MACH,CAFD;IAGH,CAJQ,CAAT;IAMAb,WAAW,CAAC,MAAM;MACde,MAAM,CAACC,OAAP,CAAgBC,SAAD,IAAe;QAC1BC,QAAQ,CAACC,IAAT,CAAcE,mBAAd,CAAkCJ,SAAlC,EAA6CJ,eAA7C;MACH,CAFD;IAGH,CAJU,CAAX","names":["ref","onMounted","onUnmounted","active","inActiveTimeout","setActive","value","clearTimeout","setInactive","setTimeout","onDrop","e","emit","dataTransfer","files","preventDefaults","preventDefault","events","forEach","eventName","document","body","addEventListener","removeEventListener"],"sources":["/home/little/Documents/music_web/startproj/zhengdao-ui/src/components/function/DropZone.vue"],"sourcesContent":["<template>\n    <div :data-active=\"active\" @dragenter.prevent=\"setActive\" @dragover.prevent=\"setActive\" @dragleave.prevent=\"setInactive\" @drop.prevent=\"onDrop\">\n        <!-- share state with the scoped slot -->\n    <slot :dropZoneActive=\"active\"></slot>\n    </div>\n</template>\n\n<script setup>\nimport { ref, onMounted, onUnmounted } from 'vue'\nconst emit = defineEmits(['files-dropped'])\n\nlet active = ref(true)\nlet inActiveTimeout = null // add a variable to hold the timeout key\n\nfunction setActive() {\n    active.value = true\n    clearTimeout(inActiveTimeout)\n}\nfunction setInactive() {\n    inActiveTimeout = setTimeout(() => {\n        active.value = false\n    }, 50)\n}\nfunction onDrop(e) {\n    setInactive()\n    emit('files-dropped', [...e.dataTransfer.files])\n}\n\nfunction preventDefaults(e) {\n    e.preventDefault()\n}\n\nconst events = ['dragenter', 'dragover', 'dragleave', 'drop']\n\nonMounted(() => {\n    events.forEach((eventName) => {\n        document.body.addEventListener(eventName, preventDefaults)\n    })\n})\n\nonUnmounted(() => {\n    events.forEach((eventName) => {\n        document.body.removeEventListener(eventName, preventDefaults)\n    })\n})\n</script>"]},"metadata":{},"sourceType":"module"}