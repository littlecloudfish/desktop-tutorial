{"ast":null,"code":"export default {\n  data() {\n    return {\n      username: '',\n      validusername: true,\n      password: '',\n      // validpassword:true,\n      isloading: false,\n      error: null,\n      mode: 'Login'\n    };\n  },\n\n  computed: {// submitButtonCaption(){\n    //   if(this.mode === 'Login'){\n    //     return 'Login';\n    //   }else {\n    //     return 'Signup';\n    //   }\n    // },\n  },\n  methods: {\n    async submitresult() {\n      this.isloading = true;\n      const actionPaylod = {\n        username: this.username,\n        password: this.password\n      };\n\n      try {\n        await this.$store.dispatch('login', actionPaylod); // if (this.mode === 'Login'){\n        //   await this.$store.dispatch('login',actionPaylod);}\n        // else{\n        // await this.$store.dispatch('signup', actionPayload); redirect to signup \n        // }\n      } catch (err) {\n        this.error = err.message || 'Failed to authenticate, try later';\n      } // token if not null then change page\n\n\n      if (this.$store.getters.Token != null) {\n        this.$router.push({\n          name: 'MusicUser'\n        });\n      }\n\n      this.isloading = false;\n    },\n\n    handleError() {\n      this.error = null;\n    } // forgetpassword(){\n    //   }\n\n\n  }\n};","map":{"version":3,"mappings":"AAsCE,eAAc;EACZA,IAAI,GAAE;IACJ,OAAM;MACJC,QAAQ,EAAE,EADN;MAEJC,aAAa,EAAC,IAFV;MAGJC,QAAQ,EAAC,EAHL;MAIJ;MACAC,SAAS,EAAC,KALN;MAMJC,KAAK,EAAE,IANH;MAOJC,IAAI,EAAE;IAPF,CAAN;EASD,CAXW;;EAYZC,QAAQ,EAAC,CACP;IACA;IACA;IACA;IACA;IACA;IACA;EAPO,CAZG;EAqBZC,OAAO,EAAC;IACN,MAAMC,YAAN,GAAoB;MAChB,KAAKL,SAAL,GAAiB,IAAjB;MACA,MAAMM,YAAW,GAAI;QACnBT,QAAQ,EAAE,KAAKA,QADI;QAEnBE,QAAQ,EAAE,KAAKA;MAFI,CAArB;;MAIA,IAAG;QACD,MAAM,KAAKQ,MAAL,CAAYC,QAAZ,CAAqB,OAArB,EAA6BF,YAA7B,CAAN,CADC,CAED;QACA;QACA;QACE;QACF;MACD,CAPD,CAOC,OAAMG,GAAN,EAAU;QACT,KAAKR,KAAL,GAAaQ,GAAG,CAACC,OAAJ,IAAe,mCAA5B;MACF,CAfgB,CAgBhB;;;MACA,IAAI,KAAKH,MAAL,CAAYI,OAAZ,CAAoBC,KAApB,IAA6B,IAAjC,EAAuC;QACrC,KAAKC,OAAL,CAAaC,IAAb,CAAkB;UAACC,IAAI,EAAE;QAAP,CAAlB;MACF;;MACA,KAAKf,SAAL,GAAgB,KAAhB;IAEL,CAvBO;;IAwBRgB,WAAW,GAAE;MACX,KAAKf,KAAL,GAAa,IAAb;IACD,CA1BO,CA2BR;IAEA;;;EA7BQ;AArBI,CAAd","names":["data","username","validusername","password","isloading","error","mode","computed","methods","submitresult","actionPaylod","$store","dispatch","err","message","getters","Token","$router","push","name","handleError"],"sourceRoot":"","sources":["/home/little/Documents/music_web/startproj/zhengdao-ui/src/components/function/login.vue"],"sourcesContent":["<template>\n    <base-dialog :show=\"!!error\" title=\"An error occurred\" @close=\"handleError\">\n        <p>{{ error }}</p>\n    </base-dialog>\n    <el-row>\n      <el-col :span=\"24\">Input Username</el-col>\n    </el-row>\n    <el-row>\n      <el-col :span=\"24\">\n          <el-input v-model=\"username\" placeholder=\"Please input Username\" />\n      </el-col>\n    </el-row>\n    <el-row>\n      <el-col :span=\"24\">Input Password</el-col>\n    </el-row>\n    <el-row>\n      <el-col :span=\"24\">\n          <el-input v-model=\"password\" type=\"password\" placeholder=\"Please input Password\" />\n      </el-col>\n    </el-row>\n    <!-- <p v-if=\"!validpassword\">Username or Password are invalid. Please check your provided data.</p> -->\n  \n    <div>\n      <el-row>\n        <el-button type=\"Success\" round @click=\"submitresult\" >Login</el-button>  \n        <!-- <el-button type=\"Success\" round @click=\"forgetpassword\" >Forget Passwords</el-button> -->\n      </el-row>\n      <el-row>\n        <el-button type=\"Success\" round  >\n          <router-link :to=\"{name:'MusicUserRegister'}\" style=\"text-decoration: none; color: inherit;\" >\n          SignUp\n          </router-link>\n        </el-button>  \n      </el-row> \n    </div>\n  </template>\n  \n  <script>\n  export default{\n    data(){\n      return{\n        username: '',\n        validusername:true,\n        password:'',\n        // validpassword:true,\n        isloading:false,\n        error: null,\n        mode: 'Login',\n      };\n    },\n    computed:{\n      // submitButtonCaption(){\n      //   if(this.mode === 'Login'){\n      //     return 'Login';\n      //   }else {\n      //     return 'Signup';\n      //   }\n      // },\n    },\n    methods:{\n      async submitresult(){\n          this.isloading = true;\n          const actionPaylod = {\n            username: this.username,\n            password: this.password,\n          };\n          try{\n            await this.$store.dispatch('login',actionPaylod);\n            // if (this.mode === 'Login'){\n            //   await this.$store.dispatch('login',actionPaylod);}\n            // else{\n              // await this.$store.dispatch('signup', actionPayload); redirect to signup \n            // }\n          }catch(err){\n            this.error = err.message || 'Failed to authenticate, try later';\n          }\n          // token if not null then change page\n          if (this.$store.getters.Token != null ){\n            this.$router.push({name: 'MusicUser'});\n          }\n          this.isloading= false;\n  \n    },\n    handleError(){\n      this.error = null;\n    },\n    // forgetpassword(){\n  \n    //   }\n    },\n  }\n  </script>\n  \n  <style scoped lang=\"scss\">\n  .el-row {\n    margin-bottom: 20px;\n  }\n  .el-row:last-child {\n    margin-bottom: 0;\n  }\n  .el-col {\n    border-radius: 4px;\n  }\n  \n  .grid-content {\n    border-radius: 4px;\n    min-height: 36px;\n  }\n  </style>\n  "]},"metadata":{},"sourceType":"module"}