{"ast":null,"code":"import axios from 'axios';\nexport default {\n  // async musicinfo(context, payload){\n  // const backapi = 'http://127.0.0.1:1943';\n  // const musicnumber = payload;\n  // try{\n  //     const errmes =await axios({\n  //         method: 'get',\n  //         url: backapi+'/music/'+musicnumber\n  //     }\n  //     ).then(function(response){\n  //         context.commit('setMusic',{\n  //             musicid : response.data[0].id,\n  //             cover_address : response.data[0].cover_address,\n  //             music_address : response.data[0].music_address,\n  //             musicname : response.data[0].name,\n  //             post_date : response.data[0].post_date,\n  //             user_id : response.data[0].user_id,\n  //         });\n  //     });\n  // }catch(err){\n  //     if (err.message == 'Request failed with status code 401'){\n  //         console.log('called if');\n  //         throw { message : \"Wrong password or username\" , number: 1000};\n  //     }\n  //     else {\n  //         throw err;\n  //     }\n  // }\n  // },\n  async musicinfo(context, payload) {\n    const backapi = 'http://127.0.0.1:1943';\n    const musicnumber = payload;\n\n    try {\n      const errmes = await axios({\n        method: 'get',\n        url: backapi + '/music/' + musicnumber\n      }).then(function (response) {\n        context.commit('setlistofmusicinfo', {\n          listofmusicinfo: response.data\n        });\n      });\n    } catch (err) {\n      if (err.message == 'Request failed with status code 401') {\n        console.log('called if');\n        throw {\n          message: \"No music info display\",\n          number: 308\n        };\n      } else {\n        throw err;\n      }\n    }\n  },\n\n  async musiclyrics(context, payload) {\n    const backapi = 'http://127.0.0.1:1943';\n    const musicnumber = payload;\n\n    try {\n      const errmes = await axios({\n        method: 'get',\n        url: backapi + '/showlyrics/' + musicnumber\n      }).then(function (response) {\n        context.commit('setmusiclyrics', {\n          musiclyrics: response.data\n        });\n      });\n    } catch (err) {\n      if (err.message == 'Request failed with status code 401') {\n        console.log('called if');\n        throw {\n          message: \"No music lyrics display\",\n          number: 308\n        };\n      } else {\n        throw err;\n      }\n    }\n  },\n\n  async musiclistinfo(context, payload) {\n    const backapi = 'http://127.0.0.1:1943';\n    const searchtype = 4;\n\n    try {\n      const errmes = await axios({\n        method: 'get',\n        url: backapi + '/listmusics/' + searchtype\n      }).then(function (response) {\n        context.commit('setlistofMusic', {\n          listofMusic: response.data\n        });\n      });\n    } catch (err) {\n      if (err.message == 'Request failed with status code 401') {\n        console.log('called if');\n        throw {\n          message: \"No List Display\",\n          number: 308\n        };\n      } else {\n        throw err;\n      }\n    }\n  },\n\n  async setmusicscore(context, payload) {\n    const url = 'http://127.0.0.1:1943/ratemusic';\n    const data = {\n      musicid: payload.musicid,\n      musicscore: payload.musicscore\n    };\n    axios({\n      method: 'post',\n      url: url,\n      data: data,\n      headers: {\n        Accept: \"application/json\",\n        \"Content-Type\": \"application/json;charset=UTF-8\"\n      }\n    }).then(response => {\n      console.log(response);\n    }, error => {\n      console.log(error);\n    });\n  }\n\n};","map":{"version":3,"names":["axios","musicinfo","context","payload","backapi","musicnumber","errmes","method","url","then","response","commit","listofmusicinfo","data","err","message","console","log","number","musiclyrics","musiclistinfo","searchtype","listofMusic","setmusicscore","musicid","musicscore","headers","Accept","error"],"sources":["/home/little/Documents/music_web/startproj/zhengdao-ui/src/store/modules/music/actions.js"],"sourcesContent":["import axios from 'axios';\n\nexport default{\n    // async musicinfo(context, payload){\n    // const backapi = 'http://127.0.0.1:1943';\n    // const musicnumber = payload;\n    // try{\n    //     const errmes =await axios({\n    //         method: 'get',\n    //         url: backapi+'/music/'+musicnumber\n    //     }\n    //     ).then(function(response){\n    //         context.commit('setMusic',{\n    //             musicid : response.data[0].id,\n    //             cover_address : response.data[0].cover_address,\n    //             music_address : response.data[0].music_address,\n    //             musicname : response.data[0].name,\n    //             post_date : response.data[0].post_date,\n    //             user_id : response.data[0].user_id,\n    //         });\n    //     });\n    // }catch(err){\n    //     if (err.message == 'Request failed with status code 401'){\n    //         console.log('called if');\n    //         throw { message : \"Wrong password or username\" , number: 1000};\n    //     }\n    //     else {\n    //         throw err;\n    //     }\n    // }\n    // },\n    async musicinfo(context, payload){\n        const backapi = 'http://127.0.0.1:1943';\n        const musicnumber = payload;\n        try{\n            const errmes =await axios({\n                method: 'get',\n                url: backapi+'/music/'+musicnumber\n            }\n            ).then(function(response){\n                context.commit('setlistofmusicinfo',{\n                    listofmusicinfo : response.data,\n                    \n                });\n            });\n        }catch(err){\n            if (err.message == 'Request failed with status code 401'){\n                console.log('called if');\n                throw { message : \"No music info display\" , number: 308};\n            }\n            else {\n                throw err;\n            }\n        }\n    },\n    async musiclyrics(context, payload){\n        const backapi = 'http://127.0.0.1:1943';\n        const musicnumber = payload;\n        try{\n            const errmes =await axios({\n                method: 'get',\n                url: backapi+'/showlyrics/'+musicnumber\n            }\n            ).then(function(response){\n                context.commit('setmusiclyrics',{\n                    musiclyrics : response.data,\n                    \n                });\n            });\n        }catch(err){\n            if (err.message == 'Request failed with status code 401'){\n                console.log('called if');\n                throw { message : \"No music lyrics display\" , number: 308};\n            }\n            else {\n                throw err;\n            }\n        }\n    \n    },\n    async musiclistinfo(context, payload){\n        const backapi = 'http://127.0.0.1:1943';\n        const searchtype = 4;\n        try{\n            const errmes =await axios({\n                method: 'get',\n                url: backapi+'/listmusics/'+searchtype\n            }\n            ).then(function(response){\n\n                context.commit('setlistofMusic',{\n                    listofMusic : response.data,\n                });\n\n            });\n        }catch(err){\n            if (err.message == 'Request failed with status code 401'){\n                console.log('called if');\n                throw { message : \"No List Display\" , number: 308};\n            }\n            else {\n                throw err;\n            }\n        }\n    },\n    async setmusicscore(context, payload){\n        const url = 'http://127.0.0.1:1943/ratemusic'\n        const data ={\n            musicid: payload.musicid,\n            musicscore: payload.musicscore,\n        }\n        axios({\n            method: 'post',\n            url: url,\n            data:data,\n            headers: {\n                Accept: \"application/json\",\n                \"Content-Type\": \"application/json;charset=UTF-8\",\n              },\n         \n        }).then((response) => {\n            console.log(response);\n        }, (error) => {\n            console.log(error);\n        });\n   \n    },\n}\n         "],"mappings":"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"},"metadata":{},"sourceType":"module"}