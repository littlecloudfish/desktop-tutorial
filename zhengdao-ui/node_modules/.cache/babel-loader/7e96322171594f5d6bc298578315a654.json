{"ast":null,"code":"import _regeneratorRuntime from \"/home/little/Documents/music_web/startproj/zhengdao-ui/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"/home/little/Documents/music_web/startproj/zhengdao-ui/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nexport default {\n  data: function data() {\n    return {\n      username: '',\n      validusername: true,\n      password: '',\n      validpassword: true,\n      isloading: false,\n      error: null,\n      mode: 'login'\n    };\n  },\n  computed: {\n    submitButtonCaption: function submitButtonCaption() {\n      if (this.mode === 'Login') {\n        return 'Login';\n      } else {\n        return 'Signup';\n      }\n    } // switchModeButtonCaption(){\n    //   if (this.name === 'login'){\n    //     return 'Signup instead';\n    //   } else{\n    //     return 'Login instead';\n    //   }\n    // },\n\n  },\n  methods: {\n    submitresult: function submitresult() {\n      var _this = this;\n\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n        var actionPaylod;\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _this.isloading = true;\n                actionPaylod = {\n                  username: _this.username,\n                  password: _this.password\n                };\n                _context.prev = 2;\n\n                if (!(_this.mode === 'login')) {\n                  _context.next = 8;\n                  break;\n                }\n\n                _context.next = 6;\n                return _this.$store.dispatch('auth/login', actionPaylod);\n\n              case 6:\n                _context.next = 8;\n                break;\n\n              case 8:\n                _context.next = 13;\n                break;\n\n              case 10:\n                _context.prev = 10;\n                _context.t0 = _context[\"catch\"](2);\n                _this.error = _context.t0.message || 'Failed to authenticate, try later';\n\n              case 13:\n                _this.isloading = false;\n\n              case 14:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, null, [[2, 10]]);\n      }))();\n    },\n    // switchAuthMode(){\n    //   if (this.mode)\n    // },\n    forgetpassword: function forgetpassword() {}\n  }\n};","map":{"version":3,"mappings":";;AAiCA,eAAc;EACZA,IADY,kBACN;IACJ,OAAM;MACJC,QAAQ,EAAE,EADN;MAEJC,aAAa,EAAC,IAFV;MAGJC,QAAQ,EAAC,EAHL;MAIJC,aAAa,EAAC,IAJV;MAKJC,SAAS,EAAC,KALN;MAMJC,KAAK,EAAE,IANH;MAOJC,IAAI,EAAE;IAPF,CAAN;EASD,CAXW;EAYZC,QAAQ,EAAC;IACPC,mBADO,iCACc;MACnB,IAAG,KAAKF,IAAL,KAAc,OAAjB,EAAyB;QACvB,OAAO,OAAP;MACD,CAFD,MAEM;QACJ,OAAO,QAAP;MACF;IACD,CAPM,CAQP;IACA;IACA;IACA;IACA;IACA;IACA;;EAdO,CAZG;EA4BZG,OAAO,EAAC;IACAC,YADA,0BACc;MAAA;;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAChB,KAAI,CAACN,SAAL,GAAiB,IAAjB;gBACMO,YAFU,GAEK;kBACnBX,QAAQ,EAAE,KAAI,CAACA,QADI;kBAEnBE,QAAQ,EAAE,KAAI,CAACA;gBAFI,CAFL;gBAAA;;gBAAA,MAOV,KAAI,CAACI,IAAL,KAAc,OAPJ;kBAAA;kBAAA;gBAAA;;gBAAA;gBAAA,OAQN,KAAI,CAACM,MAAL,CAAYC,QAAZ,CAAqB,YAArB,EAAkCF,YAAlC,CARM;;cAAA;gBAAA;gBAAA;;cAAA;gBAAA;gBAAA;;cAAA;gBAAA;gBAAA;gBAad,KAAI,CAACN,KAAL,GAAa,YAAIS,OAAJ,IAAe,mCAA5B;;cAbc;gBAehB,KAAI,CAACV,SAAL,GAAgB,KAAhB;;cAfgB;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAiBrB,CAlBO;IAmBN;IACA;IACA;IACAW,cAtBM,4BAsBU,CAEhB;EAxBM;AA5BI,CAAd","names":["data","username","validusername","password","validpassword","isloading","error","mode","computed","submitButtonCaption","methods","submitresult","actionPaylod","$store","dispatch","message","forgetpassword"],"sourceRoot":"","sources":["/home/little/Documents/music_web/startproj/zhengdao-ui/src/views/User/MusicUserLogin.vue"],"sourcesContent":["<template>\n  <el-row>\n    <el-col :span=\"24\">Input Username<div class=\"grid-content ep-bg-purple-dark\" /></el-col>\n  </el-row>\n  <el-row>\n    <el-col :span=\"24\">\n        <el-input v-model=\"username\" placeholder=\"Please input Username\" />\n    <div class=\"grid-content ep-bg-purple-dark\" /></el-col>\n  </el-row>\n  <el-row>\n    <el-col :span=\"24\">Input Password<div class=\"grid-content ep-bg-purple-dark\" /></el-col>\n  </el-row>\n  <el-row>\n    <el-col :span=\"24\">\n        <el-input v-model=\"password\" placeholder=\"Please input Password\" />\n    <div class=\"grid-content ep-bg-purple-dark\" /></el-col>\n  </el-row>\n  <p v-if=\"!validpassword\">Username or Password are invalid. Please check your provided data.</p>\n\n  <div>\n    <!-- <el-row>\n      <el-button type=\"Success\" round @click=\"forgetpassword\" >Forget Passwords</el-button>  \n    </el-row> \n    <el-row>\n      <el-button type=\"Success\" round @click=\"submitresult\" >Login</el-button>  \n    </el-row> -->\n    <el-row>\n      <el-button type=\"Success\" round @click=\"submitresult\" >{{ submitButtonCaption }}</el-button>  \n    </el-row>\n  </div>\n</template>\n\n<script>\nexport default{\n  data(){\n    return{\n      username: '',\n      validusername:true,\n      password:'',\n      validpassword:true,\n      isloading:false,\n      error: null,\n      mode: 'login',\n    };\n  },\n  computed:{\n    submitButtonCaption(){\n      if(this.mode === 'Login'){\n        return 'Login';\n      }else {\n        return 'Signup';\n      }\n    },\n    // switchModeButtonCaption(){\n    //   if (this.name === 'login'){\n    //     return 'Signup instead';\n    //   } else{\n    //     return 'Login instead';\n    //   }\n    // },\n  },\n  methods:{\n    async submitresult(){\n        this.isloading = true;\n        const actionPaylod = {\n          username: this.username,\n          password: this.password,\n        };\n        try{\n          if (this.mode === 'login'){\n            await this.$store.dispatch('auth/login',actionPaylod);}\n          else{\n            // await this.$store.dispatch('signup', actionPayload); redirect to signup \n          }\n        }catch(err){\n          this.error = err.message || 'Failed to authenticate, try later';\n        }\n        this.isloading= false;\n\n  },\n    // switchAuthMode(){\n    //   if (this.mode)\n    // },\n    forgetpassword(){\n\n    }\n  },\n}\n</script>\n\n<style lang=\"scss\">\n.el-row {\n  margin-bottom: 20px;\n}\n.el-row:last-child {\n  margin-bottom: 0;\n}\n.el-col {\n  border-radius: 4px;\n}\n\n.grid-content {\n  border-radius: 4px;\n  min-height: 36px;\n}\n</style>\n"]},"metadata":{},"sourceType":"module"}