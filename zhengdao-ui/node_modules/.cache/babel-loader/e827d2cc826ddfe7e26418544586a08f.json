{"ast":null,"code":"import _defineProperty from \"/home/little/Documents/music_web/startproj/zhengdao-ui/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";\nimport _regeneratorRuntime from \"/home/little/Documents/music_web/startproj/zhengdao-ui/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"/home/little/Documents/music_web/startproj/zhengdao-ui/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport \"core-js/modules/es.function.name.js\";\nimport axios from 'axios';\nexport default _defineProperty({\n  musicinfo: function musicinfo(context, payload) {\n    return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n      var backapi, musicnumber, errmes;\n      return _regeneratorRuntime().wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              backapi = 'http://127.0.0.1:1943';\n              musicnumber = 4;\n              _context.prev = 2;\n              _context.next = 5;\n              return axios({\n                method: 'get',\n                url: backapi + '/music/' + musicnumber\n              }).then(function (response) {\n                context.commit('setMusic', {\n                  musicid: response.data[0].id,\n                  cover_address: response.data[0].cover_address,\n                  music_address: response.data[0].music_address,\n                  musicname: response.data[0].name,\n                  post_date: response.data[0].post_date,\n                  user_id: response.data[0].user_id\n                }); // console.log(post_date);\n              });\n\n            case 5:\n              errmes = _context.sent;\n              _context.next = 16;\n              break;\n\n            case 8:\n              _context.prev = 8;\n              _context.t0 = _context[\"catch\"](2);\n\n              if (!(_context.t0.message == 'Request failed with status code 401')) {\n                _context.next = 15;\n                break;\n              }\n\n              console.log('called if');\n              throw {\n                message: \"Wrong password or username\",\n                number: 1000\n              };\n\n            case 15:\n              throw _context.t0;\n\n            case 16:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[2, 8]]);\n    }))();\n  }\n}, \"musicinfo\", function musicinfo(context, payload) {\n  return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {\n    var backapi, searchtype, errmes;\n    return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            backapi = 'http://127.0.0.1:1943';\n            searchtype = 4;\n            _context2.prev = 2;\n            _context2.next = 5;\n            return axios({\n              method: 'get',\n              url: backapi + '/listmusic/' + searchtype\n            }).then(function (response) {\n              context.commit('setlistofMusic', {\n                listofMusic: response.data\n              });\n            });\n\n          case 5:\n            errmes = _context2.sent;\n            _context2.next = 16;\n            break;\n\n          case 8:\n            _context2.prev = 8;\n            _context2.t0 = _context2[\"catch\"](2);\n\n            if (!(_context2.t0.message == 'Request failed with status code 401')) {\n              _context2.next = 15;\n              break;\n            }\n\n            console.log('called if');\n            throw {\n              message: \"Wrong password or username\",\n              number: 1000\n            };\n\n          case 15:\n            throw _context2.t0;\n\n          case 16:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2, null, [[2, 8]]);\n  }))();\n}); // }).then((response) => {\n//     context.commit('setUser',{\n//         token: response.data.access_token,\n//         userId: payload.username,\n//     });\n// 0\n// : \n// cover_address\n// : \n// \"/demopicture/example.png\"\n// id\n// : \n// 1\n// music_address\n// : \n// \"/DEMOMUSIC/crimanal.mp3\"\n// name\n// : \n// \"crimanal\"\n// post_date\n// : \n// \"2022-08-17T20:13:19\"\n// user_id\n// : \n// 1\n// [[Prototype]]\n// : \n// Object\n// length\n// : \n// 1\n// [[Prototype]]\n// : \n// Array(0)","map":{"version":3,"names":["axios","musicinfo","context","payload","backapi","musicnumber","method","url","then","response","commit","musicid","data","id","cover_address","music_address","musicname","name","post_date","user_id","errmes","message","console","log","number","searchtype","listofMusic"],"sources":["/home/little/Documents/music_web/startproj/zhengdao-ui/src/store/modules/music/actions.js"],"sourcesContent":["import axios from 'axios';\n\nexport default{\n    async musicinfo(context, payload){\n    const backapi = 'http://127.0.0.1:1943';\n    const musicnumber = 4;\n    try{\n        const errmes =await axios({\n            method: 'get',\n            url: backapi+'/music/'+musicnumber\n        }\n        ).then(function(response){\n            context.commit('setMusic',{\n                musicid : response.data[0].id,\n                cover_address : response.data[0].cover_address,\n                music_address : response.data[0].music_address,\n                musicname : response.data[0].name,\n                post_date : response.data[0].post_date,\n                user_id : response.data[0].user_id,\n            });\n            // console.log(post_date);\n        });\n    }catch(err){\n        if (err.message == 'Request failed with status code 401'){\n            console.log('called if');\n            throw { message : \"Wrong password or username\" , number: 1000};\n        }\n        else {\n            throw err;\n        }\n    }\n    },\n    async musicinfo(context, payload){\n        const backapi = 'http://127.0.0.1:1943';\n        const searchtype = 4;\n        try{\n            const errmes =await axios({\n                method: 'get',\n                url: backapi+'/listmusic/'+searchtype\n            }\n            ).then(function(response){\n\n                context.commit('setlistofMusic',{\n                    listofMusic : response.data,\n                });\n\n            });\n        }catch(err){\n            if (err.message == 'Request failed with status code 401'){\n                console.log('called if');\n                throw { message : \"Wrong password or username\" , number: 1000};\n            }\n            else {\n                throw err;\n            }\n        }\n    },\n}\n         \n        // }).then((response) => {\n        //     context.commit('setUser',{\n        //         token: response.data.access_token,\n        //         userId: payload.username,\n        //     });\n        // 0\n        // : \n        // cover_address\n        // : \n        // \"/demopicture/example.png\"\n        // id\n        // : \n        // 1\n        // music_address\n        // : \n        // \"/DEMOMUSIC/crimanal.mp3\"\n        // name\n        // : \n        // \"crimanal\"\n        // post_date\n        // : \n        // \"2022-08-17T20:13:19\"\n        // user_id\n        // : \n        // 1\n        // [[Prototype]]\n        // : \n        // Object\n        // length\n        // : \n        // 1\n        // [[Prototype]]\n        // : \n        // Array(0)"],"mappings":";;;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AAEA;EACUC,SADV,qBACoBC,OADpB,EAC6BC,OAD7B,EACqC;IAAA;MAAA;MAAA;QAAA;UAAA;YAAA;cAC3BC,OAD2B,GACjB,uBADiB;cAE3BC,WAF2B,GAEb,CAFa;cAAA;cAAA;cAAA,OAITL,KAAK,CAAC;gBACtBM,MAAM,EAAE,KADc;gBAEtBC,GAAG,EAAEH,OAAO,GAAC,SAAR,GAAkBC;cAFD,CAAD,CAAL,CAIlBG,IAJkB,CAIb,UAASC,QAAT,EAAkB;gBACrBP,OAAO,CAACQ,MAAR,CAAe,UAAf,EAA0B;kBACtBC,OAAO,EAAGF,QAAQ,CAACG,IAAT,CAAc,CAAd,EAAiBC,EADL;kBAEtBC,aAAa,EAAGL,QAAQ,CAACG,IAAT,CAAc,CAAd,EAAiBE,aAFX;kBAGtBC,aAAa,EAAGN,QAAQ,CAACG,IAAT,CAAc,CAAd,EAAiBG,aAHX;kBAItBC,SAAS,EAAGP,QAAQ,CAACG,IAAT,CAAc,CAAd,EAAiBK,IAJP;kBAKtBC,SAAS,EAAGT,QAAQ,CAACG,IAAT,CAAc,CAAd,EAAiBM,SALP;kBAMtBC,OAAO,EAAGV,QAAQ,CAACG,IAAT,CAAc,CAAd,EAAiBO;gBANL,CAA1B,EADqB,CASrB;cACH,CAdmB,CAJS;;YAAA;cAIvBC,MAJuB;cAAA;cAAA;;YAAA;cAAA;cAAA;;cAAA,MAoBzB,YAAIC,OAAJ,IAAe,qCApBU;gBAAA;gBAAA;cAAA;;cAqBzBC,OAAO,CAACC,GAAR,CAAY,WAAZ;cArByB,MAsBnB;gBAAEF,OAAO,EAAG,4BAAZ;gBAA2CG,MAAM,EAAE;cAAnD,CAtBmB;;YAAA;cAAA;;YAAA;YAAA;cAAA;UAAA;QAAA;MAAA;IAAA;EA4BhC;AA7BL,mCA8BoBtB,OA9BpB,EA8B6BC,OA9B7B,EA8BqC;EAAA;IAAA;IAAA;MAAA;QAAA;UAAA;YACvBC,OADuB,GACb,uBADa;YAEvBqB,UAFuB,GAEV,CAFU;YAAA;YAAA;YAAA,OAILzB,KAAK,CAAC;cACtBM,MAAM,EAAE,KADc;cAEtBC,GAAG,EAAEH,OAAO,GAAC,aAAR,GAAsBqB;YAFL,CAAD,CAAL,CAIlBjB,IAJkB,CAIb,UAASC,QAAT,EAAkB;cAErBP,OAAO,CAACQ,MAAR,CAAe,gBAAf,EAAgC;gBAC5BgB,WAAW,EAAGjB,QAAQ,CAACG;cADK,CAAhC;YAIH,CAVmB,CAJK;;UAAA;YAInBQ,MAJmB;YAAA;YAAA;;UAAA;YAAA;YAAA;;YAAA,MAgBrB,aAAIC,OAAJ,IAAe,qCAhBM;cAAA;cAAA;YAAA;;YAiBrBC,OAAO,CAACC,GAAR,CAAY,WAAZ;YAjBqB,MAkBf;cAAEF,OAAO,EAAG,4BAAZ;cAA2CG,MAAM,EAAE;YAAnD,CAlBe;;UAAA;YAAA;;UAAA;UAAA;YAAA;QAAA;MAAA;IAAA;EAAA;AAwBhC,CAtDL,E,CAyDQ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA"},"metadata":{},"sourceType":"module"}