{"ast":null,"code":"import _regeneratorRuntime from \"/home/little/Documents/music_web/startproj/zhengdao-ui/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"/home/little/Documents/music_web/startproj/zhengdao-ui/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport \"core-js/modules/es.function.name.js\";\nimport { useStore } from 'vuex';\nimport { inject } from 'vue';\nimport { computed } from 'vue';\nimport { mapGetters } from 'vuex';\nexport default {\n  inject: ['musicid'],\n  setup: function setup() {\n    return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n      var store, trylist, audiolist;\n      return _regeneratorRuntime().wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              store = useStore();\n              _context.next = 3;\n              return store.dispatch('music/musicinfo', inject('musicid'));\n\n            case 3:\n              _context.next = 5;\n              return store.getters['music/listofmusicinfo'];\n\n            case 5:\n              trylist = _context.sent;\n              audiolist = {\n                name: trylist[0].name,\n                url: 'http://127.0.0.1:1943/enjoymusic/' + inject('musicid')\n              }; // useStore().dispatch('music/musicinfo', inject('musicid')).then(\n              // useStore().getters['music/listofmusicinfo']\n              // )\n              // useStore().dispatch('music/musicinfo', inject('musicid')).then(\n              //  computed(()=> useStore().getters['music/listofmusicinfo'])\n              // useStore().getters['music/listofmusicinfo']\n              // )\n              // console.log( useStore().getters('music/listofmusicinfo'))\n              // console.log(useStore().getters[music/listofmusicinfo])\n\n              return _context.abrupt(\"return\", {\n                trylist: trylist,\n                audiolist: audiolist // trylist: useStore().getters['music/listofmusicinfo']\n                // trylist:[inject('musicid')]\n                // return{\n                // trylist: computed(()=>store.getters['music/listofmusicinfo'])\n                // }\n\n              });\n\n            case 8:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }))();\n  },\n  data: function data() {\n    return {\n      currentAudioName: '',\n      audioList: [{\n        name: 'test',\n        url: \"test\"\n      }],\n      // audioList:[],\n      // TryList:null,\n      otherList: [],\n      dataready: false\n    };\n  },\n  // beforeRouteEnter(to, from,next){\n  //     next(vm=>vm.setData())\n  // },\n  methods: {\n    handleBeforePlay: function handleBeforePlay(next) {\n      // There are a few things you can do here...\n      this.currentAudioName = this.audioList[this.$refs.audioPlayer.currentPlayIndex].name;\n      next();\n    } //   async setData(){\n    //     console.log('callsetdate')\n    //     await  this.$store.dispatch('music/musicinfo',this.musicid);\n    //     this.TryList = await this.$store.getters['music/listofmusicinfo'];\n    //   }\n\n  },\n  created: function created() {// console.log('injected data '+this.trylist);\n    // await  this.$store.dispatch('music/musicinfo',this.musicid);\n    // console.log(this.$store.getters['music/listofmusicinfo']);\n    // this.TryList = await this.$store.getters['music/listofmusicinfo'];\n    // this.audioList[0] =  {\n    //     name:this.TryList[0].name,\n    //     url:'http://127.0.0.1:1943/enjoymusic/'+this.TryList[0].id ,\n    // };\n    // console.log(this.musicid)\n    // console.log(...mapGetters(['MusicUserid',]))\n\n    return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {\n      return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }))();\n  }\n};","map":{"version":3,"mappings":";;;AAiBE,SAAQA,QAAR,QAAuB,MAAvB;AACA,SAAQC,MAAR,QAAqB,KAArB;AACA,SAAQC,QAAR,QAAuB,KAAvB;AACA,SAAQC,UAAR,QAAyB,MAAzB;AACA,eAAe;EACbF,MAAM,EAAC,CAAC,SAAD,CADM;EAEPG,KAFO,mBAEC;IAAA;MAAA;MAAA;QAAA;UAAA;YAAA;cACJC,KADI,GACIL,QAAQ,EADZ;cAAA;cAAA,OAEJK,KAAK,CAACC,QAAN,CAAe,iBAAf,EAAkCL,MAAM,CAAC,SAAD,CAAxC,CAFI;;YAAA;cAAA;cAAA,OAGYI,KAAK,CAACE,OAAN,CAAc,uBAAd,CAHZ;;YAAA;cAGJC,OAHI;cAIJC,SAJI,GAIQ;gBACdC,IAAI,EAACF,OAAO,CAAC,CAAD,CAAP,CAAWE,IADF;gBAEdC,GAAG,EAAC,sCAAoCV,MAAM,CAAC,SAAD;cAFhC,CAJR,EAQV;cACA;cACA;cAEA;cACA;cACI;cACJ;cAEA;cACA;;cAlBU,iCAmBJ;gBACFO,OAAO,EAAPA,OADE;gBAEFC,SAAQ,EAARA,SAFE,CAGF;gBACA;gBACA;gBACA;gBACJ;;cAPM,CAnBI;;YAAA;YAAA;cAAA;UAAA;QAAA;MAAA;IAAA;EA4Bb,CA9BY;EA+BbG,IA/Ba,kBA+BN;IACL,OAAO;MACLC,gBAAgB,EAAE,EADb;MAELC,SAAS,EAAE,CACT;QACEJ,IAAI,EAAE,MADR;QAEEC,GAAG,EAAE;MAFP,CADS,CAFN;MAQL;MACA;MACAI,SAAS,EAAC,EAVL;MAWLC,SAAS,EAAC;IAXL,CAAP;EAaD,CA7CY;EA8Cb;EACA;EACA;EACAC,OAAO,EAAE;IACPC,gBADO,4BACUC,IADV,EACgB;MACrB;MACA,KAAKN,gBAAL,GAAwB,KAAKC,SAAL,CAAe,KAAKM,KAAL,CAAWC,WAAX,CAAuBC,gBAAtC,EAAwDZ,IAAhF;MACAS,IAAI;IACL,CALM,CAOT;IACA;IACA;IACA;IAEA;;EAZS,CAjDI;EAgEPI,OAhEO,qBAgEE,CACX;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;;IAVW;MAAA;QAAA;UAAA;YAAA;YAAA;cAAA;UAAA;QAAA;MAAA;IAAA;EAYZ;AA5EU,CAAf","names":["useStore","inject","computed","mapGetters","setup","store","dispatch","getters","trylist","audiolist","name","url","data","currentAudioName","audioList","otherList","dataready","methods","handleBeforePlay","next","$refs","audioPlayer","currentPlayIndex","created"],"sourceRoot":"","sources":["/home/little/Documents/music_web/startproj/zhengdao-ui/src/components/function/musicaudio.vue"],"sourcesContent":["<template>\n    <!-- <div class=\"about\">\n      <h1>Not Found</h1>\n    </div> -->\n    \n        <div>\n        <!-- {{ currentAudioName || this.audioList[0].name }}\n        <audio-player\n            ref=\"audioPlayer\"\n            :audio-list=\"audioList.map(elm => elm.url)\"\n            :before-play=\"handleBeforePlay\"\n            theme-color=\"#ffff\"\n        /> -->\n        </div>\n    {{audiolist[0].name}}\n</template>\n <script> \n  import {useStore} from 'vuex'\n  import {inject} from 'vue'\n  import {computed} from 'vue'\n  import {mapGetters} from 'vuex'\n  export default {\n    inject:['musicid'],\n    async setup (){\n        const store = useStore()\n        await store.dispatch('music/musicinfo', inject('musicid'))\n        const trylist = await store.getters['music/listofmusicinfo']\n        const audiolist = {\n            name:trylist[0].name,\n            url:'http://127.0.0.1:1943/enjoymusic/'+inject('musicid')\n        }\n        // useStore().dispatch('music/musicinfo', inject('musicid')).then(\n        // useStore().getters['music/listofmusicinfo']\n        // )\n\n        // useStore().dispatch('music/musicinfo', inject('musicid')).then(\n        //  computed(()=> useStore().getters['music/listofmusicinfo'])\n            // useStore().getters['music/listofmusicinfo']\n        // )\n        \n        // console.log( useStore().getters('music/listofmusicinfo'))\n        // console.log(useStore().getters[music/listofmusicinfo])\n        return{\n            trylist,\n            audiolist\n            // trylist: useStore().getters['music/listofmusicinfo']\n            // trylist:[inject('musicid')]\n            // return{\n            // trylist: computed(()=>store.getters['music/listofmusicinfo'])\n        // }\n        }\n    },\n    data() {\n      return {\n        currentAudioName: '',\n        audioList: [\n          {\n            name: 'test',\n            url: \"test\"\n          },\n        ],\n        // audioList:[],\n        // TryList:null,\n        otherList:[],\n        dataready:false,\n      }\n    },\n    // beforeRouteEnter(to, from,next){\n    //     next(vm=>vm.setData())\n    // },\n    methods: {\n      handleBeforePlay(next) {\n        // There are a few things you can do here...\n        this.currentAudioName = this.audioList[this.$refs.audioPlayer.currentPlayIndex].name\n        next() \n      },\n    \n    //   async setData(){\n    //     console.log('callsetdate')\n    //     await  this.$store.dispatch('music/musicinfo',this.musicid);\n    //     this.TryList = await this.$store.getters['music/listofmusicinfo'];\n\n    //   }\n    },\n    \n    async created(){\n        // console.log('injected data '+this.trylist);\n        // await  this.$store.dispatch('music/musicinfo',this.musicid);\n        // console.log(this.$store.getters['music/listofmusicinfo']);\n        // this.TryList = await this.$store.getters['music/listofmusicinfo'];\n        // this.audioList[0] =  {\n        //     name:this.TryList[0].name,\n        //     url:'http://127.0.0.1:1943/enjoymusic/'+this.TryList[0].id ,\n        // };\n        // console.log(this.musicid)\n        // console.log(...mapGetters(['MusicUserid',]))\n        \n      },\n    \n  }\n  </script>"]},"metadata":{},"sourceType":"module"}