{"ast":null,"code":"import _regeneratorRuntime from \"/home/little/Documents/music_web/startproj/zhengdao-ui/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"/home/little/Documents/music_web/startproj/zhengdao-ui/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport axios from 'axios';\nexport default {\n  // async musicinfo(context, payload){\n  // const backapi = 'http://127.0.0.1:1943';\n  // const musicnumber = payload;\n  // try{\n  //     const errmes =await axios({\n  //         method: 'get',\n  //         url: backapi+'/music/'+musicnumber\n  //     }\n  //     ).then(function(response){\n  //         context.commit('setMusic',{\n  //             musicid : response.data[0].id,\n  //             cover_address : response.data[0].cover_address,\n  //             music_address : response.data[0].music_address,\n  //             musicname : response.data[0].name,\n  //             post_date : response.data[0].post_date,\n  //             user_id : response.data[0].user_id,\n  //         });\n  //     });\n  // }catch(err){\n  //     if (err.message == 'Request failed with status code 401'){\n  //         console.log('called if');\n  //         throw { message : \"Wrong password or username\" , number: 1000};\n  //     }\n  //     else {\n  //         throw err;\n  //     }\n  // }\n  // },\n  musicinfo: function musicinfo(context, payload) {\n    return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n      var backapi, musicnumber, errmes;\n      return _regeneratorRuntime().wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              backapi = 'http://127.0.0.1:1943';\n              musicnumber = payload;\n              _context.prev = 2;\n              _context.next = 5;\n              return axios({\n                method: 'get',\n                url: backapi + '/music/' + musicnumber\n              }).then(function (response) {\n                context.commit('setlistofmusicinfo', {\n                  listofmusicinfo: response.data\n                });\n              });\n\n            case 5:\n              errmes = _context.sent;\n              _context.next = 16;\n              break;\n\n            case 8:\n              _context.prev = 8;\n              _context.t0 = _context[\"catch\"](2);\n\n              if (!(_context.t0.message == 'Request failed with status code 401')) {\n                _context.next = 15;\n                break;\n              }\n\n              console.log('called if');\n              throw {\n                message: \"Wrong password or username\",\n                number: 1000\n              };\n\n            case 15:\n              throw _context.t0;\n\n            case 16:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[2, 8]]);\n    }))();\n  },\n  musiclyrics: function musiclyrics(context, payload) {\n    return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {\n      var backapi, musicnumber, errmes;\n      return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              console.log('commit lyrics');\n              backapi = 'http://127.0.0.1:1943';\n              musicnumber = payload;\n              _context2.prev = 3;\n              _context2.next = 6;\n              return axios({\n                method: 'get',\n                url: backapi + '/showlyrics/' + musicnumber\n              }).then(function (response) {\n                context.commit('setmusiclyrics', {\n                  musiclyrics: response.data\n                });\n              });\n\n            case 6:\n              errmes = _context2.sent;\n              _context2.next = 17;\n              break;\n\n            case 9:\n              _context2.prev = 9;\n              _context2.t0 = _context2[\"catch\"](3);\n\n              if (!(_context2.t0.message == 'Request failed with status code 401')) {\n                _context2.next = 16;\n                break;\n              }\n\n              console.log('called if');\n              throw {\n                message: \"Wrong password or username\",\n                number: 1000\n              };\n\n            case 16:\n              throw _context2.t0;\n\n            case 17:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2, null, [[3, 9]]);\n    }))();\n  },\n  musiclistinfo: function musiclistinfo(context, payload) {\n    return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee3() {\n      var backapi, searchtype, errmes;\n      return _regeneratorRuntime().wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              backapi = 'http://127.0.0.1:1943';\n              searchtype = 4;\n              _context3.prev = 2;\n              _context3.next = 5;\n              return axios({\n                method: 'get',\n                url: backapi + '/listmusics/' + searchtype\n              }).then(function (response) {\n                context.commit('setlistofMusic', {\n                  listofMusic: response.data\n                });\n              });\n\n            case 5:\n              errmes = _context3.sent;\n              _context3.next = 16;\n              break;\n\n            case 8:\n              _context3.prev = 8;\n              _context3.t0 = _context3[\"catch\"](2);\n\n              if (!(_context3.t0.message == 'Request failed with status code 401')) {\n                _context3.next = 15;\n                break;\n              }\n\n              console.log('called if');\n              throw {\n                message: \"Wrong password or username\",\n                number: 1000\n              };\n\n            case 15:\n              throw _context3.t0;\n\n            case 16:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3, null, [[2, 8]]);\n    }))();\n  },\n  setmusicscore: function setmusicscore(context, payload) {\n    return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee4() {\n      var url, data;\n      return _regeneratorRuntime().wrap(function _callee4$(_context4) {\n        while (1) {\n          switch (_context4.prev = _context4.next) {\n            case 0:\n              console.log(payload.password);\n              url = 'http://127.0.0.1:1943/ratemusic';\n              data = {\n                musicid: payload.musicid,\n                musicscore: payload.musicscore\n              };\n              axios({\n                method: 'post',\n                url: url,\n                data: data,\n                headers: {\n                  Accept: \"application/json\",\n                  \"Content-Type\": \"application/json;charset=UTF-8\"\n                }\n              }).then(function (response) {\n                console.log(response);\n              }, function (error) {\n                console.log(error);\n              });\n\n            case 4:\n            case \"end\":\n              return _context4.stop();\n          }\n        }\n      }, _callee4);\n    }))();\n  }\n};","map":{"version":3,"names":["axios","musicinfo","context","payload","backapi","musicnumber","method","url","then","response","commit","listofmusicinfo","data","errmes","message","console","log","number","musiclyrics","musiclistinfo","searchtype","listofMusic","setmusicscore","password","musicid","musicscore","headers","Accept","error"],"sources":["/home/little/Documents/music_web/startproj/zhengdao-ui/src/store/modules/music/actions.js"],"sourcesContent":["import axios from 'axios';\n\nexport default{\n    // async musicinfo(context, payload){\n    // const backapi = 'http://127.0.0.1:1943';\n    // const musicnumber = payload;\n    // try{\n    //     const errmes =await axios({\n    //         method: 'get',\n    //         url: backapi+'/music/'+musicnumber\n    //     }\n    //     ).then(function(response){\n    //         context.commit('setMusic',{\n    //             musicid : response.data[0].id,\n    //             cover_address : response.data[0].cover_address,\n    //             music_address : response.data[0].music_address,\n    //             musicname : response.data[0].name,\n    //             post_date : response.data[0].post_date,\n    //             user_id : response.data[0].user_id,\n    //         });\n    //     });\n    // }catch(err){\n    //     if (err.message == 'Request failed with status code 401'){\n    //         console.log('called if');\n    //         throw { message : \"Wrong password or username\" , number: 1000};\n    //     }\n    //     else {\n    //         throw err;\n    //     }\n    // }\n    // },\n    async musicinfo(context, payload){\n        const backapi = 'http://127.0.0.1:1943';\n        const musicnumber = payload;\n        try{\n            const errmes =await axios({\n                method: 'get',\n                url: backapi+'/music/'+musicnumber\n            }\n            ).then(function(response){\n                context.commit('setlistofmusicinfo',{\n                    listofmusicinfo : response.data,\n                    \n                });\n            });\n        }catch(err){\n            if (err.message == 'Request failed with status code 401'){\n                console.log('called if');\n                throw { message : \"Wrong password or username\" , number: 1000};\n            }\n            else {\n                throw err;\n            }\n        }\n    },\n    async musiclyrics(context, payload){\n        console.log('commit lyrics');\n        const backapi = 'http://127.0.0.1:1943';\n        const musicnumber = payload;\n        try{\n            const errmes =await axios({\n                method: 'get',\n                url: backapi+'/showlyrics/'+musicnumber\n            }\n            ).then(function(response){\n                context.commit('setmusiclyrics',{\n                    musiclyrics : response.data,\n                    \n                });\n            });\n        }catch(err){\n            if (err.message == 'Request failed with status code 401'){\n                console.log('called if');\n                throw { message : \"Wrong password or username\" , number: 1000};\n            }\n            else {\n                throw err;\n            }\n        }\n    \n    },\n    async musiclistinfo(context, payload){\n        const backapi = 'http://127.0.0.1:1943';\n        const searchtype = 4;\n        try{\n            const errmes =await axios({\n                method: 'get',\n                url: backapi+'/listmusics/'+searchtype\n            }\n            ).then(function(response){\n\n                context.commit('setlistofMusic',{\n                    listofMusic : response.data,\n                });\n\n            });\n        }catch(err){\n            if (err.message == 'Request failed with status code 401'){\n                console.log('called if');\n                throw { message : \"Wrong password or username\" , number: 1000};\n            }\n            else {\n                throw err;\n            }\n        }\n    },\n    async setmusicscore(context, payload){\n        console.log(payload.password);\n        const url = 'http://127.0.0.1:1943/ratemusic'\n        const data ={\n            musicid: payload.musicid,\n            musicscore: payload.musicscore,\n        }\n        axios({\n            method: 'post',\n            url: url,\n            data:data,\n            headers: {\n                Accept: \"application/json\",\n                \"Content-Type\": \"application/json;charset=UTF-8\",\n              },\n         \n        }).then((response) => {\n            console.log(response);\n        }, (error) => {\n            console.log(error);\n        });\n   \n    },\n}\n         "],"mappings":"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"},"metadata":{},"sourceType":"module"}