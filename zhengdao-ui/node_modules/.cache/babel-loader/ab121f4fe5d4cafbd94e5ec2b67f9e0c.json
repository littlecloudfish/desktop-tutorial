{"ast":null,"code":"import _defineProperty from \"/home/little/Documents/music_web/startproj/zhengdao-ui/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";\nimport _objectSpread from \"/home/little/Documents/music_web/startproj/zhengdao-ui/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport { createVNode } from 'vue';\nimport '../components/index.mjs';\nimport { oppositeOrderMap, SortOrder, Alignment } from '../constants.mjs';\nimport { placeholderSign } from '../private.mjs';\nimport { enforceUnit, componentToSlot, tryCall } from '../utils.mjs';\nimport HeaderCell from '../components/header-cell.mjs';\nimport SortIcon from '../components/sort-icon.mjs';\n\nvar HeaderCellRenderer = function HeaderCellRenderer(props, _ref) {\n  var slots = _ref.slots;\n  var column = props.column,\n      ns = props.ns,\n      style = props.style,\n      onColumnSorted = props.onColumnSorted;\n  var cellStyle = enforceUnit(style);\n\n  if (column.placeholderSign === placeholderSign) {\n    return createVNode(\"div\", {\n      \"class\": ns.em(\"header-row-cell\", \"placeholder\"),\n      \"style\": cellStyle\n    }, null);\n  }\n\n  var headerCellRenderer = column.headerCellRenderer,\n      headerClass = column.headerClass,\n      sortable = column.sortable;\n\n  var cellProps = _objectSpread(_objectSpread({}, props), {}, {\n    \"class\": ns.e(\"header-cell-text\")\n  });\n\n  var cellRenderer = componentToSlot(headerCellRenderer) || slots[\"default\"] || function (props2) {\n    return createVNode(HeaderCell, props2, null);\n  };\n\n  var Cell = cellRenderer(cellProps);\n  var sortBy = props.sortBy,\n      sortState = props.sortState,\n      headerCellProps = props.headerCellProps;\n  var sorting, sortOrder;\n\n  if (sortState) {\n    var order = sortState[column.key];\n    sorting = Boolean(oppositeOrderMap[order]);\n    sortOrder = sorting ? order : SortOrder.ASC;\n  } else {\n    sorting = column.key === sortBy.key;\n    sortOrder = sorting ? sortBy.order : SortOrder.ASC;\n  }\n\n  var cellKls = [ns.e(\"header-cell\"), tryCall(headerClass, props, \"\"), column.align === Alignment.CENTER && ns.is(\"align-center\"), column.align === Alignment.RIGHT && ns.is(\"align-right\"), sortable && ns.is(\"sortable\")];\n\n  var cellWrapperProps = _objectSpread(_objectSpread({}, tryCall(headerCellProps, props)), {}, _defineProperty({\n    onClick: column.sortable ? onColumnSorted : void 0,\n    \"class\": cellKls,\n    style: cellStyle\n  }, \"data-key\", column.key));\n\n  return createVNode(\"div\", cellWrapperProps, [Cell, sortable && createVNode(SortIcon, {\n    \"class\": [ns.e(\"sort-icon\"), sorting && ns.is(\"sorting\")],\n    \"sortOrder\": sortOrder\n  }, null)]);\n};\n\nexport { HeaderCellRenderer as default };","map":{"version":3,"mappings":";;;;;;;;;;AAIA,yBAA0BA,SAA1BC,kBAA0BD,cAepBC;EAAAA;EAEFC,IACCC,MADDD,GAEIE,KAFJF,CACCC,MADDD;EAAAA,IAEIG,EAFJH,GAEIE,KAFJF,CAEIG,EAFJH;EAAAA,IAEMC,KAFND,GAEIE,KAFJF,CAEMC,KAFND;EAAAA,IAEcG,cAFdH,GAEIE,KAFJF,CAEcG,cAFdH;EAEyBI;;EAArB,IAAwCF,MAA9C,gBAA8CA,KAA9CG,eAAM,EAAN;IAEA,OAAeC,WAAc;sDAAA;MAEzBL;IAFyB,GAG3B,IAH2B,CAA7B;EAGE;;MAAAM,qBAKIN,OALJM;MAGDC,cAEKP,OAFLO;iBAEKP;;MAAAQ;IAAmCC;EAAnC;;EAEN;IAAA;EAAA;;EACF;EACA,aAEER,KAFF;EAAA,IAEES,SAFF,GAEET,KAFF,CAEES,SAFF;EAAA,IAIIC,eAJJ,GAEEV,KAFF,CAIIU,eAJJ;;;EAOE,eAAkB;;IAKlBC,OAAU,UAAe,iBAAzB,OAAyB,CAAzB;IAEAC;EACF,CARE,MAQF;IACAD;;EACQ;;MAAAE;;MAAAC,mDAAqBC,+BAArB;IAAAC,OAAN,2CAAM;IAEFL,gBAFE;;EAAA,GAGN,UAHM,EAGSZ,UAHT;;EAKJY,kBAAiB,CAACM,KAAD,EAACA,gBAAD,EAAjB;IACAL,SAAS,GAAGD,CAAOO,CAAV,CAAU,WAAV,GAAqBC,WAAUC,EAAxC,GAAwCA,CAAxC,SAAwCA,CAA/B,CADT;IAEK;EAFL,GAGAT,IAHA,EAAiB,CAAjBA;CAvDJ","names":["enforceUnit","HeaderCellRenderer","slots","column","props","ns","onColumnSorted","placeholderSign","_createVNode","headerCellRenderer","headerClass","cellProps","sortable","sortState","class","sorting","sortOrder","cellKls","cellWrapperProps","headerCellProps","onClick","oppositeOrderMap","e","SortOrder","ASC"],"sources":["../../../../../../../packages/components/table-v2/src/renderers/header-cell.tsx"],"sourcesContent":["import { HeaderCell, SortIcon } from '../components'\n// import ColumnResizer from '../table-column-resizer'\nimport { Alignment, SortOrder, oppositeOrderMap } from '../constants'\nimport { placeholderSign } from '../private'\nimport { componentToSlot, enforceUnit, tryCall } from '../utils'\n\nimport type { FunctionalComponent, UnwrapNestedRefs } from 'vue'\nimport type { UseNamespaceReturn } from '@element-plus/hooks'\nimport type { TableV2HeaderRowCellRendererParams } from '../components'\nimport type { UseTableReturn } from '../use-table'\nimport type { TableV2Props } from '../table'\nimport type { TableV2HeaderCell } from '../header-cell'\n\nexport type HeaderCellRendererProps = TableV2HeaderRowCellRendererParams &\n  UnwrapNestedRefs<Pick<UseTableReturn, 'onColumnSorted'>> &\n  Pick<TableV2Props, 'sortBy' | 'sortState' | 'headerCellProps'> & {\n    ns: UseNamespaceReturn\n  }\n\nconst HeaderCellRenderer: FunctionalComponent<HeaderCellRendererProps> = (\n  props,\n  { slots }\n) => {\n  const { column, ns, style, onColumnSorted } = props\n\n  const cellStyle = enforceUnit(style)\n\n  if (column.placeholderSign === placeholderSign) {\n    return (\n      <div class={ns.em('header-row-cell', 'placeholder')} style={cellStyle} />\n    )\n  }\n\n  const { headerCellRenderer, headerClass, sortable } = column\n\n  /**\n   * render Cell children\n   */\n\n  const cellProps = {\n    ...props,\n    class: ns.e('header-cell-text'),\n  }\n\n  const cellRenderer =\n    componentToSlot<typeof cellProps>(headerCellRenderer) ||\n    slots.default ||\n    ((props: TableV2HeaderCell) => <HeaderCell {...props} />)\n\n  const Cell = cellRenderer(cellProps)\n\n  /**\n   * Render cell container and sort indicator\n   */\n  const { sortBy, sortState, headerCellProps } = props\n\n  let sorting: boolean, sortOrder: SortOrder\n  if (sortState) {\n    const order = sortState[column.key]\n    sorting = Boolean(oppositeOrderMap[order])\n    sortOrder = sorting ? order : SortOrder.ASC\n  } else {\n    sorting = column.key === sortBy.key\n    sortOrder = sorting ? sortBy.order : SortOrder.ASC\n  }\n\n  const cellKls = [\n    ns.e('header-cell'),\n    tryCall(headerClass, props, ''),\n    column.align === Alignment.CENTER && ns.is('align-center'),\n    column.align === Alignment.RIGHT && ns.is('align-right'),\n    sortable && ns.is('sortable'),\n  ]\n\n  const cellWrapperProps = {\n    ...tryCall(headerCellProps, props),\n    onClick: column.sortable ? onColumnSorted : undefined,\n    class: cellKls,\n    style: cellStyle,\n    ['data-key']: column.key,\n  }\n\n  // For now we don't deliver resizable column feature since it has some UX issue.\n  return (\n    <div {...cellWrapperProps}>\n      {Cell}\n\n      {sortable && (\n        <SortIcon\n          class={[ns.e('sort-icon'), sorting && ns.is('sorting')]}\n          sortOrder={sortOrder}\n        />\n      )}\n    </div>\n  )\n}\n\nexport default HeaderCellRenderer\nexport type HeaderCellSlotProps = HeaderCellRendererProps & { class: string }\n"]},"metadata":{},"sourceType":"module"}