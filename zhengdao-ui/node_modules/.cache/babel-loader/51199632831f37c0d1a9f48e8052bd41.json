{"ast":null,"code":"import _regeneratorRuntime from \"/home/little/Documents/music_web/startproj/zhengdao-ui/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"/home/little/Documents/music_web/startproj/zhengdao-ui/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport \"core-js/modules/es.function.name.js\";\nimport axios from 'axios';\nexport default {\n  data: function data() {\n    return {\n      musicname: '',\n      validmusicname: true,\n      musiclink: '',\n      validmusiclink: true,\n      musiclyrics: '',\n      validelyrics: true,\n      musicperformer: '',\n      validmusicperformer: true,\n      releasedate: '',\n      error: null,\n      value1: null\n    };\n  },\n  methods: {\n    // async submitresult(){\n    //   const fd = new FormData();\n    //   fd.append('pic', this.selectedFile, this.selectedFile.name)\n    //   fd.append('mp3', this.musicfile, this.musicfile.name)\n    //   try{\n    //     await this.$store.dispatch('request/uploadmusic',fd);\n    //   }catch(err){\n    //     this.error = err.message || \"Fail to enter try again\";\n    //   };\n    submitresult: function submitresult() {\n      var _this = this;\n\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n        var fd;\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                fd = new FormData();\n                fd.append('pic', _this.selectedFile, _this.selectedFile.name);\n                fd.append('mp3', _this.musicfile, _this.musicfile.name);\n                fd.append('musicname', _this.musicname);\n                fd.append('releasedate', _this.value1);\n                _context.prev = 5;\n                _context.next = 8;\n                return _this.$store.dispatch('request/uploadmusic', fd);\n\n              case 8:\n                _context.next = 13;\n                break;\n\n              case 10:\n                _context.prev = 10;\n                _context.t0 = _context[\"catch\"](5);\n                _this.error = _context.t0.message || \"Fail to enter try again\";\n\n              case 13:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, null, [[5, 10]]);\n      }))();\n    },\n    onFileSelected: function onFileSelected(event) {\n      this.selectedFile = event.target.files[0];\n    },\n    onMusicFileSelected: function onMusicFileSelected(event) {\n      this.musicfile = event.target.files[0]; //not sure 0 or 1\n    }\n  }\n};","map":{"version":3,"mappings":";;;AAmGE,OAAOA,KAAP,MAAkB,OAAlB;AAEA,eAAc;EACZC,IADY,kBACN;IACJ,OAAM;MACJC,SAAS,EAAE,EADP;MAEJC,cAAc,EAAC,IAFX;MAGJC,SAAS,EAAC,EAHN;MAIJC,cAAc,EAAC,IAJX;MAKJC,WAAW,EAAC,EALR;MAMJC,YAAY,EAAC,IANT;MAOJC,cAAc,EAAC,EAPX;MAQJC,mBAAmB,EAAC,IARhB;MASJC,WAAW,EAAC,EATR;MAUJC,KAAK,EAAE,IAVH;MAWJC,MAAM,EAAE;IAXJ,CAAN;EAaD,CAfW;EAgBZC,OAAO,EAAC;IACN;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACMC,YAVA,0BAUc;MAAA;;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBACVC,EADU,GACL,IAAIC,QAAJ,EADK;gBAEhBD,EAAE,CAACE,MAAH,CAAU,KAAV,EAAiB,KAAI,CAACC,YAAtB,EAAoC,KAAI,CAACA,YAAL,CAAkBC,IAAtD;gBACAJ,EAAE,CAACE,MAAH,CAAU,KAAV,EAAiB,KAAI,CAACG,SAAtB,EAAiC,KAAI,CAACA,SAAL,CAAeD,IAAhD;gBACAJ,EAAE,CAACE,MAAH,CAAU,WAAV,EAAsB,KAAI,CAACf,SAA3B;gBACAa,EAAE,CAACE,MAAH,CAAU,aAAV,EAAwB,KAAI,CAACL,MAA7B;gBALgB;gBAAA;gBAAA,OAOR,KAAI,CAACS,MAAL,CAAYC,QAAZ,CAAqB,qBAArB,EAA2CP,EAA3C,CAPQ;;cAAA;gBAAA;gBAAA;;cAAA;gBAAA;gBAAA;gBASd,KAAI,CAACJ,KAAL,GAAa,YAAIY,OAAJ,IAAe,yBAA5B;;cATc;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAWnB,CArBK;IAsBNC,cAtBM,0BAsBSC,KAtBT,EAsBe;MACb,KAAKP,YAAL,GAAoBO,KAAK,CAACC,MAAN,CAAaC,KAAb,CAAmB,CAAnB,CAApB;IACH,CAxBC;IAyBNC,mBAzBM,+BAyBcH,KAzBd,EAyBoB;MACtB,KAAKL,SAAL,GAAiBK,KAAK,CAACC,MAAN,CAAaC,KAAb,CAAmB,CAAnB,CAAjB,CADsB,CACkB;IAC3C;EA3BK;AAhBI,CAAd","names":["axios","data","musicname","validmusicname","musiclink","validmusiclink","musiclyrics","validelyrics","musicperformer","validmusicperformer","releasedate","error","value1","methods","submitresult","fd","FormData","append","selectedFile","name","musicfile","$store","dispatch","message","onFileSelected","event","target","files","onMusicFileSelected"],"sourceRoot":"","sources":["/home/little/Documents/music_web/startproj/zhengdao-ui/src/components/function/uploadui.vue"],"sourcesContent":["<template>\n    <h2>Upload Music</h2>\n    <form>\n      <div>\n        <el-row>\n          <el-col :span=\"24\">Input Music Name<div class=\"grid-content ep-bg-purple-dark\" /></el-col>\n        \n          <el-col :span=\"20\">\n              <el-input v-model.trim=\"musicname\" placeholder=\"Please input Music Name\" />\n          <div class=\"grid-content ep-bg-purple-dark\" /></el-col>\n        </el-row>\n      </div>\n      <!-- <div>\n        <el-row>\n          <el-col :span=\"24\">Input Music Link<div class=\"grid-content ep-bg-purple-dark\" /></el-col>\n          <el-col :span=\"20\">\n              <el-input v-model=\"musiclink\" placeholder=\"Please input Music Link\" />\n          <div class=\"grid-content ep-bg-purple-dark\" /></el-col>\n        </el-row>\n      </div>  -->\n         <!-- <el-row>\n          <el-col :span=\"24\">Input Music Performers(DiscordId)<div class=\"grid-content ep-bg-purple-dark\" /></el-col>\n          <el-col :span=\"24\">\n              <el-input v-model=\"musicperformer\" placeholder=\"Please input Performers\" />\n          <div class=\"grid-content ep-bg-purple-dark\" /></el-col>\n        </el-row>\n        <el-row>\n          <el-col :span=\"24\">Input Music Composer(DiscordId)<div class=\"grid-content ep-bg-purple-dark\" /></el-col>\n          <el-col :span=\"24\">\n              <el-input v-model=\"input\" placeholder=\"Please input Composer\" />\n          <div class=\"grid-content ep-bg-purple-dark\" /></el-col>\n        </el-row>\n        <el-row>\n          <el-col :span=\"24\">Input Music Editor(DiscordId)<div class=\"grid-content ep-bg-purple-dark\" /></el-col>\n          <el-col :span=\"24\">\n              <el-input v-model=\"input\" placeholder=\"Please input Editor\" />\n          <div class=\"grid-content ep-bg-purple-dark\" /></el-col>\n        </el-row>\n        <el-row>\n          <el-col :span=\"24\">Input Music Songwriter(DiscordId)<div class=\"grid-content ep-bg-purple-dark\" /></el-col>\n          <el-col :span=\"24\">\n              <el-input v-model=\"input\" placeholder=\"Please input Songwriter\" />\n          <div class=\"grid-content ep-bg-purple-dark\" /></el-col>\n          <el-col :span=\"24\">Input Music Producer(DiscordId)<div class=\"grid-content ep-bg-purple-dark\" /></el-col>\n          <el-col :span=\"24\">\n              <el-input v-model=\"input\" placeholder=\"Please input Producer\" />\n          <div class=\"grid-content ep-bg-purple-dark\" /></el-col>\n        </el-row> -->\n       <div>\n        <el-row>\n          <el-col :span=\"24\">Input Music Release Date<div class=\"grid-content ep-bg-purple-dark\" /></el-col>\n          <!-- <el-col :span=\"20\">\n              <el-input v-model=\"releasedate\" placeholder=\"Please input\" />\n          <div class=\"grid-content ep-bg-purple-dark\" /></el-col> -->\n        <div class=\"demo-date-picker\">\n          <div class=\"block\">\n            <el-date-picker\n              v-model=\"value1\"\n              type=\"date\"\n              placeholder=\"Pick a day\"\n              size=\"large\"\n              format=\"YYYY/MM/DD\"\n              value-format=\"YYYY-MM-DD\"\n            />\n          </div>\n        </div>\n        </el-row>\n      </div>\n      <div>\n        <el-row>\n          <el-col :span=\"24\">Input Music Lyrics<div class=\"grid-content ep-bg-purple-dark\" /></el-col>\n          <el-col :span=\"20\">\n            <el-input v-model=\"musiclyrics\" \n              :autosize=\"{ minRows: 2, maxRows: 4 }\"\n              placeholder=\"Please Input Lyrics\"\n              type=\"textarea\"\n               />\n          <div class=\"grid-content ep-bg-purple-dark\" /></el-col>\n        </el-row>\n      </div>\n      <div>\n        <el-row>\n          <el-col :span=\"24\">Input Music Cover Picture<div class=\"grid-content ep-bg-purple-dark\" /></el-col>\n          <input type=\"file\"  @change=\"onFileSelected\">\n        </el-row>\n        <el-row>\n          <el-col :span=\"24\">Input Music Mp3 file<div class=\"grid-content ep-bg-purple-dark\" /></el-col>\n          <input type=\"file\" @change=\"onMusicFileSelected\">\n        </el-row>\n      </div>\n      <div>\n        <el-row>\n          <el-button type=\"primary\" round @click=\"submitresult\" >Submit</el-button>  \n        </el-row>\n      </div>\n    </form>\n  </template>\n  \n  <script>\n  import axios from 'axios';\n  \n  export default{\n    data(){\n      return{\n        musicname: '',\n        validmusicname:true,\n        musiclink:'',\n        validmusiclink:true,\n        musiclyrics:'',\n        validelyrics:true,\n        musicperformer:'',\n        validmusicperformer:true,\n        releasedate:'',\n        error: null,\n        value1: null,\n      };\n    },\n    methods:{\n      // async submitresult(){\n      //   const fd = new FormData();\n      //   fd.append('pic', this.selectedFile, this.selectedFile.name)\n      //   fd.append('mp3', this.musicfile, this.musicfile.name)\n      //   try{\n      //     await this.$store.dispatch('request/uploadmusic',fd);\n      //   }catch(err){\n      //     this.error = err.message || \"Fail to enter try again\";\n      //   };\n      async submitresult(){\n          const fd = new FormData();\n          fd.append('pic', this.selectedFile, this.selectedFile.name)\n          fd.append('mp3', this.musicfile, this.musicfile.name)\n          fd.append('musicname',this.musicname)\n          fd.append('releasedate',this.value1)\n          try{\n            await this.$store.dispatch('request/uploadmusic',fd);\n          }catch(err){\n            this.error = err.message || \"Fail to enter try again\";\n          }\n      },\n      onFileSelected(event){\n              this.selectedFile = event.target.files[0]\n          },\n      onMusicFileSelected(event){\n          this.musicfile = event.target.files[0]  //not sure 0 or 1\n      },\n  \n      },\n  \n  };\n  </script>\n  \n  <style lang=\"scss\">\n  .el-row {\n    margin-bottom: 3px;\n  }\n  .el-row:last-child {\n    margin-bottom: 0;\n  }\n  .el-col {\n    color:bisque ;\n    padding-top: 0px;\n    padding-bottom: 0px;;\n  }\n  .el-input{\n    padding-bottom: 0px;\n    padding-top:0px;\n  }\n  .grid-content {\n    border-radius: 4px;\n    min-height: 36px;\n  }\n  </style>"]},"metadata":{},"sourceType":"module"}