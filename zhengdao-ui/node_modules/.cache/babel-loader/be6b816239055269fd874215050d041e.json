{"ast":null,"code":"import axios from 'axios';\nexport default {\n  // async contactCoach(context, payload) {\n  //   const newRequest = {\n  //     userEmail: payload.email,\n  //     message: payload.message\n  //   };\n  //   const response = await fetch(\n  //     `https://vue-http-demo-85e9e.firebaseio.com/requests/${payload.coachId}.json`,\n  //     {\n  //       method: 'POST',\n  //       body: JSON.stringify(newRequest)\n  //     }\n  //   );\n  //   const responseData = await response.json();\n  //   if (!response.ok) {\n  //     const error = new Error(\n  //       responseData.message || 'Failed to send request.'\n  //     );\n  //     throw error;\n  //   }\n  //   newRequest.id = responseData.name;\n  //   newRequest.coachId = payload.coachId;\n  //   context.commit('addRequest', newRequest);\n  // },\n  async fetchRequests(context) {\n    const accesstoken = context.rootGetters.Token; // console.log(accesstoken);\n\n    const apiUrl = 'http://127.0.0.1:1943';\n    axios.get(apiUrl + '/who_am_i', {\n      headers: {\n        Accept: 'application/json',\n        Authorization: `Bearer ${accesstoken}`\n      }\n    }).then(res => {\n      console.log(res.data);\n    }).catch(error => {\n      console.error(error);\n    });\n  },\n\n  async uploadmusic(context, payload) {\n    // console.log(payload)\n    const accesstoken = context.rootGetters.Token;\n    axios({\n      method: 'POST',\n      url: 'http://127.0.0.1:1943/uploadmusic',\n      data: payload,\n      headers: {\n        Accept: 'application/json',\n        Authorization: `Bearer ${accesstoken}`\n      }\n    }).then(res => {\n      console.log(res);\n    }).catch(error => {\n      console.error(error);\n    });\n  } // async fetchRequests(context) {\n  //   const coachId = context.rootGetters.userId;\n  //   const token = context.rootGetters.token;\n  //   const response = await fetch(\n  //     `https://vue-http-demo-85e9e.firebaseio.com/requests/${coachId}.json?auth=` +\n  //       token\n  //   );\n  //   const responseData = await response.json();\n  //   if (!response.ok) {\n  //     const error = new Error(\n  //       responseData.message || 'Failed to fetch requests.'\n  //     );\n  //     throw error;\n  //   }\n  //   const requests = [];\n  //   for (const key in responseData) {\n  //     const request = {\n  //       id: key,\n  //       coachId: coachId,\n  //       userEmail: responseData[key].userEmail,\n  //       message: responseData[key].message\n  //     };\n  //     requests.push(request);\n  //   }\n  //   context.commit('setRequests', requests);\n  // }\n\n\n};","map":{"version":3,"names":["axios","fetchRequests","context","accesstoken","rootGetters","Token","apiUrl","get","headers","Accept","Authorization","then","res","console","log","data","catch","error","uploadmusic","payload","method","url"],"sources":["/home/little/Documents/music_web/startproj/zhengdao-ui/src/store/modules/request/actions.js"],"sourcesContent":["import axios from 'axios'\n\nexport default {\n    // async contactCoach(context, payload) {\n    //   const newRequest = {\n    //     userEmail: payload.email,\n    //     message: payload.message\n    //   };\n    //   const response = await fetch(\n    //     `https://vue-http-demo-85e9e.firebaseio.com/requests/${payload.coachId}.json`,\n    //     {\n    //       method: 'POST',\n    //       body: JSON.stringify(newRequest)\n    //     }\n    //   );\n  \n    //   const responseData = await response.json();\n  \n    //   if (!response.ok) {\n    //     const error = new Error(\n    //       responseData.message || 'Failed to send request.'\n    //     );\n    //     throw error;\n    //   }\n  \n    //   newRequest.id = responseData.name;\n    //   newRequest.coachId = payload.coachId;\n  \n    //   context.commit('addRequest', newRequest);\n    // },\n  async fetchRequests(context) {\n      const accesstoken = context.rootGetters.Token;\n      // console.log(accesstoken);\n      const apiUrl = 'http://127.0.0.1:1943';\n      axios.get(apiUrl+'/who_am_i', {\n        headers: {\n            Accept: 'application/json',\n            Authorization: `Bearer ${accesstoken}`\n            }\n      })\n      .then((res) => {\n        console.log(res.data)\n      })\n      .catch((error) => {\n        console.error(error)\n      });\n\n  },\n  async uploadmusic(context, payload){\n    // console.log(payload)\n    const accesstoken = context.rootGetters.Token;\n    axios({\n      method:'POST',\n      url: 'http://127.0.0.1:1943/uploadmusic',\n      data: payload,\n      headers: {\n          Accept: 'application/json',\n          Authorization: `Bearer ${accesstoken}`\n          }\n    }).then(res => {\n        console.log(res)\n    })\n    .catch((error)=>{\n      console.error(error)\n    })\n\n  },\n\n    // async fetchRequests(context) {\n    //   const coachId = context.rootGetters.userId;\n    //   const token = context.rootGetters.token;\n    //   const response = await fetch(\n    //     `https://vue-http-demo-85e9e.firebaseio.com/requests/${coachId}.json?auth=` +\n    //       token\n    //   );\n    //   const responseData = await response.json();\n  \n    //   if (!response.ok) {\n    //     const error = new Error(\n    //       responseData.message || 'Failed to fetch requests.'\n    //     );\n    //     throw error;\n    //   }\n  \n    //   const requests = [];\n  \n    //   for (const key in responseData) {\n    //     const request = {\n    //       id: key,\n    //       coachId: coachId,\n    //       userEmail: responseData[key].userEmail,\n    //       message: responseData[key].message\n    //     };\n    //     requests.push(request);\n    //   }\n      \n    //   context.commit('setRequests', requests);\n    // }\n  };"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AAEA,eAAe;EACX;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EAEA;EAEA;EACA;EACA;EACA;EACA;EACA;EAEA;EACA;EAEA;EACA;EACF,MAAMC,aAAN,CAAoBC,OAApB,EAA6B;IACzB,MAAMC,WAAW,GAAGD,OAAO,CAACE,WAAR,CAAoBC,KAAxC,CADyB,CAEzB;;IACA,MAAMC,MAAM,GAAG,uBAAf;IACAN,KAAK,CAACO,GAAN,CAAUD,MAAM,GAAC,WAAjB,EAA8B;MAC5BE,OAAO,EAAE;QACLC,MAAM,EAAE,kBADH;QAELC,aAAa,EAAG,UAASP,WAAY;MAFhC;IADmB,CAA9B,EAMCQ,IAND,CAMOC,GAAD,IAAS;MACbC,OAAO,CAACC,GAAR,CAAYF,GAAG,CAACG,IAAhB;IACD,CARD,EASCC,KATD,CASQC,KAAD,IAAW;MAChBJ,OAAO,CAACI,KAAR,CAAcA,KAAd;IACD,CAXD;EAaH,CA7CY;;EA8Cb,MAAMC,WAAN,CAAkBhB,OAAlB,EAA2BiB,OAA3B,EAAmC;IACjC;IACA,MAAMhB,WAAW,GAAGD,OAAO,CAACE,WAAR,CAAoBC,KAAxC;IACAL,KAAK,CAAC;MACJoB,MAAM,EAAC,MADH;MAEJC,GAAG,EAAE,mCAFD;MAGJN,IAAI,EAAEI,OAHF;MAIJX,OAAO,EAAE;QACLC,MAAM,EAAE,kBADH;QAELC,aAAa,EAAG,UAASP,WAAY;MAFhC;IAJL,CAAD,CAAL,CAQGQ,IARH,CAQQC,GAAG,IAAI;MACXC,OAAO,CAACC,GAAR,CAAYF,GAAZ;IACH,CAVD,EAWCI,KAXD,CAWQC,KAAD,IAAS;MACdJ,OAAO,CAACI,KAAR,CAAcA,KAAd;IACD,CAbD;EAeD,CAhEY,CAkEX;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EAEA;EACA;EACA;EACA;EACA;EACA;EAEA;EAEA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EAEA;EACA;;;AA/FW,CAAf"},"metadata":{},"sourceType":"module"}