(function(n,x){typeof exports=="object"&&typeof module!="undefined"?module.exports=x(require("vue")):typeof define=="function"&&define.amd?define(["vue"],x):(n=typeof globalThis!="undefined"?globalThis:n||self,n.VueAudioPlayer=x(n.Vue))})(this,function(n){"use strict";(function(t){var e,i,o,r,a,s,l='<svg><symbol id="icon-play-volume-no" viewBox="0 0 1024 1024"><path d="M529.1008 901.60128c-2.69824 0-12.09856-4.10112-16.9984-9.00096l-0.30208-0.30208-230.4-190.10048H96.1024c-8.89856 0-18.29888-4.59776-22.70208-9.00096s-9.00096-13.7984-9.00096-22.70208V351.49824c0-6.99904 2.69824-12.9024 4.39808-14.60224h2.2016l2.40128-2.40128c4.39808-4.39808 13.7984-9.00096 22.70208-9.00096h185.29792l230.4-195.79904 0.19968-0.19456c5.80096-5.80096 12.9024-6.99904 17.80224-6.99904 4.39808 0 8.89856 0.9984 12.60032 2.89792l0.50176 0.30208 0.50176 0.19968c12.49792 4.1984 17.19808 11.29984 17.19808 26.39872v717.7984c0 15.09888-4.70016 22.2976-17.19808 26.39872l-1.80224 0.59904-1.39776 1.39776c-3.00544 3.00544-5.6064 3.10784-11.10528 3.10784z"  ></path></symbol><symbol id="icon-play-volume" viewBox="0 0 1024 1024"><path d="M529.1 901.6c-2.7 0-12.1-4.1-17-9l-0.3-0.3-230.4-190.1H96.1c-8.9 0-18.3-4.6-22.7-9-4.4-4.4-9-13.8-9-22.7v-319c0-7 2.7-12.9 4.4-14.6H71l2.4-2.4c4.4-4.4 13.8-9 22.7-9h185.3l230.4-195.8 0.2-0.2c5.8-5.8 12.9-7 17.8-7 4.4 0 8.9 1 12.6 2.9l0.5 0.3 0.5 0.2c12.5 4.2 17.2 11.3 17.2 26.4v717.8c0 15.1-4.7 22.3-17.2 26.4l-1.8 0.6-1.4 1.4c-3 3-5.6 3.1-11.1 3.1z m279.1-79.7c-9.9 0-23.1-5.1-26.9-12.6-9-18-5.8-36.4 7.9-46.1 4.8-2 11.6-7.2 20.3-15.6 8.9-8.7 22.4-23.7 36.2-45.7 23-36.8 50.4-99.7 50.4-190.9s-29-154.2-53.3-191.1c-14.5-22-28.8-37-38.2-45.6-6.6-6.1-14.9-13-21-15.5-12.6-9.1-17-31.4-8.9-44.5 9.4-9.1 20.6-14.3 30.8-14.3 5.4 0 10.4 1.4 14.8 4.2 0.7 0.6 1.6 1.3 3 2.4 29.4 23.1 54.9 51.4 75.8 84.1 40.1 62.9 60.5 137 60.5 220.3 0 83.7-19.7 158.1-58.4 221.1-20.1 32.7-44.5 60.9-72.6 83.6-1.7 1.4-2.6 2.1-3.3 2.8-3.4 3.4-13.3 3.4-17.1 3.4zM688.6 696.6c-8.3 0-22.6-9.7-26.9-18.3l-0.2-0.5-0.3-0.4c-8.2-12.4 0.8-30.4 14.5-39.7 6.4-3.4 60.9-35.5 60.9-132.3 0-46.5-18-78.4-33.2-97-16.5-20.2-33.1-29.4-33.7-29.8l-0.6-0.3-0.7-0.2c-5.8-1.9-11.4-8.5-14.3-16.8-2.9-8.3-2.3-16.6 1.4-22.2l0.6-0.9 0.3-1c2.9-8.6 15.6-16.1 27.3-16.1 4.5 0 8.6 1.1 11.7 3.2l2.1 1.4h1.5c4.5 1.7 29.1 14 53.5 41.9 21.7 24.9 47.6 68.1 47.6 132.2 0 72.9-24.5 120.2-45 147.1-22.6 29.5-45.6 42.2-50.4 44.1h-2.4l-2.4 2.4c-3.2 3-5.7 3.2-11.3 3.2z"  ></path></symbol><symbol id="icon-play-pause" viewBox="0 0 1024 1024"><path d="M960 512c0-247.36-200.576-448-448-448C264.64 64 64 264.64 64 512c0 247.424 200.64 448 448 448C759.424 960 960 759.424 960 512zM128 511.936c0-212.032 171.904-384 384-384s384 171.968 384 384-171.904 384-384 384S128 723.968 128 511.936zM406.784 678.208c-22.656 0.064-41.088-19.072-41.088-42.56L365.696 383.04c0-23.68 18.432-42.688 41.152-42.688C429.568 340.224 448 359.488 448 382.976l0 252.544C448 659.136 429.568 678.272 406.784 678.208zM617.088 678.208C594.368 678.272 576 659.136 576 635.648L576 383.04c0-23.68 18.432-42.688 41.152-42.688 22.656-0.128 41.152 19.136 41.152 42.624l0 252.544C658.24 659.136 639.808 678.272 617.088 678.208z"  ></path></symbol><symbol id="icon-play" viewBox="0 0 1024 1024"><path d="M511.2269 64.4608c-246.1655 0-446.4425 200.278-446.4425 446.4425 0 246.1655 200.277 446.4435 446.4425 446.4435s446.4425-200.278 446.4425-446.4435C957.6694 264.7388 757.3914 64.4608 511.2269 64.4608zM511.2269 901.5409c-215.4015 0-390.6376-175.2361-390.6376-390.6376 0-215.4015 175.2361-390.6365 390.6376-390.6365 215.4015 0 390.6365 175.2351 390.6365 390.6365C901.8634 726.3048 726.6273 901.5409 511.2269 901.5409zM705.3455 459.649l-238.807-129.622c-11.3347-6.186-23.5151-9.4556-35.2328-9.4556-34.5508 0-59.5927 26.5134-59.5927 63.0272v254.61248c0 36.5117 25.0419 62.9975 59.5927 63.0262 11.7166 0 23.8971-3.2696 35.1519-9.3993l240.087-129.7326c21.718-11.8262 34.1985-30.2735 34.1985-50.5743C740.7432 490.8216 727.852 471.9114 705.3455 459.649zM679.9227 513.0568 439.8356 642.7884c-4.1974 2.3183-7.168 2.6429-8.5299 2.6429-1.5247 0-3.7878 0-3.7878-7.2212V383.59859199999994c0-7.2212 2.263-7.2212 3.7878-7.2212 1.3629 0 4.3325 0.3543 8.5555 2.6429l238.8357 129.6507c1.7172 0.9533 3.0515 1.8524 4.0878 2.6429C682.0219 511.8587 681.0665 512.4577 679.9227 513.0568z"  ></path></symbol><symbol id="icon-play-prev" viewBox="0 0 1024 1024"><path d="M128 102.4V928c0 17.673 14.327 32 32 32 17.673 0 32-14.327 32-32V102.4c0-17.673-14.327-32-32-32-17.673 0-32 14.327-32 32z m646.028 41.395l-404.352 331.09c-27.383 22.42-27.435 58.886 0 81.35l404.352 331.09c27.382 22.42 49.676 12.003 49.676-23.366V167.16c0-35.646-22.24-45.83-49.676-23.365z m-40.546-49.518c69.12-56.597 154.222-16.897 154.222 72.883v696.8c0 89.481-85.14 129.447-154.222 72.883L329.13 605.753c-58.7-48.064-58.662-132.353 0-180.386l404.352-331.09z" fill="" ></path></symbol><symbol id="icon-play-next" viewBox="0 0 1024 1024"><path d="M889.6 921.6V96c0-17.673-14.327-32-32-32-17.673 0-32 14.327-32 32v825.6c0 17.673 14.327 32 32 32 17.673 0 32-14.327 32-32z m-646.028-41.395l404.352-331.09c27.383-22.42 27.435-58.886 0-81.35l-404.352-331.09c-27.382-22.42-49.676-12.003-49.676 23.366V856.84c0 35.646 22.24 45.83 49.676 23.365z m40.546 49.518c-69.12 56.597-154.222 16.897-154.222-72.883v-696.8c0-89.481 85.14-129.447 154.222-72.883l404.352 331.09c58.7 48.064 58.662 132.353 0 180.386l-404.352 331.09z" fill="" ></path></symbol></svg>',c=(c=document.getElementsByTagName("script"))[c.length-1].getAttribute("data-injectcss");if(c&&!t.__iconfont__svg__cssinject__){t.__iconfont__svg__cssinject__=!0;try{document.write("<style>.svgfont {display: inline-block;width: 1em;height: 1em;fill: currentColor;vertical-align: -0.1em;font-size:16px;}</style>")}catch(h){console&&console.log(h)}}function d(){a||(a=!0,o())}e=function(){var h,v,y,P;(P=document.createElement("div")).innerHTML=l,l=null,(y=P.getElementsByTagName("svg")[0])&&(y.setAttribute("aria-hidden","true"),y.style.position="absolute",y.style.width=0,y.style.height=0,y.style.overflow="hidden",h=y,(v=document.body).firstChild?(P=h,(y=v.firstChild).parentNode.insertBefore(P,y)):v.appendChild(h))},document.addEventListener?~["complete","loaded","interactive"].indexOf(document.readyState)?setTimeout(e,0):(i=function(){document.removeEventListener("DOMContentLoaded",i,!1),e()},document.addEventListener("DOMContentLoaded",i,!1)):document.attachEvent&&(o=e,r=t.document,a=!1,(s=function(){try{r.documentElement.doScroll("left")}catch{return void setTimeout(s,50)}d()})(),r.onreadystatechange=function(){r.readyState=="complete"&&(r.onreadystatechange=null,d())})})(window);/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */var x=function(t,e){return x=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,o){i.__proto__=o}||function(i,o){for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(i[r]=o[r])},x(t,e)};function Q(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");x(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}var u=function(){return u=Object.assign||function(e){for(var i,o=1,r=arguments.length;o<r;o++){i=arguments[o];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},u.apply(this,arguments)};function Z(t,e){var i={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.indexOf(o)<0&&(i[o]=t[o]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,o=Object.getOwnPropertySymbols(t);r<o.length;r++)e.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(t,o[r])&&(i[o[r]]=t[o[r]]);return i}function N(t){var e=typeof Symbol=="function"&&Symbol.iterator,i=e&&t[e],o=0;if(i)return i.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&o>=t.length&&(t=void 0),{value:t&&t[o++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var $=function(){function t(){this.__map={}}return t.prototype.beforeEach=function(e){this.__interceptor=e},t.prototype.on=function(e,i){var o,r,a=Array.isArray(e)?e:[e];try{for(var s=N(a),l=s.next();!l.done;l=s.next()){var c=l.value;this.__map[c]=this.__map[c]||[];var d=this.__map[c];d&&d.push(i)}}catch(h){o={error:h}}finally{try{l&&!l.done&&(r=s.return)&&r.call(s)}finally{if(o)throw o.error}}return this},t.prototype.emit=function(e,i){var o=this;this.__interceptor!==void 0?this.__interceptor(this,function(){o.__emit(e,i)}):this.__emit(e,i)},t.prototype.__emit=function(e,i){var o,r,a=this.__map[e];if(Array.isArray(a)&&(a==null?void 0:a.length))try{for(var s=N(a),l=s.next();!l.done;l=s.next())(0,l.value)(i)}catch(c){o={error:c}}finally{try{l&&!l.done&&(r=s.return)&&r.call(s)}finally{if(o)throw o.error}}this.event=i},t.prototype.off=function(e,i){var o=this.__map[e];if(o!==void 0)if(i===void 0)delete this.__map[e];else{var r=o.findIndex(function(a){return a===i});o.splice(r,1)}},t.prototype.destroy=function(){this.__map={}},t}(),tt=Object.prototype.toString;function et(t){return tt.call(t)==="[object Function]"}var M,I="clientX",z="clientY",it=16,O="start",A="move",D="cancel",B="end",X="computed",nt="left",ot="right",rt="up",at="down",F="touchstart",R="touchmove",j="touchend",Y="touchcancel",T="mouseup",V="mousemove",L="mousedown",st=((M={})[4]="start",M[5]="move",M[1]="end",M[3]="cancel",M);function lt(t){return st[t]}function ct(t,e,i){var o,r,a,s,l,c,d,h={1:(o={},o[0]=(r={},r.move=4,r),o[4]=(a={},a.move=5,a.end=1,a.cancel=3,a),o[5]=(s={},s.move=5,s.end=1,s.cancel=3,s),o),0:(l={},l[4]=(c={},c.move=2,c.end=1,c.cancel=3,c),l[5]=(d={},d.start=2,d.move=2,d.end=1,d.cancel=3,d),l)}[Number(t)][e];return h!==void 0&&h[i]||0}function dt(t){[1,3,2].includes(t.state)&&(t.state=0)}function W(t){return[4,5].includes(t)}function ut(t){if(t.disabled)return t.state=0,!0}function ht(t,e){return u(u(u({},t),e),{state:0,disabled:!1})}function H(){var t,e,i,o,r=0;return function(a){if(t=e,a!==void 0){var s=function(d,h){var v=d.phase,y=d.points,P=d.changedPoints,p=d.nativeEvent,f=y.length,m=O===v,_=B===v&&f===0||D===v,w=Date.now(),k=U(y)||U(P),g=k.x,b=k.y,C=p.currentTarget;return Object.assign(d,{id:h,x:g,y:b,timestamp:w,isStart:m,isEnd:_,pointLength:f,currentTarget:C,getOffset:function(E){E===void 0&&(E=C);var K=E.getBoundingClientRect();return{x:g-Math.round(K.left),y:b-Math.round(K.top)}}})}(a,r=Number.MAX_SAFE_INTEGER>r?++r:1);e=s;var l=s.isStart,c=s.pointLength;return l&&(i=s,t=void 0,o=1<c?s:void 0),u(u({},s),{prevInput:t,startMultiInput:o,startInput:i})}}}function U(t){var e=t.length;if(0<e){if(e===1){var i=t[0],o=i.clientX,r=i.clientY;return{x:Math.round(o),y:Math.round(r)}}var a=t.reduce(function(s,l){return s.x+=l[I],s.y+=l[z],s},{x:0,y:0});return{x:Math.round(a.x/e),y:Math.round(a.y/e)}}}function q(t,e,i,o){i.target,i.currentTarget,i.type;var r,a=Z(i,["target","currentTarget","type"]);return document.createEvent?(r=document.createEvent("HTMLEvents")).initEvent(t,o==null?void 0:o.bubbles,o==null?void 0:o.cancelable):r=new Event(t,o),Object.assign(r,a,{match:function(){return i.targets&&0<i.targets.length&&i.targets.every(function(s){return r.currentTarget.contains(s)})}}),e.dispatchEvent(r)}var G=[F,R,j,Y],ft={domEvents:{bubbles:!0,cancelable:!0},preventDefault:function(t){if(t.target&&"tagName"in t.target){var e=t.target.tagName;return!/^(?:INPUT|TEXTAREA|BUTTON|SELECT)$/.test(e)}return!1}},mt=function(t){function e(i,o){var r,a=t.call(this)||this;a.__computeFunctionList=[],a.__computeFunctionCreatorList=[],a.__pluginContexts=[],a.el=i,a.__options=u(u({},ft),o);var s,l,c,d,h=function(p){var f=H();return function(m){var _=[],w=[];Array.from(m.touches).forEach(function(g){var b=g.clientX,C=g.clientY,E=g.target;(p==null?void 0:p.contains(E))&&(_.push(E),w.push({clientX:b,clientY:C,target:E}))});var k=Array.from(m.changedTouches).map(function(g){return{clientX:g.clientX,clientY:g.clientY,target:g.target}});return f({phase:m.type.replace("touch",""),changedPoints:k,points:w,nativeEvent:m,target:m.target,targets:_})}}(a.el),v=(l=!1,c=null,d=H(),function(p){var f,m=p.clientX,_=p.clientY,w=p.type,k=p.button,g=p.target,b=[{clientX:m,clientY:_,target:g}];if(L===w&&k===0)c=g,l=!0,f=O;else{if(!l)return;V===w?f=A:T===w&&(b=[],f=B,l=!1)}var C=s||[{clientX:m,clientY:_,target:g}];if(s=[{clientX:m,clientY:_,target:g}],f!==void 0)return d({phase:f,changedPoints:C,points:b,target:c,targets:[c],nativeEvent:p})});if(a.__inputCreatorMap=((r={})[F]=h,r[R]=h,r[j]=h,r[Y]=h,r[L]=v,r[V]=v,r[T]=v,r),i!==void 0){i.style.webkitTapHighlightColor="rgba(0,0,0,0)";var y=!1;try{var P={};Object.defineProperty(P,"passive",{get:function(){y=!0}}),window.addEventListener("_",function(){},P)}catch{}a.on("u",function(p,f,m){return G.forEach(function(_){p.addEventListener(_,f,m)}),p.addEventListener(L,f,m),window.addEventListener(V,f,m),window.addEventListener(T,f,m),function(){G.forEach(function(_){p.removeEventListener(_,f)}),p.removeEventListener(L,f,m),window.removeEventListener(V,f,m),window.removeEventListener(T,f,m)}}(i,a.catchEvent.bind(a),!(a.__options.preventDefault!==!1||!y)&&{passive:!0}))}return a}return Q(e,t),e.prototype.use=function(i,o){this.__pluginContexts.push(i(this,o))},e.prototype.catchEvent=function(i){var o=this.__inputCreatorMap[i.type](i);if(o!==void 0){var r=function(){return i.preventDefault()};(function(s,l){var c=l.preventDefault;return et(c)?c(s):!!c})(i,this.__options)&&r(),this.emit("input",o),this.emit2("at:"+o.phase,o,{});var a={};this.__computeFunctionList.forEach(function(s){var l=s(o,a);if(l!==void 0)for(var c in l)a[c]=l[c]}),this.emit(X,u(u(u({},o),a),{stopPropagation:function(){return i.stopPropagation()},stopImmediatePropagation:function(){return i.stopImmediatePropagation()},preventDefault:r}))}},e.prototype.compute=function(i,o){var r,a;try{for(var s=N(i),l=s.next();!l.done;l=s.next()){var c=l.value;this.__computeFunctionCreatorList.includes(c)||(this.__computeFunctionCreatorList.push(c),this.__computeFunctionList.push(c()))}}catch(d){r={error:d}}finally{try{l&&!l.done&&(a=s.return)&&a.call(s)}finally{if(r)throw r.error}}this.on(X,o)},e.prototype.beforeEach=function(i){var o=this;t.prototype.beforeEach.call(this,function(r,a){var s;((s=r.c)===null||s===void 0?void 0:s.name)===void 0?a():i(u(u({},r.c),{event:o.event}),a)})},e.prototype.get=function(i){return this.__pluginContexts.find(function(o){return i===o.name})},e.prototype.set=function(i){this.__options=u(u({},this.__options),i)},e.prototype.emit2=function(i,o,r){this.c=r,this.emit(i,u(u({},o),{type:i})),this.emit("at:after",u(u({},o),{name:i}));var a=o.target,s=this.__options.domEvents;s&&this.el!==void 0&&a&&(q(i,a,o,s),q("at:after",a,u(u({},o),{name:i}),s))},e.prototype.destroy=function(){this.emit("u"),t.prototype.destroy.call(this)},e}($),pt=function(t){return Math.sqrt(t.x*t.x+t.y*t.y)},yt=function(t){return t/Math.PI*180},J=function(t,e){if(t!==0||e!==0)return Math.abs(t)>=Math.abs(e)?0<t?ot:nt:0<e?at:rt};function gt(){return function(t){var e=t.prevInput,i=0,o=0,r=0;if(e!==void 0&&(i=t.x-e.x,o=t.y-e.y,i!==0||o!==0)){var a=Math.sqrt(Math.pow(i,2)+Math.pow(o,2));r=Math.round(yt(Math.acos(Math.abs(i)/a)))}return{deltaX:i,deltaY:o,deltaXYAngle:r}}}function _t(){var t,e=0,i=0,o=0,r=0,a=0;return function(s){var l=s.phase,c=s.startInput;return O===l?(e=0,i=0,o=0,r=0,a=0):A===l&&(e=Math.round(s.points[0][I]-c.points[0][I]),i=Math.round(s.points[0][z]-c.points[0][z]),o=Math.abs(e),r=Math.abs(i),a=Math.round(pt({x:o,y:r})),t=J(e,i)),{displacementX:e,displacementY:i,distanceX:o,distanceY:r,distance:a,overallDirection:t}}}function vt(){var t,e,i=0,o=0,r=0,a=0;return function(s){if(s!==void 0){e=e||s.startInput;var l=s.timestamp-e.timestamp;if(it<l){var c=s.x-e.x,d=s.y-e.y;r=Math.round(c/l*100)/100,a=Math.round(d/l*100)/100,i=Math.abs(r),o=Math.abs(a),t=J(c,d),e=s}}return{velocityX:i,velocityY:o,speedX:r,speedY:a,direction:t}}}var Pt={name:"pan",threshold:10,pointLength:1};function wt(t,e){var i=ht(Pt,e);return t.compute([vt,_t,gt],function(o){if(dt(i),!ut(i)){var r,a,s,l,c,d=(r=o.pointLength,a=o.distance,s=o.direction,l=o.phase,c=i.state,(W(c)||i.threshold<=a)&&i.pointLength===r&&s!==void 0||W(c)&&[D,B].includes(l));if(i.state=ct(d,i.state,o.phase),d){var h=i.name;t.emit2(h,o,i),t.emit2(h+lt(i.state),o,i),![B,D].includes(o.phase)&&o.direction&&t.emit2(h+o.direction,o,i)}}}),i}var Xt="",xt=(t,e)=>{const i=t.__vccOpts||t;for(const[o,r]of e)i[o]=r;return i};const bt={name:"AudioPlayer",inheritAttrs:!1,props:{audioList:{default:null,type:Array},showPlayButton:{default:!0,type:Boolean},showPrevButton:{default:!0,type:Boolean},showNextButton:{default:!0,type:Boolean},showVolumeButton:{default:!0,type:Boolean},showProgressBar:{default:!0,type:Boolean},beforePlay:{default:null,type:Function},beforePrev:{default:null,type:Function},beforeNext:{default:null,type:Function},isLoop:{type:Boolean,default:!0},isAutoPlayNext:{type:Boolean,default:!0},progressInterval:{default:1e3,type:Number},showPlaybackRate:{type:Boolean,default:!0},playbackRates:{type:Array,default:()=>[.5,1,1.5,2]},themeColor:{type:String,default:"#ff2929"},disabledProgressDrag:{type:Boolean,default:!1},disabledProgressClick:{type:Boolean,default:!1}},emits:["pause","play-prev","play-next","timeupdate","loadedmetadata","ended","progress-start","progress-end","progress-move","progress-click","playing","play"],data(){return{isIOS:/iPhone|iPad|iPod/i.test(window.navigator.userAgent),isPlaying:!1,isDragging:!1,isDraggingVolume:!1,isShowNotice:!1,isLoading:!1,isShowVolume:!1,isShowRates:!1,timer:null,noticeMessage:"",duration:"",currentPlayIndex:0,currentTime:"",currentVolume:1,playbackRate:1,at:null}},computed:{currentTimeFormatted(){return this.currentTime?this.formatTime(this.currentTime):"00:00"},durationFormatted(){return this.duration?this.formatTime(this.duration):"00:00"}},mounted(){this.at=new mt(this.$el,{preventDefault:!1}),this.at.use(wt)},beforeUnmount(){this.at.destroy(),this.pause()},methods:{handleVolumeIconTouchstart(){this.isShowVolume=!this.isShowVolume},handleVolumePanmove(t){let e=this.$refs.playVolumeWrap.getBoundingClientRect(),i=t.y,o,r;o=Math.round(e.bottom-i),r=o/this.$refs.playVolumeWrap.offsetHeight,r=Math.min(r,1),r=Math.max(r,0),this.$refs.audio.volume=r,this.currentVolume=r},handleVolumePanend(){this.isShowVolume=!1},handleSetPlaybackRate(t){this.playbackRate=+t,this.$refs.audio.playbackRate=+t,this.isShowRates=!1},showNotice(t={}){this.noticeMessage=t.message,this.isShowNotice=!0,window.setTimeout(()=>{this.isShowNotice=!1},t.duration||3e3)},onLoadedmetadata(t){this.duration=this.$refs.audio.duration,this.$emit("loadedmetadata",t)},onTimeUpdate(t){this.$emit("timeupdate",t)},formatTime(t){let e;return e=Math.floor(t/60),t=Math.ceil(t%60),e+="",t+="",e=e.length===1?"0"+e:e,t=t.length===1?"0"+t:t,e+":"+t},onEnded(t){window.setTimeout(()=>{this.pause(),this.$emit("ended",t),this.isLoop&&this.isAutoPlayNext&&this.playNext()},1e3)},handleProgressPanstart(t){this.disabledProgressDrag||(this.isDragging=!0,this.$emit("progress-start",t))},handleProgressPanend(t){this.disabledProgressDrag||(this.$refs.audio.currentTime=this.currentTime,this.play(),this.isDragging=!1,this.$emit("progress-end",t))},handleProgressPanmove(t){if(this.disabledProgressDrag)return;let e=t.x,i=t.target.getBoundingClientRect(),r=parseInt(getComputedStyle(t.target).left)+(e-i.left);r=Math.min(r,this.$refs.audioProgressWrap.offsetWidth),r=Math.max(r,0),this.setPointPosition(r),this.$refs.audioProgress.style.width=r+"px",this.currentTime=r/this.$refs.audioProgressWrap.offsetWidth*this.duration,this.$emit("progress-move",t)},handleClickProgressWrap(t){if(this.disabledProgressClick)return;let e=t.target,i=t.offsetX;e!==this.$refs.audioProgressPoint&&(this.currentTime=i/this.$refs.audioProgressWrap.offsetWidth*this.duration,this.$refs.audio.currentTime=this.currentTime,this.setPointPosition(i),this.$refs.audioProgress.style.width=i+"px",this.play(),this.$emit("progress-click",t))},setPointPosition(t){this.$refs.audioProgressPoint.style.left=t-this.$refs.audioProgressPoint.offsetWidth/2+"px"},playing(){if(this.isDragging)return;let t=this.$refs.audio.currentTime/this.$refs.audio.duration*this.$refs.audioProgressWrap.offsetWidth;this.currentTime=this.$refs.audio.currentTime,this.$refs.audioProgress.style.width=t+"px",this.setPointPosition(t),this.$emit("playing")},play(){this.isLoading=!0;let t=()=>{this.$refs.audio.play().then(()=>{this.$nextTick(()=>{this.clearTimer(),this.timer=window.setInterval(this.playing,this.progressInterval),this.isPlaying=!0,this.isLoading=!1})}).catch(e=>{this.showNotice({message:e.message}),e.code===9&&this.isAutoPlayNext&&window.setTimeout(()=>{this.playNext()},1e3),this.isLoading=!1}),this.$emit("play")};if(this.isIOS&&(console.log("\u4E3A\u4E86\u89E3\u51B3 iOS \u8BBE\u5907\u63A5\u53E3\u5F02\u6B65\u8BF7\u6C42\u540E\u51FA\u73B0\u65E0\u6CD5\u64AD\u653E\u95EE\u9898\uFF0C\u8BF7\u65E0\u89C6 The play() request was interrupted by a call to pause() \u9519\u8BEF"),this.$refs.audio.play(),this.$refs.audio.pause()),this.beforePlay){this.beforePlay(e=>{e!==!1&&t()});return}t()},pause(){this.$refs.audio.pause(),this.$nextTick(()=>{this.clearTimer(),this.isPlaying=!1,this.$emit("pause")})},playPrev(){if(this.currentPlayIndex<=0&&!this.isLoop)return;this.clearTimer();let t=()=>{this.currentPlayIndex<=0&&this.isLoop?this.currentPlayIndex=this.audioList.length-1:this.currentPlayIndex--,this.$nextTick(()=>{this.play(),this.$emit("play-prev")})};if(this.beforePrev){this.beforePrev(e=>{e!==!1&&t()});return}t()},clearTimer(){window.clearInterval(this.timer),this.timer=null},playNext(){if(this.currentPlayIndex+1>=this.audioList.length&&!this.isLoop)return;this.clearTimer();let t=()=>{this.currentPlayIndex+1>=this.audioList.length&&this.isLoop?this.currentPlayIndex=0:this.currentPlayIndex++,this.$nextTick(()=>{this.play(),this.$emit("play-next")})};if(this.beforeNext){this.beforeNext(e=>{e!==!1&&t()});return}t()}}},Et={class:"audio-player"},kt={class:"audio__btn-wrap"},Ct=["onClick"],Mt=[n.createElementVNode("use",{"xlink:href":"#icon-play-prev"},null,-1)],Bt={key:1,class:"audio__play-loading"},Tt=[n.createElementVNode("use",{"xlink:href":"#icon-play"},null,-1)],Vt=[n.createElementVNode("use",{"xlink:href":"#icon-play-pause"},null,-1)],Lt=[n.createElementVNode("use",{"xlink:href":"#icon-play-next"},null,-1)],St={key:3,class:"audio__play-volume-icon-wrap"},Nt=["xlink:href"],It={class:"audio__time-wrap"},zt={class:"audio__current-time"},Ot={class:"audio__duration"},Dt=["src"];function At(t,e,i,o,r,a){return n.openBlock(),n.createElementBlock("div",Et,[n.createElementVNode("div",kt,[i.showPlaybackRate?(n.openBlock(),n.createElementBlock("div",{key:0,class:"audio__play-rate",style:n.normalizeStyle({color:i.themeColor})},[n.createElementVNode("span",{onClick:e[0]||(e[0]=n.withModifiers(s=>r.isShowRates=!r.isShowRates,["stop"]))},n.toDisplayString(r.playbackRate.toFixed(1)+"x"),1),n.createVNode(n.Transition,{name:"fade-rate"},{default:n.withCtx(()=>[n.withDirectives(n.createElementVNode("ul",{class:"audio__play-rate__dropdown",style:n.normalizeStyle({border:`1px solid ${i.themeColor}`})},[(n.openBlock(!0),n.createElementBlock(n.Fragment,null,n.renderList(i.playbackRates,s=>(n.openBlock(),n.createElementBlock("li",{key:"pr_"+s,onClick:n.withModifiers(l=>a.handleSetPlaybackRate(s),["stop"])},n.toDisplayString(s.toFixed(1)+"x"),9,Ct))),128))],4),[[n.vShow,r.isShowRates]])]),_:1})],4)):n.createCommentVNode("",!0),n.withDirectives(n.createElementVNode("div",{class:n.normalizeClass(["audio__play-prev",{disable:!i.isLoop&&r.currentPlayIndex===0}]),onClick:e[1]||(e[1]=n.withModifiers((...s)=>a.playPrev&&a.playPrev(...s),["stop"]))},[(n.openBlock(),n.createElementBlock("svg",{class:"audio__play-icon","aria-hidden":"true",style:n.normalizeStyle({color:i.themeColor})},Mt,4))],2),[[n.vShow,i.showPrevButton]]),r.isLoading?(n.openBlock(),n.createElementBlock("div",Bt,[(n.openBlock(),n.createElementBlock(n.Fragment,null,n.renderList(8,s=>n.createElementVNode("span",{key:s,style:n.normalizeStyle({backgroundColor:i.themeColor})},null,4)),64))])):(n.openBlock(),n.createElementBlock(n.Fragment,{key:2},[!r.isPlaying&&i.showPlayButton?(n.openBlock(),n.createElementBlock("div",{key:0,class:"audio__play-start",onClick:e[2]||(e[2]=n.withModifiers((...s)=>a.play&&a.play(...s),["stop"]))},[(n.openBlock(),n.createElementBlock("svg",{class:"audio__play-icon","aria-hidden":"true",style:n.normalizeStyle({color:i.themeColor})},Tt,4))])):i.showPlayButton?(n.openBlock(),n.createElementBlock("div",{key:1,class:"audio__play-pause",onClick:e[3]||(e[3]=n.withModifiers((...s)=>a.pause&&a.pause(...s),["stop"]))},[(n.openBlock(),n.createElementBlock("svg",{class:"audio__play-icon","aria-hidden":"true",style:n.normalizeStyle({color:i.themeColor})},Vt,4))])):n.createCommentVNode("",!0)],64)),n.withDirectives(n.createElementVNode("div",{class:n.normalizeClass(["audio__play-next",{disable:!i.isLoop&&r.currentPlayIndex===i.audioList.length-1}]),onClick:e[4]||(e[4]=n.withModifiers((...s)=>a.playNext&&a.playNext(...s),["stop"]))},[(n.openBlock(),n.createElementBlock("svg",{class:"audio__play-icon","aria-hidden":"true",style:n.normalizeStyle({color:i.themeColor})},Lt,4))],2),[[n.vShow,i.showNextButton]]),i.showVolumeButton?(n.openBlock(),n.createElementBlock("div",St,[(n.openBlock(),n.createElementBlock("svg",{class:"audio__play-icon","aria-hidden":"true",style:n.normalizeStyle({color:i.themeColor}),onClick:e[5]||(e[5]=n.withModifiers((...s)=>a.handleVolumeIconTouchstart&&a.handleVolumeIconTouchstart(...s),["stop"]))},[n.createElementVNode("use",{"xlink:href":r.currentVolume?"#icon-play-volume":"#icon-play-volume-no"},null,8,Nt)],4)),n.createVNode(n.Transition,{name:"fade-volume"},{default:n.withCtx(()=>[n.withDirectives(n.createElementVNode("div",{ref:"playVolumeWrap",class:"audio__play-volume-wrap",onClick:e[6]||(e[6]=n.withModifiers((...s)=>a.handleVolumePanmove&&a.handleVolumePanmove(...s),["stop"])),onPanmove:e[7]||(e[7]=(...s)=>a.handleVolumePanmove&&a.handleVolumePanmove(...s)),onPanend:e[8]||(e[8]=(...s)=>a.handleVolumePanend&&a.handleVolumePanend(...s))},[n.createElementVNode("div",{ref:"playVolume",class:"audio__play-volume",style:n.normalizeStyle({height:r.currentVolume*100+"%",backgroundColor:i.themeColor})},null,4)],544),[[n.vShow,r.isShowVolume]])]),_:1})])):n.createCommentVNode("",!0),n.withDirectives(n.createElementVNode("div",{class:"audio__notice"},n.toDisplayString(r.noticeMessage),513),[[n.vShow,r.isShowNotice]])]),n.withDirectives(n.createElementVNode("div",{ref:"audioProgressWrap",class:"audio__progress-wrap",onClick:e[12]||(e[12]=n.withModifiers((...s)=>a.handleClickProgressWrap&&a.handleClickProgressWrap(...s),["stop"]))},[n.createElementVNode("div",{ref:"audioProgress",class:"audio__progress",style:n.normalizeStyle({backgroundColor:i.themeColor})},null,4),n.createElementVNode("div",{ref:"audioProgressPoint",class:"audio__progress-point",style:n.normalizeStyle({backgroundColor:i.themeColor,boxShadow:`0 0 10px 0 ${i.themeColor}`}),onPanstart:e[9]||(e[9]=(...s)=>a.handleProgressPanstart&&a.handleProgressPanstart(...s)),onPanend:e[10]||(e[10]=(...s)=>a.handleProgressPanend&&a.handleProgressPanend(...s)),onPanmove:e[11]||(e[11]=(...s)=>a.handleProgressPanmove&&a.handleProgressPanmove(...s))},null,36)],512),[[n.vShow,i.showProgressBar]]),n.withDirectives(n.createElementVNode("div",It,[n.createElementVNode("div",zt,n.toDisplayString(a.currentTimeFormatted),1),n.createElementVNode("div",Ot,n.toDisplayString(a.durationFormatted),1)],512),[[n.vShow,i.showProgressBar]]),n.createElementVNode("audio",n.mergeProps({ref:"audio",class:"audio-player__audio",src:i.audioList[r.currentPlayIndex]},t.$attrs,{onEnded:e[13]||(e[13]=(...s)=>a.onEnded&&a.onEnded(...s)),onTimeupdate:e[14]||(e[14]=(...s)=>a.onTimeUpdate&&a.onTimeUpdate(...s)),onLoadedmetadata:e[15]||(e[15]=(...s)=>a.onLoadedmetadata&&a.onLoadedmetadata(...s))})," \u6D4F\u89C8\u5668\u592A\u8001\u54AF\uFF0C\u8BF7\u5347\u7EA7\u6D4F\u89C8\u5668\u5427~ ",16,Dt)])}var S=xt(bt,[["render",At]]);return S.install=t=>{t.component(S.name,S)},S});
