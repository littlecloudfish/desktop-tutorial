(function(w,M){typeof exports=="object"&&typeof module!="undefined"?module.exports=M():typeof define=="function"&&define.amd?define(M):(w=typeof globalThis!="undefined"?globalThis:w||self,w.VueAudioPlayer=M())})(this,function(){"use strict";(function(t){var n,e,i,r,o,a,l='<svg><symbol id="icon-play-volume-no" viewBox="0 0 1024 1024"><path d="M529.1008 901.60128c-2.69824 0-12.09856-4.10112-16.9984-9.00096l-0.30208-0.30208-230.4-190.10048H96.1024c-8.89856 0-18.29888-4.59776-22.70208-9.00096s-9.00096-13.7984-9.00096-22.70208V351.49824c0-6.99904 2.69824-12.9024 4.39808-14.60224h2.2016l2.40128-2.40128c4.39808-4.39808 13.7984-9.00096 22.70208-9.00096h185.29792l230.4-195.79904 0.19968-0.19456c5.80096-5.80096 12.9024-6.99904 17.80224-6.99904 4.39808 0 8.89856 0.9984 12.60032 2.89792l0.50176 0.30208 0.50176 0.19968c12.49792 4.1984 17.19808 11.29984 17.19808 26.39872v717.7984c0 15.09888-4.70016 22.2976-17.19808 26.39872l-1.80224 0.59904-1.39776 1.39776c-3.00544 3.00544-5.6064 3.10784-11.10528 3.10784z"  ></path></symbol><symbol id="icon-play-volume" viewBox="0 0 1024 1024"><path d="M529.1 901.6c-2.7 0-12.1-4.1-17-9l-0.3-0.3-230.4-190.1H96.1c-8.9 0-18.3-4.6-22.7-9-4.4-4.4-9-13.8-9-22.7v-319c0-7 2.7-12.9 4.4-14.6H71l2.4-2.4c4.4-4.4 13.8-9 22.7-9h185.3l230.4-195.8 0.2-0.2c5.8-5.8 12.9-7 17.8-7 4.4 0 8.9 1 12.6 2.9l0.5 0.3 0.5 0.2c12.5 4.2 17.2 11.3 17.2 26.4v717.8c0 15.1-4.7 22.3-17.2 26.4l-1.8 0.6-1.4 1.4c-3 3-5.6 3.1-11.1 3.1z m279.1-79.7c-9.9 0-23.1-5.1-26.9-12.6-9-18-5.8-36.4 7.9-46.1 4.8-2 11.6-7.2 20.3-15.6 8.9-8.7 22.4-23.7 36.2-45.7 23-36.8 50.4-99.7 50.4-190.9s-29-154.2-53.3-191.1c-14.5-22-28.8-37-38.2-45.6-6.6-6.1-14.9-13-21-15.5-12.6-9.1-17-31.4-8.9-44.5 9.4-9.1 20.6-14.3 30.8-14.3 5.4 0 10.4 1.4 14.8 4.2 0.7 0.6 1.6 1.3 3 2.4 29.4 23.1 54.9 51.4 75.8 84.1 40.1 62.9 60.5 137 60.5 220.3 0 83.7-19.7 158.1-58.4 221.1-20.1 32.7-44.5 60.9-72.6 83.6-1.7 1.4-2.6 2.1-3.3 2.8-3.4 3.4-13.3 3.4-17.1 3.4zM688.6 696.6c-8.3 0-22.6-9.7-26.9-18.3l-0.2-0.5-0.3-0.4c-8.2-12.4 0.8-30.4 14.5-39.7 6.4-3.4 60.9-35.5 60.9-132.3 0-46.5-18-78.4-33.2-97-16.5-20.2-33.1-29.4-33.7-29.8l-0.6-0.3-0.7-0.2c-5.8-1.9-11.4-8.5-14.3-16.8-2.9-8.3-2.3-16.6 1.4-22.2l0.6-0.9 0.3-1c2.9-8.6 15.6-16.1 27.3-16.1 4.5 0 8.6 1.1 11.7 3.2l2.1 1.4h1.5c4.5 1.7 29.1 14 53.5 41.9 21.7 24.9 47.6 68.1 47.6 132.2 0 72.9-24.5 120.2-45 147.1-22.6 29.5-45.6 42.2-50.4 44.1h-2.4l-2.4 2.4c-3.2 3-5.7 3.2-11.3 3.2z"  ></path></symbol><symbol id="icon-play-pause" viewBox="0 0 1024 1024"><path d="M960 512c0-247.36-200.576-448-448-448C264.64 64 64 264.64 64 512c0 247.424 200.64 448 448 448C759.424 960 960 759.424 960 512zM128 511.936c0-212.032 171.904-384 384-384s384 171.968 384 384-171.904 384-384 384S128 723.968 128 511.936zM406.784 678.208c-22.656 0.064-41.088-19.072-41.088-42.56L365.696 383.04c0-23.68 18.432-42.688 41.152-42.688C429.568 340.224 448 359.488 448 382.976l0 252.544C448 659.136 429.568 678.272 406.784 678.208zM617.088 678.208C594.368 678.272 576 659.136 576 635.648L576 383.04c0-23.68 18.432-42.688 41.152-42.688 22.656-0.128 41.152 19.136 41.152 42.624l0 252.544C658.24 659.136 639.808 678.272 617.088 678.208z"  ></path></symbol><symbol id="icon-play" viewBox="0 0 1024 1024"><path d="M511.2269 64.4608c-246.1655 0-446.4425 200.278-446.4425 446.4425 0 246.1655 200.277 446.4435 446.4425 446.4435s446.4425-200.278 446.4425-446.4435C957.6694 264.7388 757.3914 64.4608 511.2269 64.4608zM511.2269 901.5409c-215.4015 0-390.6376-175.2361-390.6376-390.6376 0-215.4015 175.2361-390.6365 390.6376-390.6365 215.4015 0 390.6365 175.2351 390.6365 390.6365C901.8634 726.3048 726.6273 901.5409 511.2269 901.5409zM705.3455 459.649l-238.807-129.622c-11.3347-6.186-23.5151-9.4556-35.2328-9.4556-34.5508 0-59.5927 26.5134-59.5927 63.0272v254.61248c0 36.5117 25.0419 62.9975 59.5927 63.0262 11.7166 0 23.8971-3.2696 35.1519-9.3993l240.087-129.7326c21.718-11.8262 34.1985-30.2735 34.1985-50.5743C740.7432 490.8216 727.852 471.9114 705.3455 459.649zM679.9227 513.0568 439.8356 642.7884c-4.1974 2.3183-7.168 2.6429-8.5299 2.6429-1.5247 0-3.7878 0-3.7878-7.2212V383.59859199999994c0-7.2212 2.263-7.2212 3.7878-7.2212 1.3629 0 4.3325 0.3543 8.5555 2.6429l238.8357 129.6507c1.7172 0.9533 3.0515 1.8524 4.0878 2.6429C682.0219 511.8587 681.0665 512.4577 679.9227 513.0568z"  ></path></symbol><symbol id="icon-play-prev" viewBox="0 0 1024 1024"><path d="M128 102.4V928c0 17.673 14.327 32 32 32 17.673 0 32-14.327 32-32V102.4c0-17.673-14.327-32-32-32-17.673 0-32 14.327-32 32z m646.028 41.395l-404.352 331.09c-27.383 22.42-27.435 58.886 0 81.35l404.352 331.09c27.382 22.42 49.676 12.003 49.676-23.366V167.16c0-35.646-22.24-45.83-49.676-23.365z m-40.546-49.518c69.12-56.597 154.222-16.897 154.222 72.883v696.8c0 89.481-85.14 129.447-154.222 72.883L329.13 605.753c-58.7-48.064-58.662-132.353 0-180.386l404.352-331.09z" fill="" ></path></symbol><symbol id="icon-play-next" viewBox="0 0 1024 1024"><path d="M889.6 921.6V96c0-17.673-14.327-32-32-32-17.673 0-32 14.327-32 32v825.6c0 17.673 14.327 32 32 32 17.673 0 32-14.327 32-32z m-646.028-41.395l404.352-331.09c27.383-22.42 27.435-58.886 0-81.35l-404.352-331.09c-27.382-22.42-49.676-12.003-49.676 23.366V856.84c0 35.646 22.24 45.83 49.676 23.365z m40.546 49.518c-69.12 56.597-154.222 16.897-154.222-72.883v-696.8c0-89.481 85.14-129.447 154.222-72.883l404.352 331.09c58.7 48.064 58.662 132.353 0 180.386l-404.352 331.09z" fill="" ></path></symbol></svg>',s=(s=document.getElementsByTagName("script"))[s.length-1].getAttribute("data-injectcss");if(s&&!t.__iconfont__svg__cssinject__){t.__iconfont__svg__cssinject__=!0;try{document.write("<style>.svgfont {display: inline-block;width: 1em;height: 1em;fill: currentColor;vertical-align: -0.1em;font-size:16px;}</style>")}catch(h){console&&console.log(h)}}function u(){o||(o=!0,i())}n=function(){var h,g,c,_;(_=document.createElement("div")).innerHTML=l,l=null,(c=_.getElementsByTagName("svg")[0])&&(c.setAttribute("aria-hidden","true"),c.style.position="absolute",c.style.width=0,c.style.height=0,c.style.overflow="hidden",h=c,(g=document.body).firstChild?(_=h,(c=g.firstChild).parentNode.insertBefore(_,c)):g.appendChild(h))},document.addEventListener?~["complete","loaded","interactive"].indexOf(document.readyState)?setTimeout(n,0):(e=function(){document.removeEventListener("DOMContentLoaded",e,!1),n()},document.addEventListener("DOMContentLoaded",e,!1)):document.attachEvent&&(i=n,r=t.document,o=!1,(a=function(){try{r.documentElement.doScroll("left")}catch{return void setTimeout(a,50)}u()})(),r.onreadystatechange=function(){r.readyState=="complete"&&(r.onreadystatechange=null,u())})})(window);/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */var w=function(t,n){return w=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])},w(t,n)};function M(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");w(t,n);function e(){this.constructor=t}t.prototype=n===null?Object.create(n):(e.prototype=n.prototype,new e)}var m=function(){return m=Object.assign||function(n){for(var e,i=1,r=arguments.length;i<r;i++){e=arguments[i];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o])}return n},m.apply(this,arguments)};function Q(t,n){var e={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&n.indexOf(i)<0&&(e[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)n.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(e[i[r]]=t[i[r]]);return e}function V(t){var n=typeof Symbol=="function"&&Symbol.iterator,e=n&&t[n],i=0;if(e)return e.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")}var Z=function(){function t(){this.__map={}}return t.prototype.beforeEach=function(n){this.__interceptor=n},t.prototype.on=function(n,e){var i,r,o=Array.isArray(n)?n:[n];try{for(var a=V(o),l=a.next();!l.done;l=a.next()){var s=l.value;this.__map[s]=this.__map[s]||[];var u=this.__map[s];u&&u.push(e)}}catch(h){i={error:h}}finally{try{l&&!l.done&&(r=a.return)&&r.call(a)}finally{if(i)throw i.error}}return this},t.prototype.emit=function(n,e,i){var r=this;this.__interceptor!==void 0?this.__interceptor(n,function(){r.__emit(n,e),i&&i()}):(this.__emit(n,e),i&&i())},t.prototype.__emit=function(n,e){var i,r,o=this.__map[n];if(Array.isArray(o)&&(o==null?void 0:o.length))try{for(var a=V(o),l=a.next();!l.done;l=a.next())(0,l.value)(e)}catch(s){i={error:s}}finally{try{l&&!l.done&&(r=a.return)&&r.call(a)}finally{if(i)throw i.error}}this.event=m(m({},e),{__type:n})},t.prototype.off=function(n,e){var i=this.__map[n];if(i!==void 0)if(e===void 0)delete this.__map[n];else{var r=i.findIndex(function(o){return o===e});i.splice(r,1)}},t.prototype.destroy=function(){this.__map={}},t}(),tt=Object.prototype.toString;function et(t){return tt.call(t)==="[object Function]"}var T,I="clientX",O="clientY",it=16,N="start",A="move",R="cancel",E="end",X="computed",nt="left",rt="right",ot="up",at="down",z="touchstart",F="touchmove",j="touchend",D="touchcancel",L="mouseup",S="mousemove",k="mousedown",st=((T={})[4]="start",T[5]="move",T[1]="end",T[3]="cancel",T);function lt(t){return st[t]}function ut(t,n,e){var i,r,o,a,l,s,u,h={1:(i={},i[0]=(r={},r.move=4,r),i[4]=(o={},o.move=5,o.end=1,o.cancel=3,o),i[5]=(a={},a.move=5,a.end=1,a.cancel=3,a),i),0:(l={},l[4]=(s={},s.move=2,s.end=1,s.cancel=3,s),l[5]=(u={},u.start=2,u.move=2,u.end=1,u.cancel=3,u),l)}[Number(t)][n];return h!==void 0&&h[e]||0}function ct(t){[1,3,2].includes(t.state)&&(t.state=0)}function Y(t){return[4,5].includes(t)}function dt(t){if(t.disabled)return t.state=0,!0}function ht(t,n){return m(m(m({},t),n),{state:0,disabled:!1})}function W(){var t,n,e,i,r=0;return function(o){if(t=n,o!==void 0){var a=function(u,h){var g=u.phase,c=u.points,_=u.changedPoints,d=u.nativeEvent,p=c.length,f=N===g,v=E===g&&p===0||R===g,P=Date.now(),C=H(c)||H(_),y=C.x,b=C.y,$=d.currentTarget;return Object.assign(u,{id:h,x:y,y:b,timestamp:P,isStart:f,isEnd:v,pointLength:p,currentTarget:$,getOffset:function(x){x===void 0&&(x=$);var K=x.getBoundingClientRect();return{x:y-Math.round(K.left),y:b-Math.round(K.top)}}})}(o,r=Number.MAX_SAFE_INTEGER>r?++r:1);n=a;var l=a.isStart,s=a.pointLength;return l&&(e=a,t=void 0,i=1<s?a:void 0),m(m({},a),{prevInput:t,startMultiInput:i,startInput:e})}}}function H(t){var n=t.length;if(0<n){if(n===1){var e=t[0],i=e.clientX,r=e.clientY;return{x:Math.round(i),y:Math.round(r)}}var o=t.reduce(function(a,l){return a.x+=l[I],a.y+=l[O],a},{x:0,y:0});return{x:Math.round(o.x/n),y:Math.round(o.y/n)}}}function U(t,n,e,i){e.target,e.currentTarget,e.type;var r,o=Q(e,["target","currentTarget","type"]);return document.createEvent?(r=document.createEvent("HTMLEvents")).initEvent(t,i==null?void 0:i.bubbles,i==null?void 0:i.cancelable):r=new Event(t,i),Object.assign(r,o,{match:function(){return e.targets&&0<e.targets.length&&e.targets.every(function(a){return r.currentTarget.contains(a)})}}),n.dispatchEvent(r)}var q=[z,F,j,D],pt={domEvents:{bubbles:!0,cancelable:!0},preventDefault:function(t){if(t.target&&"tagName"in t.target){var n=t.target.tagName;return!/^(?:INPUT|TEXTAREA|BUTTON|SELECT)$/.test(n)}return!1}},ft=function(t){function n(e,i){var r,o=t.call(this)||this;o.__computeFunctionList=[],o.__computeFunctionCreatorList=[],o.__pluginContexts=[],o.el=e,o.c={},o.__options=m(m({},pt),i);var a,l,s,u,h=function(d){var p=W();return function(f){var v=[],P=[];Array.from(f.touches).forEach(function(y){var b=y.clientX,$=y.clientY,x=y.target;d!=null&&d.contains(x)&&(v.push(x),P.push({clientX:b,clientY:$,target:x}))});var C=Array.from(f.changedTouches).map(function(y){return{clientX:y.clientX,clientY:y.clientY,target:y.target}});return p({phase:f.type.replace("touch",""),changedPoints:C,points:P,nativeEvent:f,target:f.target,targets:v})}}(o.el),g=(l=!1,s=null,u=W(),function(d){var p,f=d.clientX,v=d.clientY,P=d.type,C=d.button,y=d.target,b=[{clientX:f,clientY:v,target:y}];if(k===P&&C===0)s=y,l=!0,p=N;else{if(!l)return;S===P?p=A:L===P&&(b=[],p=E,l=!1)}var $=a||[{clientX:f,clientY:v,target:y}];if(a=[{clientX:f,clientY:v,target:y}],p!==void 0)return u({phase:p,changedPoints:$,points:b,target:s,targets:[s],nativeEvent:d})});if(o.__inputCreatorMap=((r={})[z]=h,r[F]=h,r[j]=h,r[D]=h,r[k]=g,r[S]=g,r[L]=g,r),o.on("at:after",function(d){var p=d.target,f=d.__type,v=o.__options.domEvents;v&&o.el!==void 0&&p&&(U(f,p,d,v),U("at:after",p,d,v))}),e!==void 0){e.style.webkitTapHighlightColor="rgba(0,0,0,0)";var c=!1;try{var _={};Object.defineProperty(_,"passive",{get:function(){c=!0}}),window.addEventListener("_",function(){},_)}catch{}o.on("u",function(d,p,f){return q.forEach(function(v){d.addEventListener(v,p,f)}),d.addEventListener(k,p,f),window.addEventListener(S,p,f),window.addEventListener(L,p,f),function(){q.forEach(function(v){d.removeEventListener(v,p)}),d.removeEventListener(k,p,f),window.removeEventListener(S,p,f),window.removeEventListener(L,p,f)}}(e,o.catchEvent.bind(o),!(o.__options.preventDefault!==!1||!c)&&{passive:!0}))}return o}return M(n,t),n.prototype.use=function(e,i){this.__pluginContexts.push(e(this,i))},n.prototype.catchEvent=function(e){var i=this.__inputCreatorMap[e.type](e);if(i!==void 0){var r=function(){return e.preventDefault()};(function(a,l){var s=l.preventDefault;return et(s)?s(a):!!s})(e,this.__options)&&r(),this.emit("input",i),this.emit2("at:"+i.phase,i,{});var o={};this.__computeFunctionList.forEach(function(a){var l=a(i,o);if(l!==void 0)for(var s in l)o[s]=l[s]}),this.emit(X,m(m(m({},i),o),{stopPropagation:function(){return e.stopPropagation()},stopImmediatePropagation:function(){return e.stopImmediatePropagation()},preventDefault:r}))}},n.prototype.compute=function(e,i){var r,o;try{for(var a=V(e),l=a.next();!l.done;l=a.next()){var s=l.value;this.__computeFunctionCreatorList.includes(s)||(this.__computeFunctionCreatorList.push(s),this.__computeFunctionList.push(s()))}}catch(u){r={error:u}}finally{try{l&&!l.done&&(o=a.return)&&o.call(a)}finally{if(r)throw r.error}}this.on(X,i)},n.prototype.beforeEach=function(e){var i=this;t.prototype.beforeEach.call(this,function(r,o){var a;!((a=i.c)===null||a===void 0)&&a.name?e(r,o):o()})},n.prototype.get=function(e){return this.__pluginContexts.find(function(i){return e===i.name})},n.prototype.set=function(e){this.__options=m(m({},this.__options),e)},n.prototype.emit2=function(e,i,r){var o=this;this.c=r,this.emit(e,m(m({},i),{type:e}),function(){o.emit("at:after",m(m({},i),{name:e,__type:e}))})},n.prototype.destroy=function(){this.emit("u"),t.prototype.destroy.call(this)},n}(Z),mt=function(t){return Math.sqrt(t.x*t.x+t.y*t.y)},vt=function(t){return t/Math.PI*180},G=function(t,n){if(t!==0||n!==0)return Math.abs(t)>=Math.abs(n)?0<t?rt:nt:0<n?at:ot};function yt(){return function(t){var n=t.prevInput,e=0,i=0,r=0;if(n!==void 0&&(e=t.x-n.x,i=t.y-n.y,e!==0||i!==0)){var o=Math.sqrt(Math.pow(e,2)+Math.pow(i,2));r=Math.round(vt(Math.acos(Math.abs(e)/o)))}return{deltaX:e,deltaY:i,deltaXYAngle:r}}}function gt(){var t,n=0,e=0,i=0,r=0,o=0;return function(a){var l=a.phase,s=a.startInput;return N===l?(n=0,e=0,i=0,r=0,o=0):A===l&&(n=Math.round(a.points[0][I]-s.points[0][I]),e=Math.round(a.points[0][O]-s.points[0][O]),i=Math.abs(n),r=Math.abs(e),o=Math.round(mt({x:i,y:r})),t=G(n,e)),{displacementX:n,displacementY:e,distanceX:i,distanceY:r,distance:o,overallDirection:t}}}function _t(){var t,n,e=0,i=0,r=0,o=0;return function(a){if(a!==void 0){n=n||a.startInput;var l=a.timestamp-n.timestamp;if(it<l){var s=a.x-n.x,u=a.y-n.y;r=Math.round(s/l*100)/100,o=Math.round(u/l*100)/100,e=Math.abs(r),i=Math.abs(o),t=G(s,u),n=a}}return{velocityX:e,velocityY:i,speedX:r,speedY:o,direction:t}}}var Pt={name:"pan",threshold:10,pointLength:1};function wt(t,n){var e=ht(Pt,n);return t.compute([_t,gt,yt],function(i){if(ct(e),!dt(e)){var r,o,a,l,s,u=(r=i.pointLength,o=i.distance,a=i.direction,l=i.phase,s=e.state,(Y(s)||e.threshold<=o)&&e.pointLength===r&&a!==void 0||Y(s)&&[R,E].includes(l));if(e.state=ut(u,e.state,i.phase),u){var h=e.name;t.emit2(h,i,e),t.emit2(h+lt(e.state),i,e),![E,R].includes(i.phase)&&i.direction&&t.emit2(h+i.direction,i,e)}}}),e}var bt=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"audio-player"},[e("div",{staticClass:"audio__btn-wrap"},[t.showPlaybackRate?e("div",{staticClass:"audio__play-rate",style:{color:t.themeColor}},[e("span",{on:{click:function(i){i.stopPropagation(),t.isShowRates=!t.isShowRates}}},[t._v(t._s(t.playbackRate.toFixed(1)+"x"))]),e("transition",{attrs:{name:"fade-rate"}},[e("div",{directives:[{name:"show",rawName:"v-show",value:t.isShowRates,expression:"isShowRates"}],staticClass:"audio__play-rate__dropdown",style:{backgroundColor:t.themeColor}},t._l(t.playbackRates,function(i){return e("div",{key:"pr_"+i,on:{click:function(r){return r.stopPropagation(),t.handleSetPlaybackRate(i)}}},[t._v(" "+t._s(i.toFixed(1)+"x")+" ")])}),0)])],1):t._e(),t.showPrevButton?e("div",{staticClass:"audio__play-prev",class:{disable:!t.isLoop&&t.currentPlayIndex===0},style:{color:t.themeColor},on:{click:function(i){return i.stopPropagation(),t.playPrev.apply(null,arguments)}}},[t._t("play-prev",function(){return[e("svg",{staticClass:"audio__play-icon",attrs:{"aria-hidden":"true"}},[e("use",{attrs:{"xlink:href":"#icon-play-prev"}})])]})],2):t._e(),t.isLoading?e("div",{staticClass:"audio__play-loading"},t._l(8,function(i){return e("span",{key:i,style:{backgroundColor:t.themeColor}})}),0):[!t.isPlaying&&t.showPlayButton?e("div",{staticClass:"audio__play-start",style:{color:t.themeColor},on:{click:function(i){return i.stopPropagation(),t.play.apply(null,arguments)}}},[t._t("play-start",function(){return[e("svg",{staticClass:"audio__play-icon",attrs:{"aria-hidden":"true"}},[e("use",{attrs:{"xlink:href":"#icon-play"}})])]})],2):t.showPlayButton?e("div",{staticClass:"audio__play-pause",style:{color:t.themeColor},on:{click:function(i){return i.stopPropagation(),t.pause.apply(null,arguments)}}},[t._t("play-pause",function(){return[e("svg",{staticClass:"audio__play-icon",attrs:{"aria-hidden":"true"}},[e("use",{attrs:{"xlink:href":"#icon-play-pause"}})])]})],2):t._e()],t.showNextButton?e("div",{staticClass:"audio__play-next",class:{disable:!t.isLoop&&t.currentPlayIndex===t.audioList.length-1},style:{color:t.themeColor},on:{click:function(i){return i.stopPropagation(),t.playNext.apply(null,arguments)}}},[t._t("play-next",function(){return[e("svg",{staticClass:"audio__play-icon",attrs:{"aria-hidden":"true"}},[e("use",{attrs:{"xlink:href":"#icon-play-next"}})])]})],2):t._e(),t.showVolumeButton?e("div",{staticClass:"audio__play-volume-icon-wrap"},[e("svg",{staticClass:"audio__play-icon",style:{color:t.themeColor},attrs:{"aria-hidden":"true"},on:{click:function(i){return i.stopPropagation(),t.handleVolumeIconTouchstart.apply(null,arguments)}}},[e("use",{attrs:{"xlink:href":t.currentVolume?"#icon-play-volume":"#icon-play-volume-no"}})]),e("transition",{attrs:{name:"fade-volume"}},[e("div",{directives:[{name:"show",rawName:"v-show",value:t.isShowVolume,expression:"isShowVolume"}],ref:"playVolumeWrap",staticClass:"audio__play-volume-wrap",on:{click:function(i){return i.stopPropagation(),t.handleVolumePanmove.apply(null,arguments)},panmove:t.handleVolumePanmove,panend:t.handleVolumePanend}},[e("div",{ref:"playVolume",staticClass:"audio__play-volume",style:{height:t.currentVolume*100+"%",backgroundColor:t.themeColor}})])])],1):t._e(),e("div",{directives:[{name:"show",rawName:"v-show",value:t.isShowErrorMessage,expression:"isShowErrorMessage"}],staticClass:"audio__notice"},[t._v(" "+t._s(t.noticeMessage)+" ")])],2),e("div",{directives:[{name:"show",rawName:"v-show",value:t.showProgressBar,expression:"showProgressBar"}],ref:"audioProgressWrap",staticClass:"audio__progress-wrap",on:{click:function(i){return i.stopPropagation(),t.handleClickProgressWrap.apply(null,arguments)}}},[e("div",{ref:"audioProgress",staticClass:"audio__progress",style:{backgroundColor:t.themeColor}}),e("div",{ref:"audioProgressPoint",staticClass:"audio__progress-point",style:{backgroundColor:t.themeColor,boxShadow:"0 0 10px 0 "+t.themeColor},on:{panstart:t.handleProgressPanstart,panend:t.handleProgressPanend,panmove:t.handleProgressPanmove}})]),e("div",{directives:[{name:"show",rawName:"v-show",value:t.showProgressBar,expression:"showProgressBar"}],staticClass:"audio__time-wrap"},[e("div",{staticClass:"audio__current-time"},[t._v(" "+t._s(t.currentTimeFormatted)+" ")]),e("div",{staticClass:"audio__duration"},[t._v(" "+t._s(t.durationFormatted)+" ")])]),e("audio",t._b({ref:"audio",staticClass:"audio-player__audio",attrs:{src:t.audioList[t.currentPlayIndex]},on:{ended:t.onEnded,timeupdate:t.onTimeUpdate,loadedmetadata:t.onLoadedmetadata}},"audio",t.$attrs,!1),[t._v(" \u6D4F\u89C8\u5668\u592A\u8001\u54AF\uFF0C\u8BF7\u5347\u7EA7\u6D4F\u89C8\u5668\u5427~ ")])])},xt=[],Et="";function Ct(t,n,e,i,r,o,a,l){var s=typeof t=="function"?t.options:t;n&&(s.render=n,s.staticRenderFns=e,s._compiled=!0),i&&(s.functional=!0),o&&(s._scopeId="data-v-"+o);var u;if(a?(u=function(c){c=c||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,!c&&typeof __VUE_SSR_CONTEXT__!="undefined"&&(c=__VUE_SSR_CONTEXT__),r&&r.call(this,c),c&&c._registeredComponents&&c._registeredComponents.add(a)},s._ssrRegister=u):r&&(u=l?function(){r.call(this,(s.functional?this.parent:this).$root.$options.shadowRoot)}:r),u)if(s.functional){s._injectStyles=u;var h=s.render;s.render=function(_,d){return u.call(d),h(_,d)}}else{var g=s.beforeCreate;s.beforeCreate=g?[].concat(g,u):[u]}return{exports:t,options:s}}const $t={name:"AudioPlayer",inheritAttrs:!1,props:{audioList:{default:null,type:Array},showPlayButton:{default:!0,type:Boolean},showPrevButton:{default:!0,type:Boolean},showNextButton:{default:!0,type:Boolean},showVolumeButton:{default:!0,type:Boolean},showProgressBar:{default:!0,type:Boolean},beforePlay:{default:null,type:Function},beforePrev:{default:null,type:Function},beforeNext:{default:null,type:Function},isLoop:{type:Boolean,default:!0},isAutoPlayNext:{type:Boolean,default:!0},progressInterval:{default:1e3,type:Number},showPlaybackRate:{type:Boolean,default:!0},playbackRates:{type:Array,default:()=>[.5,1,1.5,2]},themeColor:{type:String,default:"#ff2929"},disabledProgressDrag:{type:Boolean,default:!1},disabledProgressClick:{type:Boolean,default:!1}},emits:["pause","play-prev","play-next","timeupdate","loadedmetadata","ended","progress-start","progress-end","progress-move","progress-click","playing","play","play-error"],data(){return{isIOS:/iPhone|iPad|iPod/i.test(window.navigator.userAgent),isPlaying:!1,isDragging:!1,isDraggingVolume:!1,isShowErrorMessage:!1,isLoading:!1,isShowVolume:!1,isShowRates:!1,timer:null,noticeMessage:"",duration:"",currentPlayIndex:0,currentTime:"",currentVolume:1,playbackRate:1,at:null}},computed:{currentTimeFormatted(){return this.currentTime?this.formatTime(this.currentTime):"00:00"},durationFormatted(){return this.duration?this.formatTime(this.duration):"00:00"}},mounted(){this.at=new ft(this.$el,{preventDefault:!1}),this.at.use(wt)},beforeUnmount(){this.at.destroy(),this.pause()},methods:{handleVolumeIconTouchstart(){this.isShowVolume=!this.isShowVolume},handleVolumePanmove(t){let n=this.$refs.playVolumeWrap.getBoundingClientRect(),e=t.y,i,r;i=Math.round(n.bottom-e),r=i/this.$refs.playVolumeWrap.offsetHeight,r=Math.min(r,1),r=Math.max(r,0),this.$refs.audio.volume=r,this.currentVolume=r},handleVolumePanend(){this.isShowVolume=!1},handleSetPlaybackRate(t){this.playbackRate=+t,this.$refs.audio.playbackRate=+t,this.isShowRates=!1},handleShowErrorMessage(t={}){this.noticeMessage=t.message,this.isShowErrorMessage=!0,window.setTimeout(()=>{this.isShowErrorMessage=!1},t.duration||3e3)},onLoadedmetadata(t){this.duration=this.$refs.audio.duration,this.$emit("loadedmetadata",t)},onTimeUpdate(t){this.$emit("timeupdate",t)},formatTime(t){let n;return n=Math.floor(t/60),t=Math.ceil(t%60),n+="",t+="",n=n.length===1?"0"+n:n,t=t.length===1?"0"+t:t,n+":"+t},onEnded(t){window.setTimeout(()=>{this.pause(),this.$emit("ended",t),this.isLoop&&this.isAutoPlayNext&&this.playNext()},1e3)},handleProgressPanstart(t){this.disabledProgressDrag||(this.isDragging=!0,this.$emit("progress-start",t))},handleProgressPanend(t){this.disabledProgressDrag||(this.$refs.audio.currentTime=this.currentTime,this.play(),this.isDragging=!1,this.$emit("progress-end",t))},handleProgressPanmove(t){if(this.disabledProgressDrag)return;let n=t.x,e=t.target.getBoundingClientRect(),r=parseInt(getComputedStyle(t.target).left)+(n-e.left);r=Math.min(r,this.$refs.audioProgressWrap.offsetWidth),r=Math.max(r,0),this.setPointPosition(r),this.$refs.audioProgress.style.width=r+"px",this.currentTime=r/this.$refs.audioProgressWrap.offsetWidth*this.duration,this.$emit("progress-move",t)},handleClickProgressWrap(t){if(this.disabledProgressClick)return;let n=t.target,e=t.offsetX;n!==this.$refs.audioProgressPoint&&(this.currentTime=e/this.$refs.audioProgressWrap.offsetWidth*this.duration,this.$refs.audio.currentTime=this.currentTime,this.setPointPosition(e),this.$refs.audioProgress.style.width=e+"px",this.play(),this.$emit("progress-click",t))},setPointPosition(t){this.$refs.audioProgressPoint.style.left=t-this.$refs.audioProgressPoint.offsetWidth/2+"px"},playing(){if(this.isDragging)return;let t=this.$refs.audio.currentTime/this.$refs.audio.duration*this.$refs.audioProgressWrap.offsetWidth;this.currentTime=this.$refs.audio.currentTime,this.$refs.audioProgress.style.width=t+"px",this.setPointPosition(t),this.$emit("playing")},play(){this.isLoading=!0;let t=()=>{this.$refs.audio.play().then(()=>{this.$nextTick(()=>{this.clearTimer(),this.timer=window.setInterval(this.playing,this.progressInterval),this.isPlaying=!0,this.isLoading=!1}),this.$emit("play")}).catch(n=>{this.handleShowErrorMessage({message:n.message}),n.code===9&&this.isAutoPlayNext&&window.setTimeout(()=>{this.playNext()},1e3),this.isLoading=!1,this.$emit("play-error",n)})};if(this.isIOS&&(console.log("\u4E3A\u4E86\u89E3\u51B3 iOS \u8BBE\u5907\u63A5\u53E3\u5F02\u6B65\u8BF7\u6C42\u540E\u51FA\u73B0\u65E0\u6CD5\u64AD\u653E\u95EE\u9898\uFF0C\u8BF7\u65E0\u89C6 The play() request was interrupted by a call to pause() \u9519\u8BEF"),this.$refs.audio.play(),this.$refs.audio.pause()),this.beforePlay){this.beforePlay(n=>{n!==!1&&t()});return}t()},pause(){this.$refs.audio.pause(),this.$nextTick(()=>{this.clearTimer(),this.isPlaying=!1,this.$emit("pause")})},playPrev(){if(this.currentPlayIndex<=0&&!this.isLoop)return;this.clearTimer();let t=()=>{this.currentPlayIndex<=0&&this.isLoop?this.currentPlayIndex=this.audioList.length-1:this.currentPlayIndex--,this.$nextTick(()=>{this.play(),this.$emit("play-prev")})};if(this.beforePrev){this.beforePrev(n=>{n!==!1&&t()});return}t()},clearTimer(){window.clearInterval(this.timer),this.timer=null},playNext(){if(this.currentPlayIndex+1>=this.audioList.length&&!this.isLoop)return;this.clearTimer();let t=()=>{this.currentPlayIndex+1>=this.audioList.length&&this.isLoop?this.currentPlayIndex=0:this.currentPlayIndex++,this.$nextTick(()=>{this.play(),this.$emit("play-next")})};if(this.beforeNext){this.beforeNext(n=>{n!==!1&&t()});return}t()}}},J={};var Mt=Ct($t,bt,xt,!1,Tt,null,null,null);function Tt(t){for(let n in J)this[n]=J[n]}var B=function(){return Mt.exports}();return B.install=t=>{t.component(B.name,B)},B});
